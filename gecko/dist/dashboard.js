function Vs(n){return n+.5|0}var gn=(n,t,e)=>Math.max(Math.min(n,e),t);function Ns(n){return gn(Vs(n*2.55),0,255)}function mn(n){return gn(Vs(n*255),0,255)}function Le(n){return gn(Vs(n/2.55)/100,0,1)}function Bp(n){return gn(Vs(n*100),0,100)}var ee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ul=[..."0123456789ABCDEF"],xI=n=>ul[n&15],PI=n=>ul[(n&240)>>4]+ul[n&15],po=n=>(n&240)>>4===(n&15),RI=n=>po(n.r)&&po(n.g)&&po(n.b)&&po(n.a);function CI(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&ee[n[1]]*17,g:255&ee[n[2]]*17,b:255&ee[n[3]]*17,a:t===5?ee[n[4]]*17:255}:(t===7||t===9)&&(e={r:ee[n[1]]<<4|ee[n[2]],g:ee[n[3]]<<4|ee[n[4]],b:ee[n[5]]<<4|ee[n[6]],a:t===9?ee[n[7]]<<4|ee[n[8]]:255})),e}var kI=(n,t)=>n<255?t(n):"";function DI(n){var t=RI(n)?xI:PI;return n?"#"+t(n.r)+t(n.g)+t(n.b)+kI(n.a,t):void 0}var OI=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jp(n,t,e){let i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function NI(n,t,e){let i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function MI(n,t,e){let i=jp(n,1,.5),s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function VI(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function hl(n){let e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),a=(r+o)/2,c,u,h;return r!==o&&(h=r-o,u=a>.5?h/(2-r-o):h/(r+o),c=VI(e,i,s,h,r),c=c*60+.5),[c|0,u||0,a]}function dl(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(mn)}function fl(n,t,e){return dl(jp,n,t,e)}function LI(n,t,e){return dl(MI,n,t,e)}function FI(n,t,e){return dl(NI,n,t,e)}function Wp(n){return(n%360+360)%360}function BI(n){let t=OI.exec(n),e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Ns(+t[5]):mn(+t[5]));let s=Wp(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=LI(s,r,o):t[1]==="hsv"?i=FI(s,r,o):i=fl(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function UI(n,t){var e=hl(n);e[0]=Wp(e[0]+t),e=fl(e),n.r=e[0],n.g=e[1],n.b=e[2]}function zI(n){if(!n)return;let t=hl(n),e=t[0],i=Bp(t[1]),s=Bp(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${Le(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}var Up={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},zp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function qI(){let n={},t=Object.keys(zp),e=Object.keys(Up),i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<e.length;s++)r=e[s],a=a.replace(r,Up[r]);r=parseInt(zp[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}var go;function jI(n){go||(go=qI(),go.transparent=[0,0,0,0]);let t=go[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var WI=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function $I(n){let t=WI.exec(n),e=255,i,s,r;if(t){if(t[7]!==i){let o=+t[7];e=t[8]?Ns(o):gn(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Ns(i):gn(i,0,255)),s=255&(t[4]?Ns(s):gn(s,0,255)),r=255&(t[6]?Ns(r):gn(r,0,255)),{r:i,g:s,b:r,a:e}}}function HI(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Le(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var ll=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,yi=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function GI(n,t,e){let i=yi(Le(n.r)),s=yi(Le(n.g)),r=yi(Le(n.b));return{r:mn(ll(i+e*(yi(Le(t.r))-i))),g:mn(ll(s+e*(yi(Le(t.g))-s))),b:mn(ll(r+e*(yi(Le(t.b))-r))),a:n.a+e*(t.a-n.a)}}function mo(n,t,e){if(n){let i=hl(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=fl(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function $p(n,t){return n&&Object.assign(t||{},n)}function qp(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=mn(n[3]))):(t=$p(n,{r:0,g:0,b:0,a:1}),t.a=mn(t.a)),t}function KI(n){return n.charAt(0)==="r"?$I(n):BI(n)}var Ms=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,i;e==="object"?i=qp(t):e==="string"&&(i=CI(t)||jI(t)||KI(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=$p(this._rgb);return t&&(t.a=Le(t.a)),t}set rgb(t){this._rgb=qp(t)}rgbString(){return this._valid?HI(this._rgb):void 0}hexString(){return this._valid?DI(this._rgb):void 0}hslString(){return this._valid?zI(this._rgb):void 0}mix(t,e){if(t){let i=this.rgb,s=t.rgb,r,o=e===r?.5:e,a=2*o-1,c=i.a-s.a,u=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;r=1-u,i.r=255&u*i.r+r*s.r+.5,i.g=255&u*i.g+r*s.g+.5,i.b=255&u*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=GI(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=mn(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=Vs(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return mo(this._rgb,2,t),this}darken(t){return mo(this._rgb,2,-t),this}saturate(t){return mo(this._rgb,1,t),this}desaturate(t){return mo(this._rgb,1,-t),this}rotate(t){return UI(this._rgb,t),this}};function we(){}var ng=(()=>{let n=0;return()=>n++})();function G(n){return n==null}function lt(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Q(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function gt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Gt(n,t){return gt(n)?n:t}function W(n,t){return typeof n>"u"?t:n}var ig=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,_l=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function at(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function nt(n,t,e,i){let s,r,o;if(lt(n))if(r=n.length,i)for(s=r-1;s>=0;s--)t.call(e,n[s],s);else for(s=0;s<r;s++)t.call(e,n[s],s);else if(Q(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function Bs(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function wo(n){if(lt(n))return n.map(wo);if(Q(n)){let t=Object.create(null),e=Object.keys(n),i=e.length,s=0;for(;s<i;++s)t[e[s]]=wo(n[e[s]]);return t}return n}function sg(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function YI(n,t,e,i){if(!sg(n))return;let s=t[n],r=e[n];Q(s)&&Q(r)?wi(s,r,i):t[n]=wo(r)}function wi(n,t,e){let i=lt(t)?t:[t],s=i.length;if(!Q(n))return n;e=e||{};let r=e.merger||YI,o;for(let a=0;a<s;++a){if(o=i[a],!Q(o))continue;let c=Object.keys(o);for(let u=0,h=c.length;u<h;++u)r(c[u],n,o,e)}return n}function vi(n,t){return wi(n,t,{merger:QI})}function QI(n,t,e){if(!sg(n))return;let i=t[n],s=e[n];Q(i)&&Q(s)?vi(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=wo(s))}var Hp={"":n=>n,x:n=>n.x,y:n=>n.y};function JI(n){let t=n.split("."),e=[],i="";for(let s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function XI(n){let t=JI(n);return e=>{for(let i of t){if(i==="")break;e=e&&e[i]}return e}}function Ue(n,t){return(Hp[t]||(Hp[t]=XI(t)))(n)}function Eo(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Ti=n=>typeof n<"u",Fe=n=>typeof n=="function",yl=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function rg(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var et=Math.PI,ut=2*et,ZI=ut+et,Io=Number.POSITIVE_INFINITY,tv=et/180,bt=et/2,jn=et/4,Gp=et*2/3,Be=Math.log10,le=Math.sign;function Ei(n,t,e){return Math.abs(n-t)<e}function bl(n){let t=Math.round(n);n=Ei(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(Be(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function og(n){let t=[],e=Math.sqrt(n),i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function ev(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Hn(n){return!ev(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function ag(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function wl(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function ne(n){return n*(et/180)}function So(n){return n*(180/et)}function Il(n){if(!gt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function vl(n,t){let e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i),r=Math.atan2(i,e);return r<-.5*et&&(r+=ut),{angle:r,distance:s}}function vo(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function nv(n,t){return(n-t+ZI)%ut-et}function Mt(n){return(n%ut+ut)%ut}function Si(n,t,e,i){let s=Mt(n),r=Mt(t),o=Mt(e),a=Mt(r-s),c=Mt(o-s),u=Mt(s-r),h=Mt(s-o);return s===r||s===o||i&&r===o||a>c&&u<h}function Rt(n,t,e){return Math.max(t,Math.min(e,n))}function cg(n){return Rt(n,-32768,32767)}function Ie(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Ao(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}var ye=(n,t,e,i)=>Ao(n,e,i?s=>{let r=n[s][t];return r<e||r===e&&n[s+1][t]===e}:s=>n[s][t]<e),lg=(n,t,e)=>Ao(n,e,i=>n[i][t]>=e);function ug(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}var hg=["push","pop","shift","splice","unshift"];function dg(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),hg.forEach(e=>{let i="_onData"+Eo(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){let o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Tl(n,t){let e=n._chartjs;if(!e)return;let i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(hg.forEach(r=>{delete n[r]}),delete n._chartjs)}function El(n){let t=new Set(n);return t.size===n.length?n:Array.from(t)}var Sl=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function Al(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,Sl.call(window,()=>{i=!1,n.apply(t,e)}))}}function fg(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}var xo=n=>n==="start"?"left":n==="end"?"right":"center",Vt=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,pg=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function xl(n,t,e){let i=t.length,s=0,r=i;if(n._sorted){let{iScale:o,vScale:a,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=o.axis,{min:d,max:p,minDefined:m,maxDefined:_}=o.getUserBounds();if(m){if(s=Math.min(ye(c,h,d).lo,e?i:ye(t,h,o.getPixelForValue(d)).lo),u){let y=c.slice(0,s+1).reverse().findIndex(v=>!G(v[a.axis]));s-=Math.max(0,y)}s=Rt(s,0,i-1)}if(_){let y=Math.max(ye(c,o.axis,p,!0).hi+1,e?0:ye(t,h,o.getPixelForValue(p),!0).hi+1);if(u){let v=c.slice(y-1).findIndex(x=>!G(x[a.axis]));y+=Math.max(0,v)}r=Rt(y,s,i)-s}else r=i-s}return{start:s,count:r}}function Pl(n){let{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;let r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}var _o=n=>n===0||n===1,Kp=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*ut/e)),Yp=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ut/e)+1,bi={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*bt)+1,easeOutSine:n=>Math.sin(n*bt),easeInOutSine:n=>-.5*(Math.cos(et*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>_o(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>_o(n)?n:Kp(n,.075,.3),easeOutElastic:n=>_o(n)?n:Yp(n,.075,.3),easeInOutElastic(n){return _o(n)?n:n<.5?.5*Kp(n*2,.1125,.45):.5+.5*Yp(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-bi.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?bi.easeInBounce(n*2)*.5:bi.easeOutBounce(n*2-1)*.5+.5};function Rl(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Cl(n){return Rl(n)?n:new Ms(n)}function pl(n){return Rl(n)?n:new Ms(n).saturate(.5).darken(.1).hexString()}var iv=["x","y","borderWidth","radius","tension"],sv=["color","borderColor","backgroundColor"];function rv(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:sv},numbers:{type:"number",properties:iv}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ov(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Qp=new Map;function av(n,t){t=t||{};let e=n+JSON.stringify(t),i=Qp.get(e);return i||(i=new Intl.NumberFormat(n,t),Qp.set(e,i)),i}function Ai(n,t,e){return av(t,e).format(n)}var gg={values(n){return lt(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let i=this.chart.options.locale,s,r=n;if(e.length>1){let u=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),r=cv(n,e)}let o=Be(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Ai(n,i,c)},logarithmic(n,t,e){if(n===0)return"0";let i=e[t].significand||n/Math.pow(10,Math.floor(Be(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?gg.numeric.call(this,n,t,e):""}};function cv(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Us={formatters:gg};function lv(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Us.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var bn=Object.create(null),Po=Object.create(null);function Ls(n,t){if(!t)return n;let e=t.split(".");for(let i=0,s=e.length;i<s;++i){let r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function gl(n,t,e){return typeof t=="string"?wi(Ls(n,t),e):wi(Ls(n,""),t)}var ml=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>pl(s.backgroundColor),this.hoverBorderColor=(i,s)=>pl(s.borderColor),this.hoverColor=(i,s)=>pl(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return gl(this,t,e)}get(t){return Ls(this,t)}describe(t,e){return gl(Po,t,e)}override(t,e){return gl(bn,t,e)}route(t,e,i,s){let r=Ls(this,t),o=Ls(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){let c=this[a],u=o[s];return Q(c)?Object.assign({},u,c):W(c,u)},set(c){this[a]=c}}})}apply(t){t.forEach(e=>e(this))}},dt=new ml({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rv,ov,lv]);function uv(n){return!n||G(n.size)||G(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Fs(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function mg(n,t,e,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0,a=e.length,c,u,h,d,p;for(c=0;c<a;c++)if(d=e[c],d!=null&&!lt(d))o=Fs(n,s,r,o,d);else if(lt(d))for(u=0,h=d.length;u<h;u++)p=d[u],p!=null&&!lt(p)&&(o=Fs(n,s,r,o,p));n.restore();let m=r.length/2;if(m>e.length){for(c=0;c<m;c++)delete s[r[c]];r.splice(0,m)}return o}function wn(n,t,e){let i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function kl(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Ro(n,t,e,i){Dl(n,t,e,i,null)}function Dl(n,t,e,i,s){let r,o,a,c,u,h,d,p,m=t.pointStyle,_=t.rotation,y=t.radius,v=(_||0)*tv;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(v),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(y)||y<=0)){switch(n.beginPath(),m){default:s?n.ellipse(e,i,s/2,y,0,0,ut):n.arc(e,i,y,0,ut),n.closePath();break;case"triangle":h=s?s/2:y,n.moveTo(e+Math.sin(v)*h,i-Math.cos(v)*y),v+=Gp,n.lineTo(e+Math.sin(v)*h,i-Math.cos(v)*y),v+=Gp,n.lineTo(e+Math.sin(v)*h,i-Math.cos(v)*y),n.closePath();break;case"rectRounded":u=y*.516,c=y-u,o=Math.cos(v+jn)*c,d=Math.cos(v+jn)*(s?s/2-u:c),a=Math.sin(v+jn)*c,p=Math.sin(v+jn)*(s?s/2-u:c),n.arc(e-d,i-a,u,v-et,v-bt),n.arc(e+p,i-o,u,v-bt,v),n.arc(e+d,i+a,u,v,v+bt),n.arc(e-p,i+o,u,v+bt,v+et),n.closePath();break;case"rect":if(!_){c=Math.SQRT1_2*y,h=s?s/2:c,n.rect(e-h,i-c,2*h,2*c);break}v+=jn;case"rectRot":d=Math.cos(v)*(s?s/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,p=Math.sin(v)*(s?s/2:y),n.moveTo(e-d,i-a),n.lineTo(e+p,i-o),n.lineTo(e+d,i+a),n.lineTo(e-p,i+o),n.closePath();break;case"crossRot":v+=jn;case"cross":d=Math.cos(v)*(s?s/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,p=Math.sin(v)*(s?s/2:y),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+p,i-o),n.lineTo(e-p,i+o);break;case"star":d=Math.cos(v)*(s?s/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,p=Math.sin(v)*(s?s/2:y),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+p,i-o),n.lineTo(e-p,i+o),v+=jn,d=Math.cos(v)*(s?s/2:y),o=Math.cos(v)*y,a=Math.sin(v)*y,p=Math.sin(v)*(s?s/2:y),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+p,i-o),n.lineTo(e-p,i+o);break;case"line":o=s?s/2:Math.cos(v)*y,a=Math.sin(v)*y,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(v)*(s?s/2:y),i+Math.sin(v)*y);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function be(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function zs(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function qs(n){n.restore()}function _g(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){let r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function yg(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function hv(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),G(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function dv(n,t,e,i,s){if(s.strikethrough||s.underline){let r=n.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,c=e-r.actualBoundingBoxAscent,u=e+r.actualBoundingBoxDescent,h=s.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function fv(n,t){let e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function In(n,t,e,i,s,r={}){let o=lt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="",c,u;for(n.save(),n.font=s.string,hv(n,r),c=0;c<o.length;++c)u=o[c],r.backdrop&&fv(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),G(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(u,e,i,r.maxWidth)),n.fillText(u,e,i,r.maxWidth),dv(n,e,i,u,r),i+=Number(s.lineHeight);n.restore()}function xi(n,t){let{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*et,et,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,et,bt,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,bt,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-bt,!0),n.lineTo(e+o.topLeft,i)}var pv=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mv(n,t){let e=(""+n).match(pv);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var _v=n=>+n||0;function Co(n,t){let e={},i=Q(t),s=i?Object.keys(t):t,r=Q(n)?i?o=>W(n[o],n[t[o]]):o=>n[o]:()=>n;for(let o of s)e[o]=_v(r(o));return e}function Ol(n){return Co(n,{top:"y",right:"x",bottom:"y",left:"x"})}function vn(n){return Co(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Lt(n){let t=Ol(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Et(n,t){n=n||{},t=t||dt.font;let e=W(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=W(n.style,t.style);i&&!(""+i).match(gv)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let s={family:W(n.family,t.family),lineHeight:mv(W(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:W(n.weight,t.weight),string:""};return s.string=uv(s),s}function Pi(n,t,e,i){let s=!0,r,o,a;for(r=0,o=n.length;r<o;++r)if(a=n[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),e!==void 0&&lt(a)&&(a=a[e%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function bg(n,t,e){let{min:i,max:s}=n,r=_l(t,(s-i)/2),o=(a,c)=>e&&a===0?0:a+c;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function ze(n,t){return Object.assign(Object.create(n),t)}function ko(n,t=[""],e,i,s=()=>n[0]){let r=e||n;typeof i>"u"&&(i=vg("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>ko([a,...n],t,r,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return wg(a,c,()=>Sv(c,t,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return Xp(a).includes(c)},ownKeys(a){return Xp(a)},set(a,c,u){let h=a._storage||(a._storage=s());return a[c]=h[c]=u,delete a._keys,!0}})}function $n(n,t,e,i){let s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Nl(n,i),setContext:r=>$n(n,r,e,i),override:r=>$n(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return wg(r,o,()=>bv(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function Nl(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Fe(e)?e:()=>e,isIndexable:Fe(i)?i:()=>i}}var yv=(n,t)=>n?n+Eo(t):t,Ml=(n,t)=>Q(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function wg(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];let i=e();return n[t]=i,i}function bv(n,t,e){let{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n,a=i[t];return Fe(a)&&o.isScriptable(t)&&(a=wv(t,a,n,e)),lt(a)&&a.length&&(a=Iv(t,a,n,o.isIndexable)),Ml(t,a)&&(a=$n(a,s,r&&r[t],o)),a}function wv(n,t,e,i){let{_proxy:s,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=t(r,o||i);return a.delete(n),Ml(n,c)&&(c=Vl(s._scopes,s,n,c)),c}function Iv(n,t,e,i){let{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(Q(t[0])){let c=t,u=s._scopes.filter(h=>h!==c);t=[];for(let h of c){let d=Vl(u,s,n,h);t.push($n(d,r,o&&o[n],a))}}return t}function Ig(n,t,e){return Fe(n)?n(t,e):n}var vv=(n,t)=>n===!0?t:typeof n=="string"?Ue(t,n):void 0;function Tv(n,t,e,i,s){for(let r of t){let o=vv(e,r);if(o){n.add(o);let a=Ig(o._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function Vl(n,t,e,i){let s=t._rootScopes,r=Ig(t._fallback,e,i),o=[...n,...s],a=new Set;a.add(i);let c=Jp(a,o,e,r||e,i);return c===null||typeof r<"u"&&r!==e&&(c=Jp(a,o,r,c,i),c===null)?!1:ko(Array.from(a),[""],s,r,()=>Ev(t,e,i))}function Jp(n,t,e,i,s){for(;e;)e=Tv(n,t,e,i,s);return e}function Ev(n,t,e){let i=n._getTarget();t in i||(i[t]={});let s=i[t];return lt(s)&&Q(e)?e:s||{}}function Sv(n,t,e,i){let s;for(let r of t)if(s=vg(yv(r,n),e),typeof s<"u")return Ml(n,s)?Vl(e,i,n,s):s}function vg(n,t){for(let e of t){if(!e)continue;let i=e[n];if(typeof i<"u")return i}}function Xp(n){let t=n._keys;return t||(t=n._keys=Av(n._scopes)),t}function Av(n){let t=new Set;for(let e of n)for(let i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function Ll(n,t,e,i){let{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i),a,c,u,h;for(a=0,c=i;a<c;++a)u=a+e,h=t[u],o[a]={r:s.parse(Ue(h,r),u)};return o}var xv=Number.EPSILON||1e-14,Ii=(n,t)=>t<n.length&&!n[t].skip&&n[t],Tg=n=>n==="x"?"y":"x";function Pv(n,t,e,i){let s=n.skip?t:n,r=t,o=e.skip?t:e,a=vo(r,s),c=vo(o,r),u=a/(a+c),h=c/(a+c);u=isNaN(u)?0:u,h=isNaN(h)?0:h;let d=i*u,p=i*h;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+p*(o.x-s.x),y:r.y+p*(o.y-s.y)}}}function Rv(n,t,e){let i=n.length,s,r,o,a,c,u=Ii(n,0);for(let h=0;h<i-1;++h)if(c=u,u=Ii(n,h+1),!(!c||!u)){if(Ei(t[h],0,xv)){e[h]=e[h+1]=0;continue}s=e[h]/t[h],r=e[h+1]/t[h],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=s*o*t[h],e[h+1]=r*o*t[h])}}function Cv(n,t,e="x"){let i=Tg(e),s=n.length,r,o,a,c=Ii(n,0);for(let u=0;u<s;++u){if(o=a,a=c,c=Ii(n,u+1),!a)continue;let h=a[e],d=a[i];o&&(r=(h-o[e])/3,a[`cp1${e}`]=h-r,a[`cp1${i}`]=d-r*t[u]),c&&(r=(c[e]-h)/3,a[`cp2${e}`]=h+r,a[`cp2${i}`]=d+r*t[u])}}function kv(n,t="x"){let e=Tg(t),i=n.length,s=Array(i).fill(0),r=Array(i),o,a,c,u=Ii(n,0);for(o=0;o<i;++o)if(a=c,c=u,u=Ii(n,o+1),!!c){if(u){let h=u[t]-c[t];s[o]=h!==0?(u[e]-c[e])/h:0}r[o]=a?u?le(s[o-1])!==le(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Rv(n,s,r),Cv(n,r,t)}function yo(n,t,e){return Math.max(Math.min(n,e),t)}function Dv(n,t){let e,i,s,r,o,a=be(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=a,a=e<i-1&&be(n[e+1],t),r&&(s=n[e],o&&(s.cp1x=yo(s.cp1x,t.left,t.right),s.cp1y=yo(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=yo(s.cp2x,t.left,t.right),s.cp2y=yo(s.cp2y,t.top,t.bottom)))}function Eg(n,t,e,i,s){let r,o,a,c;if(t.spanGaps&&(n=n.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")kv(n,s);else{let u=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],c=Pv(u,a,n[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,u=a}t.capBezierPoints&&Dv(n,e)}function Do(){return typeof window<"u"&&typeof document<"u"}function Oo(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function To(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}var No=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Ov(n,t){return No(n).getPropertyValue(t)}var Nv=["top","right","bottom","left"];function Wn(n,t,e){let i={};e=e?"-"+e:"";for(let s=0;s<4;s++){let r=Nv[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var Mv=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Vv(n,t){let e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i,o=!1,a,c;if(Mv(s,r,n.target))a=s,c=r;else{let u=t.getBoundingClientRect();a=i.clientX-u.left,c=i.clientY-u.top,o=!0}return{x:a,y:c,box:o}}function Tn(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:i}=t,s=No(e),r=s.boxSizing==="border-box",o=Wn(s,"padding"),a=Wn(s,"border","width"),{x:c,y:u,box:h}=Vv(n,e),d=o.left+(h&&a.left),p=o.top+(h&&a.top),{width:m,height:_}=t;return r&&(m-=o.width+a.width,_-=o.height+a.height),{x:Math.round((c-d)/m*e.width/i),y:Math.round((u-p)/_*e.height/i)}}function Lv(n,t,e){let i,s;if(t===void 0||e===void 0){let r=n&&Oo(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{let o=r.getBoundingClientRect(),a=No(r),c=Wn(a,"border","width"),u=Wn(a,"padding");t=o.width-u.width-c.width,e=o.height-u.height-c.height,i=To(a.maxWidth,r,"clientWidth"),s=To(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||Io,maxHeight:s||Io}}var yn=n=>Math.round(n*10)/10;function Sg(n,t,e,i){let s=No(n),r=Wn(s,"margin"),o=To(s.maxWidth,n,"clientWidth")||Io,a=To(s.maxHeight,n,"clientHeight")||Io,c=Lv(n,t,e),{width:u,height:h}=c;if(s.boxSizing==="content-box"){let p=Wn(s,"border","width"),m=Wn(s,"padding");u-=m.width+p.width,h-=m.height+p.height}return u=Math.max(0,u-r.width),h=Math.max(0,i?u/i:h-r.height),u=yn(Math.min(u,o,c.maxWidth)),h=yn(Math.min(h,a,c.maxHeight)),u&&!h&&(h=yn(u/2)),(t!==void 0||e!==void 0)&&i&&c.height&&h>c.height&&(h=c.height,u=yn(Math.floor(h*i))),{width:u,height:h}}function Fl(n,t,e){let i=t||1,s=yn(n.height*i),r=yn(n.width*i);n.height=yn(n.height),n.width=yn(n.width);let o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var Ag=(function(){let n=!1;try{let t={get passive(){return n=!0,!1}};Do()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function Bl(n,t){let e=Ov(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function _n(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function xg(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function Pg(n,t,e,i){let s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=_n(n,s,e),a=_n(s,r,e),c=_n(r,t,e),u=_n(o,a,e),h=_n(a,c,e);return _n(u,h,e)}var Fv=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Bv=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Gn(n,t,e){return n?Fv(t,e):Bv()}function Ul(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function zl(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Rg(n){return n==="angle"?{between:Si,compare:nv,normalize:Mt}:{between:Ie,compare:(t,e)=>t-e,normalize:t=>t}}function Zp({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function Uv(n,t,e){let{property:i,start:s,end:r}=e,{between:o,normalize:a}=Rg(i),c=t.length,{start:u,end:h,loop:d}=n,p,m;if(d){for(u+=c,h+=c,p=0,m=c;p<m&&o(a(t[u%c][i]),s,r);++p)u--,h--;u%=c,h%=c}return h<u&&(h+=c),{start:u,end:h,loop:d,style:n.style}}function ql(n,t,e){if(!e)return[n];let{property:i,start:s,end:r}=e,o=t.length,{compare:a,between:c,normalize:u}=Rg(i),{start:h,end:d,loop:p,style:m}=Uv(n,t,e),_=[],y=!1,v=null,x,R,O,M=()=>c(s,O,x)&&a(s,O)!==0,N=()=>a(r,x)===0||c(r,O,x),D=()=>y||M(),I=()=>!y||N();for(let w=h,T=h;w<=d;++w)R=t[w%o],!R.skip&&(x=u(R[i]),x!==O&&(y=c(x,s,r),v===null&&D()&&(v=a(x,s)===0?w:T),v!==null&&I()&&(_.push(Zp({start:v,end:w,loop:p,count:o,style:m})),v=null),T=w,O=x));return v!==null&&_.push(Zp({start:v,end:d,loop:p,count:o,style:m})),_}function jl(n,t){let e=[],i=n.segments;for(let s=0;s<i.length;s++){let r=ql(i[s],n.points,t);r.length&&e.push(...r)}return e}function zv(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}function qv(n,t,e,i){let s=n.length,r=[],o=t,a=n[t],c;for(c=t+1;c<=e;++c){let u=n[c%s];u.skip||u.stop?a.skip||(i=!1,r.push({start:t%s,end:(c-1)%s,loop:i}),t=o=u.stop?c:null):(o=c,a.skip&&(t=c)),a=u}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function Cg(n,t){let e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];let r=!!n._loop,{start:o,end:a}=zv(e,s,r,i);if(i===!0)return tg(n,[{start:o,end:a,loop:r}],e,t);let c=a<o?a+s:a,u=!!n._fullLoop&&o===0&&a===s-1;return tg(n,qv(e,o,c,u),e,t)}function tg(n,t,e,i){return!i||!i.setContext||!e?t:jv(n,t,e,i)}function jv(n,t,e,i){let s=n._chart.getContext(),r=eg(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=e.length,u=[],h=r,d=t[0].start,p=d;function m(_,y,v,x){let R=a?-1:1;if(_!==y){for(_+=c;e[_%c].skip;)_-=R;for(;e[y%c].skip;)y+=R;_%c!==y%c&&(u.push({start:_%c,end:y%c,loop:v,style:x}),h=x,d=y%c)}}for(let _ of t){d=a?d:_.start;let y=e[d%c],v;for(p=d+1;p<=_.end;p++){let x=e[p%c];v=eg(i.setContext(ze(s,{type:"segment",p0:y,p1:x,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),Wv(v,h)&&m(d,p-1,_.loop,h),y=x,h=v}d<p-1&&m(d,p-1,_.loop,h)}return u}function eg(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Wv(n,t){if(!t)return!1;let e=[],i=function(s,r){return Rl(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function bo(n,t,e){return n.options.clip?n[e]:t[e]}function $v(n,t){let{xScale:e,yScale:i}=n;return e&&i?{left:bo(e,t,"left"),right:bo(e,t,"right"),top:bo(i,t,"top"),bottom:bo(i,t,"bottom")}:t}function Wl(n,t){let e=t._clip;if(e.disabled)return!1;let i=$v(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}var nu=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){let r=e.listeners[s],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Sl.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;let r=i.items,o=r.length-1,a=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},qe=new nu,kg="transparent",Hv={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let i=Cl(n||kg),s=i.valid&&Cl(t||kg);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}},iu=class{constructor(t,e,i,s){let r=e[i];s=Pi([t.to,s,r,t.from]);let o=Pi([t.from,r,s]);this._active=!0,this._fn=t.fn||Hv[t.type||typeof o],this._easing=bi[t.easing]||bi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Pi([t.to,e,s,t.from]),this._from=Pi([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to,c;if(this._active=r!==a&&(o||e<i),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=r;return}c=e/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(r,a,c)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}},jo=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Q(t))return;let e=Object.keys(dt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{let r=t[s];if(!Q(r))return;let o={};for(let a of e)o[a]=r[a];(lt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){let i=e.options,s=Kv(t,i);if(!s)return[];let r=this._createAnimations(s,i);return i.$shared&&Gv(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){let i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,e));continue}let h=e[u],d=r[u],p=i.get(u);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){t[u]=h;continue}r[u]=d=new iu(p,t,u,h),s.push(d)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return qe.add(this._chart,i),!0}};function Gv(n,t){let e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){let r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function Kv(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Dg(n,t){let e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function Yv(n,t,e){if(e===!1)return!1;let i=Dg(n,e),s=Dg(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Qv(n){let t,e,i,s;return Q(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Cm(n,t){let e=[],i=n._getSortedDatasetMetas(t),s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function Og(n,t,e,i={}){let s=n.keys,r=i.mode==="single",o,a,c,u;if(t===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(c=+s[o],c===e){if(h=!0,i.all)continue;break}u=n.values[c],gt(u)&&(r||t===0||le(t)===le(u))&&(t+=u)}return!h&&!i.all?0:t}function Jv(n,t){let{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,u,h;for(c=0,u=o.length;c<u;++c)h=o[c],a[c]={[s]:h,[r]:n[h]};return a}function $l(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Xv(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Zv(n){let{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function tT(n,t,e){let i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Ng(n,t,e,i){for(let s of t.getMatchingVisibleMetas(i).reverse()){let r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function Mg(n,t){let{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=i,c=r.axis,u=o.axis,h=Xv(r,o,i),d=t.length,p;for(let m=0;m<d;++m){let _=t[m],{[c]:y,[u]:v}=_,x=_._stacks||(_._stacks={});p=x[u]=tT(s,h,y),p[a]=v,p._top=Ng(p,o,!0,i.type),p._bottom=Ng(p,o,!1,i.type);let R=p._visualValues||(p._visualValues={});R[a]=v}}function Hl(n,t){let e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function eT(n,t){return ze(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nT(n,t,e){return ze(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function js(n,t){let e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(let s of t){let r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}var Gl=n=>n==="reset"||n==="none",Vg=(n,t)=>t?n:Object.assign({},n),iT=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Cm(e,!0),values:null},Ee=class{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=$l(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&js(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(d,p,m,_)=>d==="x"?p:d==="r"?_:m,r=e.xAxisID=W(i.xAxisID,Hl(t,"x")),o=e.yAxisID=W(i.yAxisID,Hl(t,"y")),a=e.rAxisID=W(i.rAxisID,Hl(t,"r")),c=e.indexAxis,u=e.iAxisID=s(c,r,o,a),h=e.vAxisID=s(c,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Tl(this._data,this),t._stacked&&js(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Q(e)){let s=this._cachedMeta;this._data=Jv(e,s)}else if(i!==e){if(i){Tl(i,this);let s=this._cachedMeta;js(s),s._parsed=[]}e&&Object.isExtensible(e)&&dg(e,this),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let r=e._stacked;e._stacked=$l(e.vScale,e),e.stack!==i.stack&&(s=!0,js(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&(Mg(this,e._parsed),e._stacked=$l(e.vScale,e))}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis,c=t===0&&e===s.length?!0:i._sorted,u=t>0&&i._parsed[t-1],h,d,p;if(this._parsing===!1)i._parsed=s,i._sorted=!0,p=s;else{lt(s[t])?p=this.parseArrayData(i,s,t,e):Q(s[t])?p=this.parseObjectData(i,s,t,e):p=this.parsePrimitiveData(i,s,t,e);let m=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<e;++h)i._parsed[h+t]=d=p[h],c&&(m()&&(c=!1),u=d);i._sorted=c}o&&Mg(this,p)}parsePrimitiveData(t,e,i,s){let{iScale:r,vScale:o}=t,a=r.axis,c=o.axis,u=r.getLabels(),h=r===o,d=new Array(s),p,m,_;for(p=0,m=s;p<m;++p)_=p+i,d[p]={[a]:h||r.parse(u[_],_),[c]:o.parse(e[_],_)};return d}parseArrayData(t,e,i,s){let{xScale:r,yScale:o}=t,a=new Array(s),c,u,h,d;for(c=0,u=s;c<u;++c)h=c+i,d=e[h],a[c]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,e,i,s){let{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,u=new Array(s),h,d,p,m;for(h=0,d=s;h<d;++h)p=h+i,m=e[p],u[h]={x:r.parse(Ue(m,a),p),y:o.parse(Ue(m,c),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){let s=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:Cm(s,!0),values:e._stacks[t.axis]._visualValues};return Og(a,o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){let r=i[e.axis],o=r===null?NaN:r,a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=Og(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){let i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),c=iT(e,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=Zv(a),p,m;function _(){m=s[p];let y=m[a.axis];return!gt(m[t.axis])||h>y||d<y}for(p=0;p<o&&!(!_()&&(this.updateRangeFromParsed(u,t,m,c),r));++p);if(r){for(p=o-1;p>=0;--p)if(!_()){this.updateRangeFromParsed(u,t,m,c);break}}return u}getAllParsedValues(t){let e=this._cachedMeta._parsed,i=[],s,r,o;for(s=0,r=e.length;s<r;++s)o=e[s][t.axis],gt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){let e=this._cachedMeta;this.update(t||"default"),e._clip=Qv(W(this.options.clip,Yv(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],r=e.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop,h;for(i.dataset&&i.dataset.draw(t,r,a,c),h=a;h<a+c;++h){let d=s[h];d.hidden||(d.active&&u?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,e){let i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){let s=this.getDataset(),r;if(t>=0&&t<this._cachedMeta.data.length){let o=this._cachedMeta.data[t];r=o.$context||(o.$context=nT(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=eT(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){let s=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],c=this.enableOptionSharing&&Ti(i);if(a)return Vg(a,c);let u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),d=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),m=Object.keys(dt.elements[t]),_=()=>this.getContext(i,s,e),y=u.resolveNamedOptions(p,m,_,d);return y.$shared&&(y.$shared=c,r[o]=Object.freeze(Vg(y,c))),y}_resolveAnimations(t,e,i){let s=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let c;if(s.options.animation!==!1){let h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,e),p=h.getOptionScopes(this.getDataset(),d);c=h.createResolver(p,this.getContext(t,i,e))}let u=new jo(s,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Gl(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,s){Gl(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Gl(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;let r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,i=this._cachedMeta.data;for(let[a,c,u]of this._syncList)this[a](c,u);this._syncList=[];let s=i.length,r=e.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){let s=this._cachedMeta,r=s.data,o=t+e,a,c=u=>{for(u.length+=e,a=u.length-1;a>=o;a--)u[a]=u[a-e]};for(c(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(t,e);i._stacked&&js(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};function sT(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),i=[];for(let s=0,r=e.length;s<r;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=El(i.sort((s,r)=>s-r))}return n._cache.$bar}function rT(n){let t=n.iScale,e=sT(t,n.type),i=t._length,s,r,o,a,c=()=>{o===32767||o===-32768||(Ti(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=e.length;s<r;++s)o=t.getPixelForValue(e[s]),c();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),c();return i}function oT(n,t,e,i){let s=e.barThickness,r,o;return G(s)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}function aT(n,t,e,i){let s=t.pixels,r=s[n],o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null,c=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);let u=r-(r-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:e.barPercentage,start:u}}function cT(n,t,e,i){let s=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r),c=o,u=a;Math.abs(o)>Math.abs(a)&&(c=a,u=o),t[e.axis]=u,t._custom={barStart:c,barEnd:u,start:s,end:r,min:o,max:a}}function km(n,t,e,i){return lt(n)?cT(n,t,e,i):t[e.axis]=e.parse(n,i),t}function Lg(n,t,e,i){let s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,c=[],u,h,d,p;for(u=e,h=e+i;u<h;++u)p=t[u],d={},d[s.axis]=a||s.parse(o[u],u),c.push(km(p,d,r,u));return c}function Kl(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function lT(n,t,e){return n!==0?le(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function uT(n){let t,e,i,s,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:i,reverse:t,top:s,bottom:r}}function hT(n,t,e,i){let s=t.borderSkipped,r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:u,bottom:h}=uT(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=u:(e._bottom||0)===i?s=h:(r[Fg(h,o,a,c)]=!0,s=u)),r[Fg(s,o,a,c)]=!0,n.borderSkipped=r}function Fg(n,t,e,i){return i?(n=dT(n,t,e),n=Bg(n,e,t)):n=Bg(n,t,e),n}function dT(n,t,e){return n===t?e:n===e?t:n}function Bg(n,t,e){return n==="start"?t:n==="end"?e:n}function fT(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var su=class extends Ee{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,s){return Lg(t,e,i,s)}parseArrayData(t,e,i,s){return Lg(t,e,i,s)}parseObjectData(t,e,i,s){let{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,u=r.axis==="x"?a:c,h=o.axis==="x"?a:c,d=[],p,m,_,y;for(p=i,m=i+s;p<m;++p)y=e[p],_={},_[r.axis]=r.parse(Ue(y,u),p),d.push(km(Ue(y,h),_,o,p));return d}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);let r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let e=this._cachedMeta,{iScale:i,vScale:s}=e,r=this.getParsed(t),o=r._custom,a=Kl(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){let r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,c=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:p}=this._getSharedOptions(e,s);for(let m=e;m<e+i;m++){let _=this.getParsed(m),y=r||G(_[a.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),v=this._calculateBarIndexPixels(m,h),x=(_._stacks||{})[a.axis],R={horizontal:u,base:y.base,enableBorderRadius:!x||Kl(_._custom)||o===x._top||o===x._bottom,x:u?y.head:v.center,y:u?v.center:y.head,height:u?v.size:Math.abs(y.size),width:u?Math.abs(y.size):v.size};p&&(R.options=d||this.resolveDataElementOptions(m,t[m].active?"active":s));let O=R.options||t[m].options;hT(R,O,x,o),fT(R,O,h.ratio),this.updateElement(t[m],m,R,s)}}_getStacks(t,e){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),c=a&&a[i.axis],u=h=>{let d=h._parsed.find(m=>m[i.axis]===c),p=d&&d[h.vScale.axis];if(G(p)||isNaN(p))return!0};for(let h of s)if(!(e!==void 0&&u(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){let t={},e=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[W(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){let s=this._getStacks(t,i),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){let t=this.options,e=this._cachedMeta,i=e.iScale,s=[],r,o;for(r=0,o=e.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));let a=t.barThickness;return{min:a||rT(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,c=this.getParsed(t),u=c._custom,h=Kl(u),d=c[e.axis],p=0,m=i?this.applyStack(e,c,i):d,_,y;m!==d&&(p=m-d,m=d),h&&(d=u.barStart,m=u.barEnd-u.barStart,d!==0&&le(d)!==le(u.barEnd)&&(p=0),p+=d);let v=!G(r)&&!h?r:p,x=e.getPixelForValue(v);if(this.chart.getDataVisibility(t)?_=e.getPixelForValue(p+m):_=x,y=_-x,Math.abs(y)<o){y=lT(y,e,a)*o,d===a&&(x-=y/2);let R=e.getPixelForDecimal(0),O=e.getPixelForDecimal(1),M=Math.min(R,O),N=Math.max(R,O);x=Math.max(Math.min(x,N),M),_=x+y,i&&!h&&(c._stacks[e.axis]._visualValues[s]=e.getValueForPixel(_)-e.getValueForPixel(x))}if(x===e.getPixelForValue(a)){let R=le(y)*e.getLineWidthForValue(a)/2;x+=R,y-=R}return{size:y,base:x,head:_,center:_+y/2}}_calculateBarIndexPixels(t,e){let i=e.scale,s=this.options,r=s.skipNull,o=W(s.maxBarThickness,1/0),a,c,u=this._getAxisCount();if(e.grouped){let h=r?this._getStackCount(t):e.stackCount,d=s.barThickness==="flex"?aT(t,e,s,h*u):oT(t,e,s,h*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(W(p,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+m;a=d.start+d.chunk*_+d.chunk/2,c=Math.min(o,d.chunk*d.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),c=Math.min(o,e.min*e.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){let t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length,r=0;for(;r<s;++r)this.getParsed(r)[e.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}},ru=class extends Ee{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){let r=super.parsePrimitiveData(t,e,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(t,e,i,s){let r=super.parseArrayData(t,e,i,s);for(let o=0;o<r.length;o++){let a=e[i+o];r[o]._custom=W(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(t,e,i,s){let r=super.parseObjectData(t,e,i,s);for(let o=0;o<r.length;o++){let a=e[i+o];r[o]._custom=W(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){let t=this._cachedMeta.data,e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),c=r.getLabelForValue(o.y),u=o._custom;return{label:i[t]||"",value:"("+a+", "+c+(u?", "+u:"")+")"}}update(t){let e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){let r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,s),h=o.axis,d=a.axis;for(let p=e;p<e+i;p++){let m=t[p],_=!r&&this.getParsed(p),y={},v=y[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(_[h]),x=y[d]=r?a.getBasePixel():a.getPixelForValue(_[d]);y.skip=isNaN(v)||isNaN(x),u&&(y.options=c||this.resolveDataElementOptions(p,m.active?"active":s),r&&(y.options.radius=0)),this.updateElement(m,p,y,s)}}resolveDataElementOptions(t,e){let i=this.getParsed(t),s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let r=s.radius;return e!=="active"&&(s.radius=0),s.radius+=W(i&&i._custom,r),s}};function pT(n,t,e){let i=1,s=1,r=0,o=0;if(t<ut){let a=n,c=a+t,u=Math.cos(a),h=Math.sin(a),d=Math.cos(c),p=Math.sin(c),m=(O,M,N)=>Si(O,a,c,!0)?1:Math.max(M,M*e,N,N*e),_=(O,M,N)=>Si(O,a,c,!0)?-1:Math.min(M,M*e,N,N*e),y=m(0,u,d),v=m(bt,h,p),x=_(et,u,d),R=_(et+bt,h,p);i=(y-x)/2,s=(v-R)/2,r=-(y+x)/2,o=-(v+R)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}var Qs=class extends Ee{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data,{labels:{pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((c,u)=>{let d=t.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:d.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(u),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:s,pointStyle:i,borderRadius:o&&(a||d.borderRadius),index:u}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=c=>+i[c];if(Q(i[t])){let{key:c="value"}=this._parsing;r=u=>+Ue(i[u],c)}let o,a;for(o=t,a=t+e;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return ne(this.options.rotation-90)}_getCircumference(){return ne(this.options.circumference)}_getRotationExtents(){let t=ut,e=-ut;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){let e=this.chart,{chartArea:i}=e,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),c=Math.min(ig(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:_,offsetY:y}=pT(d,h,c),v=(i.width-o)/p,x=(i.height-o)/m,R=Math.max(Math.min(v,x)/2,0),O=_l(this.options.radius,R),M=Math.max(O*c,0),N=(O-M)/this._getVisibleDatasetWeightTotal();this.offsetX=_*O,this.offsetY=y*O,s.total=this.calculateTotal(),this.outerRadius=O-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){let i=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/ut)}updateElements(t,e,i,s){let r=s==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,p=r&&u.animateScale,m=p?0:this.innerRadius,_=p?0:this.outerRadius,{sharedOptions:y,includeOptions:v}=this._getSharedOptions(e,s),x=this._getRotation(),R;for(R=0;R<e;++R)x+=this._circumference(R,r);for(R=e;R<e+i;++R){let O=this._circumference(R,r),M=t[R],N={x:h+this.offsetX,y:d+this.offsetY,startAngle:x,endAngle:x+O,circumference:O,outerRadius:_,innerRadius:m};v&&(N.options=y||this.resolveDataElementOptions(R,M.active?"active":s)),x+=O,this.updateElement(M,R,N,s)}}calculateTotal(){let t=this._cachedMeta,e=t.data,i=0,s;for(s=0;s<e.length;s++){let r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?ut*(Math.abs(t)/e):0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Ai(e._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0,i=this.chart,s,r,o,a,c;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)c=a.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(e=Math.max(e,c.borderWidth||0,c.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){let r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(W(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}},ou=class extends Ee{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let e=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=e,o=this.chart._animationsDisabled,{start:a,count:c}=xl(e,s,o);this._drawStart=a,this._drawCount=c,Pl(e)&&(a=0,c=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},t),this.updateElements(s,a,c,t)}updateElements(t,e,i,s){let r=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(e,s),p=o.axis,m=a.axis,{spanGaps:_,segment:y}=this.options,v=Hn(_)?_:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||r||s==="none",R=e+i,O=t.length,M=e>0&&this.getParsed(e-1);for(let N=0;N<O;++N){let D=t[N],I=x?D:{};if(N<e||N>=R){I.skip=!0;continue}let w=this.getParsed(N),T=G(w[m]),A=I[p]=o.getPixelForValue(w[p],N),S=I[m]=r||T?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,w,c):w[m],N);I.skip=isNaN(A)||isNaN(S)||T,I.stop=N>0&&Math.abs(w[p]-M[p])>v,y&&(I.parsed=w,I.raw=u.data[N]),d&&(I.options=h||this.resolveDataElementOptions(N,D.active?"active":s)),x||this.updateElement(D,N,I,s),M=w}}getMaxOverflow(){let t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;let r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},Wo=class extends Ee{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{let c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Ai(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,e,i,s){return Ll.bind(this)(t,e,i,s)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{let r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,s){let r=s==="reset",o=this.chart,c=o.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,d=u.yCenter,p=u.getIndexAngle(0)-.5*et,m=p,_,y=360/this.countVisibleElements();for(_=0;_<e;++_)m+=this._computeAngle(_,s,y);for(_=e;_<e+i;_++){let v=t[_],x=m,R=m+this._computeAngle(_,s,y),O=o.getDataVisibility(_)?u.getDistanceFromCenterForValue(this.getParsed(_).r):0;m=R,r&&(c.animateScale&&(O=0),c.animateRotate&&(x=R=p));let M={x:h,y:d,innerRadius:0,outerRadius:O,startAngle:x,endAngle:R,options:this.resolveDataElementOptions(_,v.active?"active":s)};this.updateElement(v,_,M,s)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?ne(this.resolveDataElementOptions(t,e).angle||i):0}},au=class extends Qs{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},cu=class extends Ee{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return Ll.bind(this)(t,e,i,s)}update(t){let e=this._cachedMeta,i=e.dataset,s=e.data||[],r=e.iScale.getLabels();if(i.points=s,t!=="resize"){let o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);let a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){let r=this._cachedMeta.rScale,o=s==="reset";for(let a=e;a<e+i;a++){let c=t[a],u=this.resolveDataElementOptions(a,c.active?"active":s),h=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:h.x,p=o?r.yCenter:h.y,m={x:d,y:p,angle:h.angle,skip:isNaN(d)||isNaN(p),options:u};this.updateElement(c,a,m,s)}}},lu=class extends Ee{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),c=r.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+c+")"}}update(t){let e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled,{start:r,count:o}=xl(e,i,s);if(this._drawStart=r,this._drawCount=o,Pl(e)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:a,_dataset:c}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!c._decimated,a.points=i;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:u},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){let r=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(e,s),d=this.getSharedOptions(h),p=this.includeOptions(s,d),m=o.axis,_=a.axis,{spanGaps:y,segment:v}=this.options,x=Hn(y)?y:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||r||s==="none",O=e>0&&this.getParsed(e-1);for(let M=e;M<e+i;++M){let N=t[M],D=this.getParsed(M),I=R?N:{},w=G(D[_]),T=I[m]=o.getPixelForValue(D[m],M),A=I[_]=r||w?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,D,c):D[_],M);I.skip=isNaN(T)||isNaN(A)||w,I.stop=M>0&&Math.abs(D[m]-O[m])>x,v&&(I.parsed=D,I.raw=u.data[M]),p&&(I.options=d||this.resolveDataElementOptions(M,N.active?"active":s)),R||this.updateElement(N,M,I,s),O=D}this.updateSharedOptions(d,s,h)}getMaxOverflow(){let t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let c=e.length-1;c>=0;--c)a=Math.max(a,e[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}let i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;let r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,r,o)/2}},gT=Object.freeze({__proto__:null,BarController:su,BubbleController:ru,DoughnutController:Qs,LineController:ou,PieController:au,PolarAreaController:Wo,RadarController:cu,ScatterController:lu});function Kn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var uu=class n{static override(t){Object.assign(n.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Kn()}parse(){return Kn()}format(){return Kn()}add(){return Kn()}diff(){return Kn()}startOf(){return Kn()}endOf(){return Kn()}},mT={_date:uu};function _T(n,t,e,i){let{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){let u=a._reversePixels?lg:ye;if(i){if(s._sharedOptions){let h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){let p=u(r,t,e-d),m=u(r,t,e+d);return{lo:p.lo,hi:m.hi}}}}else{let h=u(r,t,e);if(c){let{vScale:d}=s._cachedMeta,{_parsed:p}=n,m=p.slice(0,h.lo+1).reverse().findIndex(y=>!G(y[d.axis]));h.lo-=Math.max(0,m);let _=p.slice(h.hi).findIndex(y=>!G(y[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:r.length-1}}function er(n,t,e,i,s){let r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,c=r.length;a<c;++a){let{index:u,data:h}=r[a],{lo:d,hi:p}=_T(r[a],t,o,s);for(let m=d;m<=p;++m){let _=h[m];_.skip||i(_,u,m)}}}function yT(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){let r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Yl(n,t,e,i,s){let r=[];return!s&&!n.isPointInArea(t)||er(n,e,t,function(a,c,u){!s&&!be(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:c,index:u})},!0),r}function bT(n,t,e,i){let s=[];function r(o,a,c){let{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=vl(o,{x:t.x,y:t.y});Si(d,u,h)&&s.push({element:o,datasetIndex:a,index:c})}return er(n,e,t,r),s}function wT(n,t,e,i,s,r){let o=[],a=yT(e),c=Number.POSITIVE_INFINITY;function u(h,d,p){let m=h.inRange(t.x,t.y,s);if(i&&!m)return;let _=h.getCenterPoint(s);if(!(!!r||n.isPointInArea(_))&&!m)return;let v=a(t,_);v<c?(o=[{element:h,datasetIndex:d,index:p}],c=v):v===c&&o.push({element:h,datasetIndex:d,index:p})}return er(n,e,t,u),o}function Ql(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?bT(n,t,e,s):wT(n,t,e,i,s,r)}function Ug(n,t,e,i,s){let r=[],o=e==="x"?"inXRange":"inYRange",a=!1;return er(n,e,t,(c,u,h)=>{c[o]&&c[o](t[e],s)&&(r.push({element:c,datasetIndex:u,index:h}),a=a||c.inRange(t.x,t.y,s))}),i&&!a?[]:r}var IT={evaluateInteractionItems:er,modes:{index(n,t,e,i){let s=Tn(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Yl(n,s,r,i,o):Ql(n,s,r,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{let h=a[0].index,d=u.data[h];d&&!d.skip&&c.push({element:d,datasetIndex:u.index,index:h})}),c):[]},dataset(n,t,e,i){let s=Tn(t,n),r=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?Yl(n,s,r,i,o):Ql(n,s,r,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,u=n.getDatasetMeta(c).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:c,index:h})}return a},point(n,t,e,i){let s=Tn(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Yl(n,s,r,i,o)},nearest(n,t,e,i){let s=Tn(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Ql(n,s,r,e.intersect,i,o)},x(n,t,e,i){let s=Tn(t,n);return Ug(n,s,"x",e.intersect,i)},y(n,t,e,i){let s=Tn(t,n);return Ug(n,s,"y",e.intersect,i)}}},Dm=["left","top","right","bottom"];function Ws(n,t){return n.filter(e=>e.pos===t)}function zg(n,t){return n.filter(e=>Dm.indexOf(e.pos)===-1&&e.box.axis===t)}function $s(n,t){return n.sort((e,i)=>{let s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function vT(n){let t=[],e,i,s,r,o,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function TT(n){let t={};for(let e of n){let{stack:i,pos:s,stackWeight:r}=e;if(!i||!Dm.includes(s))continue;let o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function ET(n,t){let e=TT(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t,r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];let{fullSize:c}=a.box,u=e[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:c&&t.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:c&&t.availableHeight)}return e}function ST(n){let t=vT(n),e=$s(t.filter(u=>u.box.fullSize),!0),i=$s(Ws(t,"left"),!0),s=$s(Ws(t,"right")),r=$s(Ws(t,"top"),!0),o=$s(Ws(t,"bottom")),a=zg(t,"x"),c=zg(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(c).concat(o).concat(a),chartArea:Ws(t,"chartArea"),vertical:i.concat(s).concat(c),horizontal:r.concat(o).concat(a)}}function qg(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Om(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function AT(n,t,e,i){let{pos:s,box:r}=e,o=n.maxPadding;if(!Q(s)){e.size&&(n[s]-=e.size);let d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?r.height:r.width),e.size=d.size/d.count,n[s]+=e.size}r.getPadding&&Om(o,r.getPadding());let a=Math.max(0,t.outerWidth-qg(o,n,"left","right")),c=Math.max(0,t.outerHeight-qg(o,n,"top","bottom")),u=a!==n.w,h=c!==n.h;return n.w=a,n.h=c,e.horizontal?{same:u,other:h}:{same:h,other:u}}function xT(n){let t=n.maxPadding;function e(i){let s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function PT(n,t){let e=t.maxPadding;function i(s){let r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function Ks(n,t,e,i){let s=[],r,o,a,c,u,h;for(r=0,o=n.length,u=0;r<o;++r){a=n[r],c=a.box,c.update(a.width||t.w,a.height||t.h,PT(a.horizontal,t));let{same:d,other:p}=AT(t,e,a,i);u|=d&&s.length,h=h||p,c.fullSize||s.push(a)}return u&&Ks(s,t,e,i)||h}function Mo(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function jg(n,t,e,i){let s=e.padding,{x:r,y:o}=t;for(let a of n){let c=a.box,u=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){let d=t.w*h,p=u.size||c.height;Ti(u.start)&&(o=u.start),c.fullSize?Mo(c,s.left,o,e.outerWidth-s.right-s.left,p):Mo(c,t.left+u.placed,o,d,p),u.start=o,u.placed+=d,o=c.bottom}else{let d=t.h*h,p=u.size||c.width;Ti(u.start)&&(r=u.start),c.fullSize?Mo(c,r,s.top,p,e.outerHeight-s.bottom-s.top):Mo(c,r,t.top+u.placed,p,d),u.start=r,u.placed+=d,r=c.right}}t.x=r,t.y=o}var zt={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;let s=Lt(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),a=ST(n.boxes),c=a.vertical,u=a.horizontal;nt(n.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});let h=c.reduce((y,v)=>v.box.options&&v.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},s);Om(p,Lt(i));let m=Object.assign({maxPadding:p,w:r,h:o,x:s.left,y:s.top},s),_=ET(c.concat(u),d);Ks(a.fullSize,m,d,_),Ks(c,m,d,_),Ks(u,m,d,_)&&Ks(c,m,d,_),xT(m),jg(a.leftAndTop,m,d,_),m.x+=m.w,m.y+=m.h,jg(a.rightAndBottom,m,d,_),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},nt(a.chartArea,y=>{let v=y.box;Object.assign(v,n.chartArea),v.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}},$o=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}},hu=class extends $o{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},zo="$chartjs",RT={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wg=n=>n===null||n==="";function CT(n,t){let e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[zo]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Wg(s)){let r=Bl(n,"width");r!==void 0&&(n.width=r)}if(Wg(i))if(n.style.height==="")n.height=n.width/(t||2);else{let r=Bl(n,"height");r!==void 0&&(n.height=r)}return n}var Nm=Ag?{passive:!0}:!1;function kT(n,t,e){n&&n.addEventListener(t,e,Nm)}function DT(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Nm)}function OT(n,t){let e=RT[n.type]||n.type,{x:i,y:s}=Tn(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Ho(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function NT(n,t,e){let i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Ho(a.addedNodes,i),o=o&&!Ho(a.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function MT(n,t,e){let i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Ho(a.removedNodes,i),o=o&&!Ho(a.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}var Js=new Map,$g=0;function Mm(){let n=window.devicePixelRatio;n!==$g&&($g=n,Js.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function VT(n,t){Js.size||window.addEventListener("resize",Mm),Js.set(n,t)}function LT(n){Js.delete(n),Js.size||window.removeEventListener("resize",Mm)}function FT(n,t,e){let i=n.canvas,s=i&&Oo(i);if(!s)return;let r=Al((a,c)=>{let u=s.clientWidth;e(a,c),u<s.clientWidth&&e()},window),o=new ResizeObserver(a=>{let c=a[0],u=c.contentRect.width,h=c.contentRect.height;u===0&&h===0||r(u,h)});return o.observe(s),VT(n,r),o}function Jl(n,t,e){e&&e.disconnect(),t==="resize"&&LT(n)}function BT(n,t,e){let i=n.canvas,s=Al(r=>{n.ctx!==null&&e(OT(r,n))},n);return kT(i,t,s),s}var du=class extends $o{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(CT(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[zo])return!1;let i=e[zo].initial;["height","width"].forEach(r=>{let o=i[r];G(o)?e.removeAttribute(r):e.setAttribute(r,o)});let s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[zo],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let s=t.$proxies||(t.$proxies={}),o={attach:NT,detach:MT,resize:FT}[e]||BT;s[e]=o(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Jl,detach:Jl,resize:Jl}[e]||DT)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return Sg(t,e,i,s)}isAttached(t){let e=t&&Oo(t);return!!(e&&e.isConnected)}};function UT(n){return!Do()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?hu:du}var ue=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Hn(this.x)&&Hn(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}};function zT(n,t){let e=n.options.ticks,i=qT(n),s=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?WT(t):[],o=r.length,a=r[0],c=r[o-1],u=[];if(o>s)return $T(t,u,r,o/s),u;let h=jT(r,t,s);if(o>0){let d,p,m=o>1?Math.round((c-a)/(o-1)):null;for(Vo(t,u,h,G(m)?0:a-m,a),d=0,p=o-1;d<p;d++)Vo(t,u,h,r[d],r[d+1]);return Vo(t,u,h,c,G(m)?t.length:c+m),u}return Vo(t,u,h),u}function qT(n){let t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function jT(n,t,e){let i=HT(n),s=t.length/e;if(!i)return Math.max(s,1);let r=og(i);for(let o=0,a=r.length-1;o<a;o++){let c=r[o];if(c>s)return c}return Math.max(s,1)}function WT(n){let t=[],e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function $T(n,t,e,i){let s=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}function Vo(n,t,e,i,s){let r=W(i,0),o=Math.min(W(s,n.length),n.length),a=0,c,u,h;for(e=Math.ceil(e),s&&(c=s-i,e=c/Math.floor(c/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(u=Math.max(r,0);u<o;u++)u===h&&(t.push(n[u]),a++,h=Math.round(r+a*e))}function HT(n){let t=n.length,e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}var GT=n=>n==="left"?"right":n==="right"?"left":n,Hg=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Gg=(n,t)=>Math.min(t||n,n);function Kg(n,t){let e=[],i=n.length/t,s=n.length,r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function KT(n,t,e){let i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(s),u;if(!(e&&(i===1?u=Math.max(c-r,o-c):t===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(s-1))/2,c+=s<t?u:-u,c<r-a||c>o+a)))return c}function YT(n,t){nt(n,e=>{let i=e.gc,s=i.length/2,r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function Hs(n){return n.drawTicks?n.tickLength:0}function Yg(n,t){if(!n.display)return 0;let e=Et(n.font,t),i=Lt(n.padding);return(lt(n.text)?n.text.length:1)*e.lineHeight+i.height}function QT(n,t){return ze(n,{scale:t,type:"scale"})}function JT(n,t,e){return ze(n,{tick:e,index:t,type:"tick"})}function XT(n,t,e){let i=xo(n);return(e&&t!=="right"||!e&&t==="right")&&(i=GT(i)),i}function ZT(n,t,e,i){let{top:s,left:r,bottom:o,right:a,chart:c}=n,{chartArea:u,scales:h}=c,d=0,p,m,_,y=o-s,v=a-r;if(n.isHorizontal()){if(m=Vt(i,r,a),Q(e)){let x=Object.keys(e)[0],R=e[x];_=h[x].getPixelForValue(R)+y-t}else e==="center"?_=(u.bottom+u.top)/2+y-t:_=Hg(n,e,t);p=a-r}else{if(Q(e)){let x=Object.keys(e)[0],R=e[x];m=h[x].getPixelForValue(R)-v+t}else e==="center"?m=(u.left+u.right)/2-v+t:m=Hg(n,e,t);_=Vt(i,o,s),d=e==="left"?-bt:bt}return{titleX:m,titleY:_,maxWidth:p,rotation:d}}var Qn=class n extends ue{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=Gt(t,Number.POSITIVE_INFINITY),e=Gt(e,Number.NEGATIVE_INFINITY),i=Gt(i,Number.POSITIVE_INFINITY),s=Gt(s,Number.NEGATIVE_INFINITY),{min:Gt(t,i),max:Gt(e,s),minDefined:gt(t),maxDefined:gt(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,u=a.length;c<u;++c)o=a[c].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:Gt(e,Gt(i,e)),max:Gt(i,Gt(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){at(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bg(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?Kg(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=zT(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){at(this.options.afterUpdate,[this])}beforeSetDimensions(){at(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){at(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),at(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){at(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=at(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){at(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){at(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,i=Gg(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation,o=s,a,c,u;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}let h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,m=Rt(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(t.offset?.5:1)),c=this.maxHeight-Hs(t.grid)-e.padding-Yg(t.title,this.chart.options.font),u=Math.sqrt(d*d+p*p),o=So(Math.min(Math.asin(Rt((h.highest.height+6)/a,-1,1)),Math.asin(Rt(c/u,-1,1))-Math.asin(Rt(p/u,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){at(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){at(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=Yg(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=Hs(r)+c):(t.height=this.maxHeight,t.width=Hs(r)+c),i.display&&this.ticks.length){let{first:u,last:h,widest:d,highest:p}=this._getLabelSizes(),m=i.padding*2,_=ne(this.labelRotation),y=Math.cos(_),v=Math.sin(_);if(a){let x=i.mirror?0:v*d.width+y*p.height;t.height=Math.min(this.maxHeight,t.height+x+m)}else{let x=i.mirror?0:y*d.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+x+m)}this._calculatePadding(u,h,v,y)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){let{ticks:{align:r,padding:o},position:a}=this.options,c=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),p=0,m=0;c?u?(p=s*t.width,m=i*e.height):(p=i*t.height,m=s*e.width):r==="start"?m=e.width:r==="end"?p=t.width:r!=="inner"&&(p=t.width/2,m=e.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=e.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=e.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){at(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)G(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=Kg(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let{ctx:s,_longestTextCache:r}=this,o=[],a=[],c=Math.floor(e/Gg(e,i)),u=0,h=0,d,p,m,_,y,v,x,R,O,M,N;for(d=0;d<e;d+=c){if(_=t[d].label,y=this._resolveTickFontOptions(d),s.font=v=y.string,x=r[v]=r[v]||{data:{},gc:[]},R=y.lineHeight,O=M=0,!G(_)&&!lt(_))O=Fs(s,x.data,x.gc,O,_),M=R;else if(lt(_))for(p=0,m=_.length;p<m;++p)N=_[p],!G(N)&&!lt(N)&&(O=Fs(s,x.data,x.gc,O,N),M+=R);o.push(O),a.push(M),u=Math.max(O,u),h=Math.max(M,h)}YT(r,e);let D=o.indexOf(u),I=a.indexOf(h),w=T=>({width:o[T]||0,height:a[T]||0});return{first:w(0),last:w(e-1),widest:w(D),highest:w(I),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return cg(this._alignToPixels?wn(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=JT(this.getContext(),t,i))}return this.$context||(this.$context=QT(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=ne(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*i>a*s?a/i:c/s:c*s<a*i?c/i:a/s}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,c=r.offset,u=this.isHorizontal(),d=this.ticks.length+(c?1:0),p=Hs(r),m=[],_=a.setContext(this.getContext()),y=_.display?_.width:0,v=y/2,x=function(ct){return wn(i,ct,y)},R,O,M,N,D,I,w,T,A,S,P,E;if(o==="top")R=x(this.bottom),I=this.bottom-p,T=R-v,S=x(t.top)+v,E=t.bottom;else if(o==="bottom")R=x(this.top),S=t.top,E=x(t.bottom)-v,I=R+v,T=this.top+p;else if(o==="left")R=x(this.right),D=this.right-p,w=R-v,A=x(t.left)+v,P=t.right;else if(o==="right")R=x(this.left),A=t.left,P=x(t.right)-v,D=R+v,w=this.left+p;else if(e==="x"){if(o==="center")R=x((t.top+t.bottom)/2+.5);else if(Q(o)){let ct=Object.keys(o)[0],pt=o[ct];R=x(this.chart.scales[ct].getPixelForValue(pt))}S=t.top,E=t.bottom,I=R+v,T=I+p}else if(e==="y"){if(o==="center")R=x((t.left+t.right)/2);else if(Q(o)){let ct=Object.keys(o)[0],pt=o[ct];R=x(this.chart.scales[ct].getPixelForValue(pt))}D=R-v,w=D-p,A=t.left,P=t.right}let rt=W(s.ticks.maxTicksLimit,d),Y=Math.max(1,Math.ceil(d/rt));for(O=0;O<d;O+=Y){let ct=this.getContext(O),pt=r.setContext(ct),Bt=a.setContext(ct),wt=pt.lineWidth,an=pt.color,Ln=Bt.dash||[],Me=Bt.dashOffset,cn=pt.tickWidth,te=pt.tickColor,Ve=pt.tickBorderDash||[],ce=pt.tickBorderDashOffset;M=KT(this,O,c),M!==void 0&&(N=wn(i,M,wt),u?D=w=A=P=N:I=T=S=E=N,m.push({tx1:D,ty1:I,tx2:w,ty2:T,x1:A,y1:S,x2:P,y2:E,width:wt,color:an,borderDash:Ln,borderDashOffset:Me,tickWidth:cn,tickColor:te,tickBorderDash:Ve,tickBorderDashOffset:ce}))}return this._ticksLength=d,this._borderValue=R,m}_computeLabelItems(t){let e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:u,padding:h,mirror:d}=r,p=Hs(i.grid),m=p+h,_=d?-h:m,y=-ne(this.labelRotation),v=[],x,R,O,M,N,D,I,w,T,A,S,P,E="middle";if(s==="top")D=this.bottom-_,I=this._getXAxisLabelAlignment();else if(s==="bottom")D=this.top+_,I=this._getXAxisLabelAlignment();else if(s==="left"){let Y=this._getYAxisLabelAlignment(p);I=Y.textAlign,N=Y.x}else if(s==="right"){let Y=this._getYAxisLabelAlignment(p);I=Y.textAlign,N=Y.x}else if(e==="x"){if(s==="center")D=(t.top+t.bottom)/2+m;else if(Q(s)){let Y=Object.keys(s)[0],ct=s[Y];D=this.chart.scales[Y].getPixelForValue(ct)+m}I=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")N=(t.left+t.right)/2-m;else if(Q(s)){let Y=Object.keys(s)[0],ct=s[Y];N=this.chart.scales[Y].getPixelForValue(ct)}I=this._getYAxisLabelAlignment(p).textAlign}e==="y"&&(c==="start"?E="top":c==="end"&&(E="bottom"));let rt=this._getLabelSizes();for(x=0,R=a.length;x<R;++x){O=a[x],M=O.label;let Y=r.setContext(this.getContext(x));w=this.getPixelForTick(x)+r.labelOffset,T=this._resolveTickFontOptions(x),A=T.lineHeight,S=lt(M)?M.length:1;let ct=S/2,pt=Y.color,Bt=Y.textStrokeColor,wt=Y.textStrokeWidth,an=I;o?(N=w,I==="inner"&&(x===R-1?an=this.options.reverse?"left":"right":x===0?an=this.options.reverse?"right":"left":an="center"),s==="top"?u==="near"||y!==0?P=-S*A+A/2:u==="center"?P=-rt.highest.height/2-ct*A+A:P=-rt.highest.height+A/2:u==="near"||y!==0?P=A/2:u==="center"?P=rt.highest.height/2-ct*A:P=rt.highest.height-S*A,d&&(P*=-1),y!==0&&!Y.showLabelBackdrop&&(N+=A/2*Math.sin(y))):(D=w,P=(1-S)*A/2);let Ln;if(Y.showLabelBackdrop){let Me=Lt(Y.backdropPadding),cn=rt.heights[x],te=rt.widths[x],Ve=P-Me.top,ce=0-Me.left;switch(E){case"middle":Ve-=cn/2;break;case"bottom":Ve-=cn;break}switch(I){case"center":ce-=te/2;break;case"right":ce-=te;break;case"inner":x===R-1?ce-=te:x>0&&(ce-=te/2);break}Ln={left:ce,top:Ve,width:te+Me.width,height:cn+Me.height,color:Y.backdropColor}}v.push({label:M,font:T,textOffset:P,options:{rotation:y,color:pt,strokeColor:Bt,strokeWidth:wt,textAlign:an,textBaseline:E,translation:[N,D],backdrop:Ln}})}return v}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-ne(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,c=o.widest.width,u,h;return e==="left"?s?(h=this.right+r,i==="near"?u="left":i==="center"?(u="center",h+=c/2):(u="right",h+=c)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=c/2):(u="left",h=this.left)):e==="right"?s?(h=this.left+r,i==="near"?u="right":i==="center"?(u="center",h-=c/2):(u="left",h-=c)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=c/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,o,a=(c,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){let c=s[r];e.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;let a=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue,u,h,d,p;this.isHorizontal()?(u=wn(t,this.left,o)-o/2,h=wn(t,this.right,a)+a/2,d=p=c):(d=wn(t,this.top,o)-o/2,p=wn(t,this.bottom,a)+a/2,u=h=c),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(u,d),e.lineTo(h,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let i=this.ctx,s=this._computeLabelArea();s&&zs(i,s);let r=this.getLabelItems(t);for(let o of r){let a=o.options,c=o.font,u=o.label,h=o.textOffset;In(i,u,0,h,c,a)}s&&qs(i)}drawTitle(){let{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;let r=Et(i.font),o=Lt(i.padding),a=i.align,c=r.lineHeight/2;e==="bottom"||e==="center"||Q(e)?(c+=o.bottom,lt(i.text)&&(c+=r.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:u,titleY:h,maxWidth:d,rotation:p}=ZT(this,c,e,a);In(t,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:p,textAlign:XT(a,e,s),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=W(t.grid&&t.grid.z,-1),s=W(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[],r,o;for(r=0,o=e.length;r<o;++r){let a=e[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return Et(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Ci=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),i;nE(e)&&(i=this.register(e));let s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,tE(t,o,i),this.override&&dt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in dt[s]&&(delete dt[s][i],this.override&&delete bn[i])}};function tE(n,t,e){let i=wi(Object.create(null),[e?dt.get(e):{},dt.get(t),n.defaults]);dt.set(t,i),n.defaultRoutes&&eE(t,n.defaultRoutes),n.descriptors&&dt.describe(t,n.descriptors)}function eE(n,t){Object.keys(t).forEach(e=>{let i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),c=o.join(".");dt.route(r,s,c,a)})}function nE(n){return"id"in n&&"defaults"in n}var fu=class{constructor(){this.controllers=new Ci(Ee,"datasets",!0),this.elements=new Ci(ue,"elements"),this.plugins=new Ci(Object,"plugins"),this.scales=new Ci(Qn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{let r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):nt(s,o=>{let a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){let s=Eo(t);at(i["before"+s],[],i),e[t](i),at(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}},Te=new fu,pu=class{constructor(){this._init=void 0}notify(t,e,i,s){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;let r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,i,s){s=s||{};for(let r of t){let o=r.plugin,a=o[i],c=[e,s,r.options];if(at(a,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){G(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,s=W(i.options&&i.options.plugins,{}),r=iE(i);return s===!1&&!e?[]:rE(t,r,s,e)}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}};function iE(n){let t={},e=[],i=Object.keys(Te.plugins.items);for(let r=0;r<i.length;r++)e.push(Te.getPlugin(i[r]));let s=n.plugins||[];for(let r=0;r<s.length;r++){let o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function sE(n,t){return!t&&n===!1?null:n===!0?{}:n}function rE(n,{plugins:t,localIds:e},i,s){let r=[],o=n.getContext();for(let a of t){let c=a.id,u=sE(i[c],s);u!==null&&r.push({plugin:a,options:oE(n.config,{plugin:a,local:e[c]},u,o)})}return r}function oE(n,{plugin:t,local:e},i,s){let r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gu(n,t){let e=dt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function aE(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function cE(n,t){return n===t?"_index_":"_value_"}function Qg(n){if(n==="x"||n==="y"||n==="r")return n}function lE(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function mu(n,...t){if(Qg(n))return n;for(let e of t){let i=e.axis||lE(e.position)||n.length>1&&Qg(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Jg(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function uE(n,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Jg(n,"x",e[0])||Jg(n,"y",e[0])}return{}}function hE(n,t){let e=bn[n.type]||{scales:{}},i=t.scales||{},s=gu(n.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!Q(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=mu(o,a,uE(o,n),dt.scales[a.type]),u=cE(c,s),h=e.scales||{};r[o]=vi(Object.create(null),[{axis:c},a,h[c],h[u]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||gu(a,t),h=(bn[a]||{}).scales||{};Object.keys(h).forEach(d=>{let p=aE(d,c),m=o[p+"AxisID"]||p;r[m]=r[m]||Object.create(null),vi(r[m],[{axis:p},i[m],h[d]])})}),Object.keys(r).forEach(o=>{let a=r[o];vi(a,[dt.scales[a.type],dt.scale])}),r}function Vm(n){let t=n.options||(n.options={});t.plugins=W(t.plugins,{}),t.scales=hE(n,t)}function Lm(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function dE(n){return n=n||{},n.data=Lm(n.data),Vm(n),n}var Xg=new Map,Fm=new Set;function Lo(n,t){let e=Xg.get(n);return e||(e=t(),Xg.set(n,e),Fm.add(e)),e}var Gs=(n,t,e)=>{let i=Ue(t,e);i!==void 0&&n.add(i)},_u=class{constructor(t){this._config=dE(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Lm(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Vm(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Lo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Lo(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Lo(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return Lo(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){let{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;let c=new Set;e.forEach(h=>{t&&(c.add(t),h.forEach(d=>Gs(c,t,d))),h.forEach(d=>Gs(c,s,d)),h.forEach(d=>Gs(c,bn[r]||{},d)),h.forEach(d=>Gs(c,dt,d)),h.forEach(d=>Gs(c,Po,d))});let u=Array.from(c);return u.length===0&&u.push(Object.create(null)),Fm.has(e)&&o.set(e,u),u}chartOptionScopes(){let{options:t,type:e}=this;return[t,bn[e]||{},dt.datasets[e]||{},{type:e},dt,Po]}resolveNamedOptions(t,e,i,s=[""]){let r={$shared:!0},{resolver:o,subPrefixes:a}=Zg(this._resolverCache,t,s),c=o;if(pE(o,e)){r.$shared=!1,i=Fe(i)?i():i;let u=this.createResolver(t,i,a);c=$n(o,i,u)}for(let u of e)r[u]=c[u];return r}createResolver(t,e,i=[""],s){let{resolver:r}=Zg(this._resolverCache,t,i);return Q(e)?$n(r,e,void 0,s):r}};function Zg(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));let s=e.join(),r=i.get(s);return r||(r={resolver:ko(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}var fE=n=>Q(n)&&Object.getOwnPropertyNames(n).some(t=>Fe(n[t]));function pE(n,t){let{isScriptable:e,isIndexable:i}=Nl(n);for(let s of t){let r=e(s),o=i(s),a=(o||r)&&n[s];if(r&&(Fe(a)||fE(a))||o&&lt(a))return!0}return!1}var gE="4.5.1",mE=["top","bottom","left","right","chartArea"];function tm(n,t){return n==="top"||n==="bottom"||mE.indexOf(n)===-1&&t==="x"}function em(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function nm(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),at(e&&e.onComplete,[n],t)}function _E(n){let t=n.chart,e=t.options.animation;at(e&&e.onProgress,[n],t)}function Bm(n){return Do()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var qo={},im=n=>{let t=Bm(n);return Object.values(qo).filter(e=>e.canvas===t).pop()};function yE(n,t,e){let i=Object.keys(n);for(let s of i){let r=+s;if(r>=t){let o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}function bE(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var We=class{static defaults=dt;static instances=qo;static overrides=bn;static registry=Te;static version=gE;static getChart=im;static register(...t){Te.add(...t),sm()}static unregister(...t){Te.remove(...t),sm()}constructor(t,e){let i=this.config=new _u(e),s=Bm(t),r=im(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");let o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||UT(s)),this.platform.updateConfig(i);let a=this.platform.acquireContext(s,o.aspectRatio),c=a&&a.canvas,u=c&&c.height,h=c&&c.width;if(this.id=ng(),this.ctx=a,this.canvas=c,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new pu,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=fg(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],qo[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}qe.listen(this,"complete",nm),qe.listen(this,"progress",_E),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return G(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Te}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Fl(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return kl(this.canvas,this.ctx),this}stop(){return qe.stop(this),this}resize(t,e){qe.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Fl(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),at(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let e=this.options.scales||{};nt(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{}),r=[];e&&(r=r.concat(Object.keys(e).map(o=>{let a=e[o],c=mu(o,a),u=c==="r",h=c==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),nt(r,o=>{let a=o.options,c=a.id,u=mu(c,a),h=W(a.type,o.dtype);(a.position===void 0||tm(a.position,u)!==tm(o.dposition))&&(a.position=o.dposition),s[c]=!0;let d=null;if(c in i&&i[c].type===h)d=i[c];else{let p=Te.getScale(h);d=new p({id:c,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,t)}),nt(s,(o,a)=>{o||delete i[a]}),nt(i,o=>{zt.configure(this,o,o.options),zt.addBox(this,o)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(em("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],e=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){let r=e[i],o=this.getDatasetMeta(i),a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||gu(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{let c=Te.getController(a),{datasetElementType:u,dataElementType:h}=dt.datasets[a];Object.assign(c,{dataElementType:Te.getElement(h),datasetElementType:u&&Te.getElement(u)}),o.controller=new c(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){nt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){let{controller:d}=this.getDatasetMeta(u),p=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||nt(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(em("z","_idx"));let{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){nt(this.scales,t=>{zt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!yl(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:r}of e){let o=i==="_removeElements"?-r:r;yE(t,s,o)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!yl(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;zt.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],nt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Fe(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qe.has(this)?this.attached&&!qe.running(this)&&qe.start(this):(this.draw(),nm({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e=this._sortedMetasets,i=[],s,r;for(s=0,r=e.length;s<r;++s){let o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=Wl(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&zs(e,s),t.controller.draw(),s&&qs(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return be(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){let r=IT.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=ze(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){let i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Ti(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),qe.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),kl(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete qo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};nt(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,e=this.platform,i=(c,u)=>{e.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(e.removeEventListener(this,c,u),delete t[c])},r=(c,u)=>{this.canvas&&this.resize(c,u)},o,a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){nt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},nt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let s=i?"set":"remove",r,o,a,c;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,c=t.length;a<c;++a){o=t[a];let u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{let a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Bs(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){let s=this.options.hover,r=(c,u)=>c.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(e,t),a=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){let{_active:s=[],options:r}=this,o=e,a=this._getActiveElements(t,s,i,o),c=rg(t),u=bE(t,this._lastEvent,i,c);i&&(this._lastEvent=null,at(r.onHover,[t,a,this],this),c&&at(r.onClick,[t,a,this],this));let h=!Bs(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=u,h}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;let r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}};function sm(){return nt(We.instances,n=>n._plugins.invalidate())}function wE(n,t,e){let{startAngle:i,x:s,y:r,outerRadius:o,innerRadius:a,options:c}=t,{borderWidth:u,borderJoinStyle:h}=c,d=Math.min(u/o,Mt(i-e));if(n.beginPath(),n.arc(s,r,o-u/2,i+d/2,e-d/2),a>0){let p=Math.min(u/a,Mt(i-e));n.arc(s,r,a+u/2,e-p/2,i+p/2,!0)}else{let p=Math.min(u/2,o*Mt(i-e));if(h==="round")n.arc(s,r,p,e-et/2,i+et/2,!0);else if(h==="bevel"){let m=2*p*p,_=-m*Math.cos(e+et/2)+s,y=-m*Math.sin(e+et/2)+r,v=m*Math.cos(i+et/2)+s,x=m*Math.sin(i+et/2)+r;n.lineTo(_,y),n.lineTo(v,x)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function IE(n,t,e){let{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:c}=t,u=s/a;n.beginPath(),n.arc(r,o,a,i-u,e+u),c>s?(u=s/c,n.arc(r,o,c,e+u,i-u,!0)):n.arc(r,o,s,e+bt,i-bt),n.closePath(),n.clip()}function vE(n){return Co(n,["outerStart","outerEnd","innerStart","innerEnd"])}function TE(n,t,e,i){let s=vE(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),a=c=>{let u=(e-Math.min(r,c))*i/2;return Rt(c,0,Math.min(r,u))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Rt(s.innerStart,0,o),innerEnd:Rt(s.innerEnd,0,o)}}function Ri(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Go(n,t,e,i,s,r){let{x:o,y:a,startAngle:c,pixelMargin:u,innerRadius:h}=t,d=Math.max(t.outerRadius+i+e-u,0),p=h>0?h+i+e+u:0,m=0,_=s-c;if(i){let Y=h>0?h-i:0,ct=d>0?d-i:0,pt=(Y+ct)/2,Bt=pt!==0?_*pt/(pt+i):_;m=(_-Bt)/2}let y=Math.max(.001,_*d-e/et)/d,v=(_-y)/2,x=c+v+m,R=s-v-m,{outerStart:O,outerEnd:M,innerStart:N,innerEnd:D}=TE(t,p,d,R-x),I=d-O,w=d-M,T=x+O/I,A=R-M/w,S=p+N,P=p+D,E=x+N/S,rt=R-D/P;if(n.beginPath(),r){let Y=(T+A)/2;if(n.arc(o,a,d,T,Y),n.arc(o,a,d,Y,A),M>0){let wt=Ri(w,A,o,a);n.arc(wt.x,wt.y,M,A,R+bt)}let ct=Ri(P,R,o,a);if(n.lineTo(ct.x,ct.y),D>0){let wt=Ri(P,rt,o,a);n.arc(wt.x,wt.y,D,R+bt,rt+Math.PI)}let pt=(R-D/p+(x+N/p))/2;if(n.arc(o,a,p,R-D/p,pt,!0),n.arc(o,a,p,pt,x+N/p,!0),N>0){let wt=Ri(S,E,o,a);n.arc(wt.x,wt.y,N,E+Math.PI,x-bt)}let Bt=Ri(I,x,o,a);if(n.lineTo(Bt.x,Bt.y),O>0){let wt=Ri(I,T,o,a);n.arc(wt.x,wt.y,O,x-bt,T)}}else{n.moveTo(o,a);let Y=Math.cos(T)*d+o,ct=Math.sin(T)*d+a;n.lineTo(Y,ct);let pt=Math.cos(A)*d+o,Bt=Math.sin(A)*d+a;n.lineTo(pt,Bt)}n.closePath()}function EE(n,t,e,i,s){let{fullCircles:r,startAngle:o,circumference:a}=t,c=t.endAngle;if(r){Go(n,t,e,i,c,s);for(let u=0;u<r;++u)n.fill();isNaN(a)||(c=o+(a%ut||ut))}return Go(n,t,e,i,c,s),n.fill(),c}function SE(n,t,e,i,s){let{fullCircles:r,startAngle:o,circumference:a,options:c}=t,{borderWidth:u,borderJoinStyle:h,borderDash:d,borderDashOffset:p,borderRadius:m}=c,_=c.borderAlign==="inner";if(!u)return;n.setLineDash(d||[]),n.lineDashOffset=p,_?(n.lineWidth=u*2,n.lineJoin=h||"round"):(n.lineWidth=u,n.lineJoin=h||"bevel");let y=t.endAngle;if(r){Go(n,t,e,i,y,s);for(let v=0;v<r;++v)n.stroke();isNaN(a)||(y=o+(a%ut||ut))}_&&IE(n,t,y),c.selfJoin&&y-o>=et&&m===0&&h!=="miter"&&wE(n,t,y),r||(Go(n,t,e,i,y,s),n.stroke())}var yu=class extends ue{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let s=this.getProps(["x","y"],i),{angle:r,distance:o}=vl(s,{x:t,y:e}),{startAngle:a,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,m=W(d,c-a),_=Si(r,a,c)&&a!==c,y=m>=ut||_,v=Ie(o,u+p,h+p);return y&&v}getCenterPoint(t){let{x:e,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,h=(s+r)/2,d=(o+a+u+c)/2;return{x:e+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,s=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>ut?Math.floor(i/ut):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*s,Math.sin(a)*s);let c=1-Math.sin(Math.min(et,i||0)),u=s*c;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,EE(t,this,u,r,o),SE(t,this,u,r,o),t.restore()}};function Um(n,t,e=t){n.lineCap=W(e.borderCapStyle,t.borderCapStyle),n.setLineDash(W(e.borderDash,t.borderDash)),n.lineDashOffset=W(e.borderDashOffset,t.borderDashOffset),n.lineJoin=W(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=W(e.borderWidth,t.borderWidth),n.strokeStyle=W(e.borderColor,t.borderColor)}function AE(n,t,e){n.lineTo(e.x,e.y)}function xE(n){return n.stepped?_g:n.tension||n.cubicInterpolationMode==="monotone"?yg:AE}function zm(n,t,e={}){let i=n.length,{start:s=0,end:r=i-1}=e,{start:o,end:a}=t,c=Math.max(s,o),u=Math.min(r,a),h=s<o&&r<o||s>a&&r>a;return{count:i,start:c,loop:t.loop,ilen:u<c&&!h?i+u-c:u-c}}function PE(n,t,e,i){let{points:s,options:r}=t,{count:o,start:a,loop:c,ilen:u}=zm(s,e,i),h=xE(r),{move:d=!0,reverse:p}=i||{},m,_,y;for(m=0;m<=u;++m)_=s[(a+(p?u-m:m))%o],!_.skip&&(d?(n.moveTo(_.x,_.y),d=!1):h(n,y,_,p,r.stepped),y=_);return c&&(_=s[(a+(p?u:0))%o],h(n,y,_,p,r.stepped)),!!c}function RE(n,t,e,i){let s=t.points,{count:r,start:o,ilen:a}=zm(s,e,i),{move:c=!0,reverse:u}=i||{},h=0,d=0,p,m,_,y,v,x,R=M=>(o+(u?a-M:M))%r,O=()=>{y!==v&&(n.lineTo(h,v),n.lineTo(h,y),n.lineTo(h,x))};for(c&&(m=s[R(0)],n.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=s[R(p)],m.skip)continue;let M=m.x,N=m.y,D=M|0;D===_?(N<y?y=N:N>v&&(v=N),h=(d*h+M)/++d):(O(),n.lineTo(M,N),_=D,d=0,y=v=N),x=N}O()}function bu(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?RE:PE}function CE(n){return n.stepped?xg:n.tension||n.cubicInterpolationMode==="monotone"?Pg:_n}function kE(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),Um(n,t.options),n.stroke(s)}function DE(n,t,e,i){let{segments:s,options:r}=t,o=bu(t);for(let a of s)Um(n,r,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}var OE=typeof Path2D=="function";function NE(n,t,e,i){OE&&!t.options.segment?kE(n,t,e,i):DE(n,t,e,i)}var ki=class extends ue{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;Eg(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Cg(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){let i=this.options,s=t[e],r=this.points,o=jl(this,{property:e,start:s,end:s});if(!o.length)return;let a=[],c=CE(i),u,h;for(u=0,h=o.length;u<h;++u){let{start:d,end:p}=o[u],m=r[d],_=r[p];if(m===_){a.push(m);continue}let y=Math.abs((s-m[e])/(_[e]-m[e])),v=c(m,_,y,i.stepped);v[e]=t[e],a.push(v)}return a.length===1?a[0]:a}pathSegment(t,e,i){return bu(this)(t,this,e,i)}path(t,e,i){let s=this.segments,r=bu(this),o=this._loop;e=e||0,i=i||this.points.length-e;for(let a of s)o&=r(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){let r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),NE(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};function rm(n,t,e,i){let s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}var wu=class extends ue{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){let s=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return rm(this,t,"x",e)}inYRange(t,e){return rm(this,t,"y",e)}getCenterPoint(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);let i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){let i=this.options;this.skip||i.radius<.1||!be(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Ro(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}};function qm(n,t){let{x:e,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],t),a,c,u,h,d;return n.horizontal?(d=o/2,a=Math.min(e,s),c=Math.max(e,s),u=i-d,h=i+d):(d=r/2,a=e-d,c=e+d,u=Math.min(i,s),h=Math.max(i,s)),{left:a,top:u,right:c,bottom:h}}function En(n,t,e,i){return n?0:Rt(t,e,i)}function ME(n,t,e){let i=n.options.borderWidth,s=n.borderSkipped,r=Ol(i);return{t:En(s.top,r.top,0,e),r:En(s.right,r.right,0,t),b:En(s.bottom,r.bottom,0,e),l:En(s.left,r.left,0,t)}}function VE(n,t,e){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=vn(s),o=Math.min(t,e),a=n.borderSkipped,c=i||Q(s);return{topLeft:En(!c||a.top||a.left,r.topLeft,0,o),topRight:En(!c||a.top||a.right,r.topRight,0,o),bottomLeft:En(!c||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:En(!c||a.bottom||a.right,r.bottomRight,0,o)}}function LE(n){let t=qm(n),e=t.right-t.left,i=t.bottom-t.top,s=ME(n,e/2,i/2),r=VE(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Xl(n,t,e,i){let s=t===null,r=e===null,a=n&&!(s&&r)&&qm(n,i);return a&&(s||Ie(t,a.left,a.right))&&(r||Ie(e,a.top,a.bottom))}function FE(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function BE(n,t){n.rect(t.x,t.y,t.w,t.h)}function Zl(n,t,e={}){let i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}var Iu=class extends ue{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=LE(this),a=FE(o.radius)?xi:BE;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Zl(o,e,r)),t.clip(),a(t,Zl(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Zl(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return Xl(this,t,e,i)}inXRange(t,e){return Xl(this,t,null,e)}inYRange(t,e){return Xl(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},UE=Object.freeze({__proto__:null,ArcElement:yu,BarElement:Iu,LineElement:ki,PointElement:wu}),vu=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],om=vu.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function jm(n){return vu[n%vu.length]}function Wm(n){return om[n%om.length]}function zE(n,t){return n.borderColor=jm(t),n.backgroundColor=Wm(t),++t}function qE(n,t){return n.backgroundColor=n.data.map(()=>jm(t++)),t}function jE(n,t){return n.backgroundColor=n.data.map(()=>Wm(t++)),t}function WE(n){let t=0;return(e,i)=>{let s=n.getDatasetMeta(i).controller;s instanceof Qs?t=qE(e,t):s instanceof Wo?t=jE(e,t):s&&(t=zE(e,t))}}function am(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function $E(n){return n&&(n.borderColor||n.backgroundColor)}function HE(){return dt.borderColor!=="rgba(0,0,0,0.1)"||dt.backgroundColor!=="rgba(0,0,0,0.1)"}var GE={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;let{data:{datasets:i},options:s}=n.config,{elements:r}=s,o=am(i)||$E(s)||r&&am(r)||HE();if(!e.forceOverride&&o)return;let a=WE(n);i.forEach(a)}};function KE(n,t,e,i,s){let r=s.samples||i;if(r>=e)return n.slice(t,t+e);let o=[],a=(e-2)/(r-2),c=0,u=t+e-1,h=t,d,p,m,_,y;for(o[c++]=n[h],d=0;d<r-2;d++){let v=0,x=0,R,O=Math.floor((d+1)*a)+1+t,M=Math.min(Math.floor((d+2)*a)+1,e)+t,N=M-O;for(R=O;R<M;R++)v+=n[R].x,x+=n[R].y;v/=N,x/=N;let D=Math.floor(d*a)+1+t,I=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:w,y:T}=n[h];for(m=_=-1,R=D;R<I;R++)_=.5*Math.abs((w-v)*(n[R].y-T)-(w-n[R].x)*(x-T)),_>m&&(m=_,p=n[R],y=R);o[c++]=p,h=y}return o[c++]=n[u],o}function YE(n,t,e,i){let s=0,r=0,o,a,c,u,h,d,p,m,_,y,v=[],x=t+e-1,R=n[t].x,M=n[x].x-R;for(o=t;o<t+e;++o){a=n[o],c=(a.x-R)/M*i,u=a.y;let N=c|0;if(N===h)u<_?(_=u,d=o):u>y&&(y=u,p=o),s=(r*s+a.x)/++r;else{let D=o-1;if(!G(d)&&!G(p)){let I=Math.min(d,p),w=Math.max(d,p);I!==m&&I!==D&&v.push({...n[I],x:s}),w!==m&&w!==D&&v.push({...n[w],x:s})}o>0&&D!==m&&v.push(n[D]),v.push(a),h=N,r=0,_=y=u,d=p=m=o}}return v}function $m(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function cm(n){n.data.datasets.forEach(t=>{$m(t)})}function QE(n,t){let e=t.length,i=0,s,{iScale:r}=n,{min:o,max:a,minDefined:c,maxDefined:u}=r.getUserBounds();return c&&(i=Rt(ye(t,r.axis,o).lo,0,e-1)),u?s=Rt(ye(t,r.axis,a).hi+1,i,e)-i:s=e-i,{start:i,count:s}}var JE={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){cm(n);return}let i=n.width;n.data.datasets.forEach((s,r)=>{let{_data:o,indexAxis:a}=s,c=n.getDatasetMeta(r),u=o||s.data;if(Pi([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let h=n.scales[c.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:d,count:p}=QE(c,u),m=e.threshold||4*i;if(p<=m){$m(s);return}G(o)&&(s._data=u,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let _;switch(e.algorithm){case"lttb":_=KE(u,d,p,i,e);break;case"min-max":_=YE(u,d,p,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=_})},destroy(n){cm(n)}};function XE(n,t,e){let i=n.segments,s=n.points,r=t.points,o=[];for(let a of i){let{start:c,end:u}=a;u=Jo(c,u,s);let h=Tu(e,s[c],s[u],a.loop);if(!t.segments){o.push({source:a,target:h,start:s[c],end:s[u]});continue}let d=jl(t,h);for(let p of d){let m=Tu(e,r[p.start],r[p.end],p.loop),_=ql(a,s,m);for(let y of _)o.push({source:y,target:p,start:{[e]:lm(h,m,"start",Math.max)},end:{[e]:lm(h,m,"end",Math.min)}})}}return o}function Tu(n,t,e,i){if(i)return;let s=t[n],r=e[n];return n==="angle"&&(s=Mt(s),r=Mt(r)),{property:n,start:s,end:r}}function ZE(n,t){let{x:e=null,y:i=null}=n||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=Jo(o,a,s);let c=s[o],u=s[a];i!==null?(r.push({x:c.x,y:i}),r.push({x:u.x,y:i})):e!==null&&(r.push({x:e,y:c.y}),r.push({x:e,y:u.y}))}),r}function Jo(n,t,e){for(;t>n;t--){let i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function lm(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function Hm(n,t){let e=[],i=!1;return lt(n)?(i=!0,e=n):e=ZE(n,t),e.length?new ki({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function um(n){return n&&n.fill!==!1}function t0(n,t,e){let s=n[t].fill,r=[t],o;if(!e)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!gt(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function e0(n,t,e){let i=r0(n);if(Q(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return gt(s)&&Math.floor(s)===s?n0(i[0],t,s,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function n0(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function i0(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Q(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function s0(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Q(n)?i=n.value:i=t.getBaseValue(),i}function r0(n){let t=n.options,e=t.fill,i=W(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function o0(n){let{scale:t,index:e,line:i}=n,s=[],r=i.segments,o=i.points,a=a0(t,e);a.push(Hm({x:null,y:t.bottom},i));for(let c=0;c<r.length;c++){let u=r[c];for(let h=u.start;h<=u.end;h++)c0(s,o[h],a)}return new ki({points:s,options:{}})}function a0(n,t){let e=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){let r=i[s];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function c0(n,t,e){let i=[];for(let s=0;s<e.length;s++){let r=e[s],{first:o,last:a,point:c}=l0(r,t,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function l0(n,t,e){let i=n.interpolate(t,e);if(!i)return{};let s=i[e],r=n.segments,o=n.points,a=!1,c=!1;for(let u=0;u<r.length;u++){let h=r[u],d=o[h.start][e],p=o[h.end][e];if(Ie(s,d,p)){a=s===d,c=s===p;break}}return{first:a,last:c,point:i}}var Ko=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:s,y:r,radius:o}=this;return e=e||{start:0,end:ut},t.arc(s,r,o,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:s}=this,r=t.angle;return{x:e+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}};function u0(n){let{chart:t,fill:e,line:i}=n;if(gt(e))return h0(t,e);if(e==="stack")return o0(n);if(e==="shape")return!0;let s=d0(n);return s instanceof Ko?s:Hm(s,i)}function h0(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function d0(n){return(n.scale||{}).getPointPositionForValue?p0(n):f0(n)}function f0(n){let{scale:t={},fill:e}=n,i=i0(e,t);if(gt(i)){let s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function p0(n){let{scale:t,fill:e}=n,i=t.options,s=t.getLabels().length,r=i.reverse?t.max:t.min,o=s0(e,t,r),a=[];if(i.grid.circular){let c=t.getPointPositionForValue(0,r);return new Ko({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)a.push(t.getPointPositionForValue(c,o));return a}function tu(n,t,e){let i=u0(t),{chart:s,index:r,line:o,scale:a,axis:c}=t,u=o.options,h=u.fill,d=u.backgroundColor,{above:p=d,below:m=d}=h||{},_=s.getDatasetMeta(r),y=Wl(s,_);i&&o.points.length&&(zs(n,e),g0(n,{line:o,target:i,above:p,below:m,area:e,scale:a,axis:c,clip:y}),qs(n))}function g0(n,t){let{line:e,target:i,above:s,below:r,area:o,scale:a,clip:c}=t,u=e._loop?"angle":t.axis;n.save();let h=r;r!==s&&(u==="x"?(hm(n,i,o.top),eu(n,{line:e,target:i,color:s,scale:a,property:u,clip:c}),n.restore(),n.save(),hm(n,i,o.bottom)):u==="y"&&(dm(n,i,o.left),eu(n,{line:e,target:i,color:r,scale:a,property:u,clip:c}),n.restore(),n.save(),dm(n,i,o.right),h=s)),eu(n,{line:e,target:i,color:h,scale:a,property:u,clip:c}),n.restore()}function hm(n,t,e){let{segments:i,points:s}=t,r=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:u}=a,h=s[c],d=s[Jo(c,u,s)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(h.x,e),n.lineTo(h.x,h.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function dm(n,t,e){let{segments:i,points:s}=t,r=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:u}=a,h=s[c],d=s[Jo(c,u,s)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(e,h.y),n.lineTo(h.x,h.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(e,d.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function eu(n,t){let{line:e,target:i,property:s,color:r,scale:o,clip:a}=t,c=XE(e,i,s);for(let{source:u,target:h,start:d,end:p}of c){let{style:{backgroundColor:m=r}={}}=u,_=i!==!0;n.save(),n.fillStyle=m,m0(n,o,a,_&&Tu(s,d,p)),n.beginPath();let y=!!e.pathSegment(n,u),v;if(_){y?n.closePath():fm(n,i,p,s);let x=!!i.pathSegment(n,h,{move:y,reverse:!0});v=y&&x,v||fm(n,i,d,s)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function m0(n,t,e,i){let s=t.chart.chartArea,{property:r,start:o,end:a}=i||{};if(r==="x"||r==="y"){let c,u,h,d;r==="x"?(c=o,u=s.top,h=a,d=s.bottom):(c=s.left,u=o,h=s.right,d=a),n.beginPath(),e&&(c=Math.max(c,e.left),h=Math.min(h,e.right),u=Math.max(u,e.top),d=Math.min(d,e.bottom)),n.rect(c,u,h-c,d-u),n.clip()}}function fm(n,t,e,i){let s=t.interpolate(e,i);s&&n.lineTo(s.x,s.y)}var _0={id:"filler",afterDatasetsUpdate(n,t,e){let i=(n.data.datasets||[]).length,s=[],r,o,a,c;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,c=null,a&&a.options&&a instanceof ki&&(c={visible:n.isDatasetVisible(o),index:o,fill:e0(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=c,s.push(c);for(o=0;o<i;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=t0(s,o,e.propagate))},beforeDraw(n,t,e){let i=e.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){let a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&tu(n.ctx,a,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){let r=i[s].$filler;um(r)&&tu(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){let i=t.meta.$filler;!um(i)||e.drawTime!=="beforeDatasetDraw"||tu(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},pm=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},y0=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,Yo=class extends ue{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=at(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let i=t.labels,s=Et(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=pm(i,r),u,h;e.font=s.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,r,a,c)+10):(h=this.maxHeight,u=this._fitCols(o,s,a,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){let{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],h=s+a,d=t;r.textAlign="left",r.textBaseline="middle";let p=-1,m=-h;return this.legendItems.forEach((_,y)=>{let v=i+e/2+r.measureText(_.text).width;(y===0||u[u.length-1]+v+2*a>o)&&(d+=h,u[u.length-(y>0?0:1)]=0,m+=h,p++),c[y]={left:0,top:m,row:p,width:v,height:s},u[u.length-1]+=v+a}),d}_fitCols(t,e,i,s){let{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-t,d=a,p=0,m=0,_=0,y=0;return this.legendItems.forEach((v,x)=>{let{itemWidth:R,itemHeight:O}=b0(i,e,r,v,s);x>0&&m+O+2*a>h&&(d+=p+a,u.push({width:p,height:m}),_+=p+a,y++,p=m=0),c[x]={left:_,top:m,col:y,width:R,height:O},p=Math.max(p,R),m+=O+a}),d+=p,u.push({width:p,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Gn(r,this.left,this.width);if(this.isHorizontal()){let a=0,c=Vt(i,this.left+s,this.right-this.lineWidths[a]);for(let u of e)a!==u.row&&(a=u.row,c=Vt(i,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+t+s,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+s}else{let a=0,c=Vt(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(let u of e)u.col!==a&&(a=u.col,c=Vt(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),u.top=c,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;zs(t,this),this._draw(),qs(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=dt.color,c=Gn(t.rtl,this.left,this.width),u=Et(o.font),{padding:h}=o,d=u.size,p=d/2,m;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;let{boxWidth:_,boxHeight:y,itemHeight:v}=pm(o,d),x=function(D,I,w){if(isNaN(_)||_<=0||isNaN(y)||y<0)return;s.save();let T=W(w.lineWidth,1);if(s.fillStyle=W(w.fillStyle,a),s.lineCap=W(w.lineCap,"butt"),s.lineDashOffset=W(w.lineDashOffset,0),s.lineJoin=W(w.lineJoin,"miter"),s.lineWidth=T,s.strokeStyle=W(w.strokeStyle,a),s.setLineDash(W(w.lineDash,[])),o.usePointStyle){let A={radius:y*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:T},S=c.xPlus(D,_/2),P=I+p;Dl(s,A,S,P,o.pointStyleWidth&&_)}else{let A=I+Math.max((d-y)/2,0),S=c.leftForLtr(D,_),P=vn(w.borderRadius);s.beginPath(),Object.values(P).some(E=>E!==0)?xi(s,{x:S,y:A,w:_,h:y,radius:P}):s.rect(S,A,_,y),s.fill(),T!==0&&s.stroke()}s.restore()},R=function(D,I,w){In(s,w.text,D,I+v/2,u,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},O=this.isHorizontal(),M=this._computeTitleHeight();O?m={x:Vt(r,this.left+h,this.right-i[0]),y:this.top+h+M,line:0}:m={x:this.left+h,y:Vt(r,this.top+M+h,this.bottom-e[0].height),line:0},Ul(this.ctx,t.textDirection);let N=v+h;this.legendItems.forEach((D,I)=>{s.strokeStyle=D.fontColor,s.fillStyle=D.fontColor;let w=s.measureText(D.text).width,T=c.textAlign(D.textAlign||(D.textAlign=o.textAlign)),A=_+p+w,S=m.x,P=m.y;c.setWidth(this.width),O?I>0&&S+A+h>this.right&&(P=m.y+=N,m.line++,S=m.x=Vt(r,this.left+h,this.right-i[m.line])):I>0&&P+N>this.bottom&&(S=m.x=S+e[m.line].width+h,m.line++,P=m.y=Vt(r,this.top+M+h,this.bottom-e[m.line].height));let E=c.x(S);if(x(E,P,D),S=pg(T,S+_+p,O?S+A:this.right,t.rtl),R(c.x(S),P,D),O)m.x+=A+h;else if(typeof D.text!="string"){let rt=u.lineHeight;m.y+=Gm(D,rt)+h}else m.y+=N}),zl(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,i=Et(e.font),s=Lt(e.padding);if(!e.display)return;let r=Gn(t.rtl,this.left,this.width),o=this.ctx,a=e.position,c=i.size/2,u=s.top+c,h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+u,d=Vt(t.align,d,this.right-p);else{let _=this.columnSizes.reduce((y,v)=>Math.max(y,v.height),0);h=u+Vt(t.align,this.top,this.bottom-_-t.labels.padding-this._computeTitleHeight())}let m=Vt(a,d,d+p);o.textAlign=r.textAlign(xo(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,In(o,e.text,m,h,i)}_computeTitleHeight(){let t=this.options.title,e=Et(t.font),i=Lt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(Ie(t,this.left,this.right)&&Ie(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Ie(t,s.left,s.left+s.width)&&Ie(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){let e=this.options;if(!v0(t.type,e))return;let i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let s=this._hoveredItem,r=y0(s,i);s&&!r&&at(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&at(e.onHover,[t,i,this],this)}else i&&at(e.onClick,[t,i,this],this)}};function b0(n,t,e,i,s){let r=w0(i,n,t,e),o=I0(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function w0(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(s).width}function I0(n,t,e){let i=n;return typeof t.text!="string"&&(i=Gm(t,e)),i}function Gm(n,t){let e=n.text?n.text.length:0;return t*e}function v0(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var T0={id:"legend",_element:Yo,start(n,t,e){let i=n.legend=new Yo({ctx:n.ctx,options:e,chart:n});zt.configure(n,i,e),zt.addBox(n,i)},stop(n){zt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let i=n.legend;zt.configure(n,i,e),i.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let u=c.controller.getStyle(e?0:void 0),h=Lt(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Xs=class extends ue{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let s=lt(i.text)?i.text.length:1;this._padding=Lt(i.padding);let r=s*Et(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:i,bottom:s,right:r,options:o}=this,a=o.align,c=0,u,h,d;return this.isHorizontal()?(h=Vt(a,i,r),d=e+t,u=r-i):(o.position==="left"?(h=i+t,d=Vt(a,s,e),c=et*-.5):(h=r-t,d=Vt(a,e,s),c=et*.5),u=s-e),{titleX:h,titleY:d,maxWidth:u,rotation:c}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=Et(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:u}=this._drawArgs(r);In(t,e.text,0,0,i,{color:e.color,maxWidth:c,rotation:u,textAlign:xo(e.align),textBaseline:"middle",translation:[o,a]})}};function E0(n,t){let e=new Xs({ctx:n.ctx,options:t,chart:n});zt.configure(n,e,t),zt.addBox(n,e),n.titleBlock=e}var S0={id:"title",_element:Xs,start(n,t,e){E0(n,e)},stop(n){let t=n.titleBlock;zt.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let i=n.titleBlock;zt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Fo=new WeakMap,A0={id:"subtitle",start(n,t,e){let i=new Xs({ctx:n.ctx,options:e,chart:n});zt.configure(n,i,e),zt.addBox(n,i),Fo.set(n,i)},stop(n){zt.removeBox(n,Fo.get(n)),Fo.delete(n)},beforeUpdate(n,t,e){let i=Fo.get(n);zt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ys={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,r=0;for(t=0,e=n.length;t<e;++t){let a=n[t].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),s+=c.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){let c=n[r].element;if(c&&c.hasValue()){let u=c.getCenterPoint(),h=vo(t,u);h<s&&(s=h,a=c)}}if(a){let c=a.tooltipPosition();e=c.x,i=c.y}return{x:e,y:i}}};function ve(n,t){return t&&(lt(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function je(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function x0(n,t){let{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function gm(n,t){let e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=t,c=Et(t.bodyFont),u=Et(t.titleFont),h=Et(t.footerFont),d=r.length,p=s.length,m=i.length,_=Lt(t.padding),y=_.height,v=0,x=i.reduce((M,N)=>M+N.before.length+N.lines.length+N.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,d&&(y+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),x){let M=t.displayColors?Math.max(a,c.lineHeight):c.lineHeight;y+=m*M+(x-m)*c.lineHeight+(x-1)*t.bodySpacing}p&&(y+=t.footerMarginTop+p*h.lineHeight+(p-1)*t.footerSpacing);let R=0,O=function(M){v=Math.max(v,e.measureText(M).width+R)};return e.save(),e.font=u.string,nt(n.title,O),e.font=c.string,nt(n.beforeBody.concat(n.afterBody),O),R=t.displayColors?o+2+t.boxPadding:0,nt(i,M=>{nt(M.before,O),nt(M.lines,O),nt(M.after,O)}),R=0,e.font=h.string,nt(n.footer,O),e.restore(),v+=_.width,{width:v,height:y}}function P0(n,t){let{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function R0(n,t,e,i){let{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+r+o>t.width||n==="right"&&s-r-o<0)return!0}function C0(n,t,e,i){let{x:s,width:r}=e,{width:o,chartArea:{left:a,right:c}}=n,u="center";return i==="center"?u=s<=(a+c)/2?"left":"right":s<=r/2?u="left":s>=o-r/2&&(u="right"),R0(u,n,t,e)&&(u="center"),u}function mm(n,t,e){let i=e.yAlign||t.yAlign||P0(n,e);return{xAlign:e.xAlign||t.xAlign||C0(n,t,e,i),yAlign:i}}function k0(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function D0(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function _m(n,t,e,i){let{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:c}=e,u=s+r,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=vn(o),_=k0(t,a),y=D0(t,c,u);return c==="center"?a==="left"?_+=u:a==="right"&&(_-=u):a==="left"?_-=Math.max(h,p)+s:a==="right"&&(_+=Math.max(d,m)+s),{x:Rt(_,0,i.width-t.width),y:Rt(y,0,i.height-t.height)}}function Bo(n,t,e){let i=Lt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function ym(n){return ve([],je(n))}function O0(n,t,e){return ze(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function bm(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var Km={beforeTitle:we,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:we,beforeBody:we,beforeLabel:we,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return G(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:we,afterBody:we,beforeFooter:we,footer:we,afterFooter:we};function Kt(n,t,e,i){let s=n[t].call(e,i);return typeof s>"u"?Km[t].call(e,i):s}var Qo=class extends ue{static positioners=Ys;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,r=new jo(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=O0(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){let{callbacks:i}=e,s=Kt(i,"beforeTitle",this,t),r=Kt(i,"title",this,t),o=Kt(i,"afterTitle",this,t),a=[];return a=ve(a,je(s)),a=ve(a,je(r)),a=ve(a,je(o)),a}getBeforeBody(t,e){return ym(Kt(e.callbacks,"beforeBody",this,t))}getBody(t,e){let{callbacks:i}=e,s=[];return nt(t,r=>{let o={before:[],lines:[],after:[]},a=bm(i,r);ve(o.before,je(Kt(a,"beforeLabel",this,r))),ve(o.lines,Kt(a,"label",this,r)),ve(o.after,je(Kt(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,e){return ym(Kt(e.callbacks,"afterBody",this,t))}getFooter(t,e){let{callbacks:i}=e,s=Kt(i,"beforeFooter",this,t),r=Kt(i,"footer",this,t),o=Kt(i,"afterFooter",this,t),a=[];return a=ve(a,je(s)),a=ve(a,je(r)),a=ve(a,je(o)),a}_createItems(t){let e=this._active,i=this.chart.data,s=[],r=[],o=[],a=[],c,u;for(c=0,u=e.length;c<u;++c)a.push(x0(this.chart,e[c]));return t.filter&&(a=a.filter((h,d,p)=>t.filter(h,d,p,i))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,i))),nt(a,h=>{let d=bm(t.callbacks,h);s.push(Kt(d,"labelColor",this,h)),r.push(Kt(d,"labelPointStyle",this,h)),o.push(Kt(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){let i=this.options.setContext(this.getContext()),s=this._active,r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{let a=Ys[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);let c=this._size=gm(this,i),u=Object.assign({},a,c),h=mm(this.chart,i,u),d=_m(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){let r=this.getCaretPosition(t,i,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){let{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:d}=vn(a),{x:p,y:m}=t,{width:_,height:y}=e,v,x,R,O,M,N;return r==="center"?(M=m+y/2,s==="left"?(v=p,x=v-o,O=M+o,N=M-o):(v=p+_,x=v+o,O=M-o,N=M+o),R=v):(s==="left"?x=p+Math.max(c,h)+o:s==="right"?x=p+_-Math.max(u,d)-o:x=this.caretX,r==="top"?(O=m,M=O-o,v=x-o,R=x+o):(O=m+y,M=O+o,v=x+o,R=x-o),N=O),{x1:v,x2:x,x3:R,y1:O,y2:M,y3:N}}drawTitle(t,e,i){let s=this.title,r=s.length,o,a,c;if(r){let u=Gn(i.rtl,this.x,this.width);for(t.x=Bo(this,i.titleAlign,i),e.textAlign=u.textAlign(i.titleAlign),e.textBaseline="middle",o=Et(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,c=0;c<r;++c)e.fillText(s[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,c+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,r){let o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=r,h=Et(r.bodyFont),d=Bo(this,"left",r),p=s.x(d),m=c<h.lineHeight?(h.lineHeight-c)/2:0,_=e.y+m;if(r.usePointStyle){let y={radius:Math.min(u,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=s.leftForLtr(p,u)+u/2,x=_+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Ro(t,y,v,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ro(t,y,v,x)}else{t.lineWidth=Q(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;let y=s.leftForLtr(p,u),v=s.leftForLtr(s.xPlus(p,1),u-2),x=vn(o.borderRadius);Object.values(x).some(R=>R!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,xi(t,{x:y,y:_,w:u,h:c,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),xi(t,{x:v,y:_+1,w:u-2,h:c-2,radius:x}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(y,_,u,c),t.strokeRect(y,_,u,c),t.fillStyle=o.backgroundColor,t.fillRect(v,_+1,u-2,c-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){let{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:u,boxPadding:h}=i,d=Et(i.bodyFont),p=d.lineHeight,m=0,_=Gn(i.rtl,this.x,this.width),y=function(w){e.fillText(w,_.x(t.x+m),t.y+p/2),t.y+=p+r},v=_.textAlign(o),x,R,O,M,N,D,I;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=Bo(this,v,i),e.fillStyle=i.bodyColor,nt(this.beforeBody,y),m=a&&v!=="right"?o==="center"?u/2+h:u+2+h:0,M=0,D=s.length;M<D;++M){for(x=s[M],R=this.labelTextColors[M],e.fillStyle=R,nt(x.before,y),O=x.lines,a&&O.length&&(this._drawColorBox(e,t,M,_,i),p=Math.max(d.lineHeight,c)),N=0,I=O.length;N<I;++N)y(O[N]),p=d.lineHeight;nt(x.after,y)}m=0,p=d.lineHeight,nt(this.afterBody,y),t.y-=r}drawFooter(t,e,i){let s=this.footer,r=s.length,o,a;if(r){let c=Gn(i.rtl,this.x,this.width);for(t.x=Bo(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=c.textAlign(i.footerAlign),e.textBaseline="middle",o=Et(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(s[a],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){let{xAlign:r,yAlign:o}=this,{x:a,y:c}=t,{width:u,height:h}=i,{topLeft:d,topRight:p,bottomLeft:m,bottomRight:_}=vn(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+d,c),o==="top"&&this.drawCaret(t,e,i,s),e.lineTo(a+u-p,c),e.quadraticCurveTo(a+u,c,a+u,c+p),o==="center"&&r==="right"&&this.drawCaret(t,e,i,s),e.lineTo(a+u,c+h-_),e.quadraticCurveTo(a+u,c+h,a+u-_,c+h),o==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(a+m,c+h),e.quadraticCurveTo(a,c+h,a,c+h-m),o==="center"&&r==="left"&&this.drawCaret(t,e,i,s),e.lineTo(a,c+d),e.quadraticCurveTo(a,c,a+d,c),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){let e=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){let o=Ys[t.position].call(this,this._active,this._eventPosition);if(!o)return;let a=this._size=gm(this,t),c=Object.assign({},o,this._size),u=mm(e,t,c),h=_m(t,c,u,e);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let e=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(e);let s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let o=Lt(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,e),Ul(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),zl(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){let i=this._active,s=t.map(({datasetIndex:a,index:c})=>{let u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[c],index:c}}),r=!Bs(i,s),o=this._positionChanged(s,e);(r||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,i),a=this._positionChanged(o,t),c=e||!Bs(o,r)||a;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,i,s){let r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);let o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,e){let{caretX:i,caretY:s,options:r}=this,o=Ys[r.position].call(this,t,e);return o!==!1&&(i!==o.x||s!==o.y)}},N0={id:"tooltip",_element:Qo,positioners:Ys,afterInit(n,t,e){e&&(n.tooltip=new Qo({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Km},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},M0=Object.freeze({__proto__:null,Colors:GE,Decimation:JE,Filler:_0,Legend:T0,SubTitle:A0,Title:S0,Tooltip:N0}),V0=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function L0(n,t,e,i){let s=n.indexOf(t);if(s===-1)return V0(n,t,e,i);let r=n.lastIndexOf(t);return s!==r?e:s}var F0=(n,t)=>n===null?null:Rt(Math.round(n),0,t);function wm(n){let t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var Eu=class extends Qn{static id="category";static defaults={ticks:{callback:wm}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let i=this.getLabels();for(let{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(G(t))return null;let i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:L0(i,t,W(e,t),this._addedLabels),F0(e,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,s=[],r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return wm.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}};function B0(n,t){let e=[],{bounds:s,step:r,min:o,max:a,precision:c,count:u,maxTicks:h,maxDigits:d,includeBounds:p}=n,m=r||1,_=h-1,{min:y,max:v}=t,x=!G(o),R=!G(a),O=!G(u),M=(v-y)/(d+1),N=bl((v-y)/_/m)*m,D,I,w,T;if(N<1e-14&&!x&&!R)return[{value:y},{value:v}];T=Math.ceil(v/N)-Math.floor(y/N),T>_&&(N=bl(T*N/_/m)*m),G(c)||(D=Math.pow(10,c),N=Math.ceil(N*D)/D),s==="ticks"?(I=Math.floor(y/N)*N,w=Math.ceil(v/N)*N):(I=y,w=v),x&&R&&r&&ag((a-o)/r,N/1e3)?(T=Math.round(Math.min((a-o)/N,h)),N=(a-o)/T,I=o,w=a):O?(I=x?o:I,w=R?a:w,T=u-1,N=(w-I)/T):(T=(w-I)/N,Ei(T,Math.round(T),N/1e3)?T=Math.round(T):T=Math.ceil(T));let A=Math.max(Il(N),Il(I));D=Math.pow(10,G(c)?A:c),I=Math.round(I*D)/D,w=Math.round(w*D)/D;let S=0;for(x&&(p&&I!==o?(e.push({value:o}),I<o&&S++,Ei(Math.round((I+S*N)*D)/D,o,Im(o,M,n))&&S++):I<o&&S++);S<T;++S){let P=Math.round((I+S*N)*D)/D;if(R&&P>a)break;e.push({value:P})}return R&&p&&w!==a?e.length&&Ei(e[e.length-1].value,a,Im(a,M,n))?e[e.length-1].value=a:e.push({value:a}):(!R||w===a)&&e.push({value:w}),e}function Im(n,t,{horizontal:e,minRotation:i}){let s=ne(i),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}var Di=class extends Qn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return G(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:s,max:r}=this,o=c=>s=e?s:c,a=c=>r=i?r:c;if(t){let c=le(s),u=le(r);c<0&&u<0?a(0):c>0&&u>0&&o(0)}if(s===r){let c=r===0?1:Math.abs(r*.05);a(r+c),t||o(s-c)}this.min=s,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit();i=Math.max(2,i);let s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=B0(s,r);return t.bounds==="ticks"&&wl(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Ai(t,this.chart.options.locale,this.options.ticks.format)}},Su=class extends Di{static id="linear";static defaults={ticks:{callback:Us.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=gt(t)?t:0,this.max=gt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=ne(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},Zs=n=>Math.floor(Be(n)),Yn=(n,t)=>Math.pow(10,Zs(n)+t);function vm(n){return n/Math.pow(10,Zs(n))===1}function Tm(n,t,e){let i=Math.pow(10,e),s=Math.floor(n/i);return Math.ceil(t/i)-s}function U0(n,t){let e=t-n,i=Zs(e);for(;Tm(n,t,i)>10;)i++;for(;Tm(n,t,i)<10;)i--;return Math.min(i,Zs(n))}function z0(n,{min:t,max:e}){t=Gt(n.min,t);let i=[],s=Zs(t),r=U0(t,e),o=r<0?Math.pow(10,Math.abs(r)):1,a=Math.pow(10,r),c=s>r?Math.pow(10,s):0,u=Math.round((t-c)*o)/o,h=Math.floor((t-c)/a/10)*a*10,d=Math.floor((u-h)/Math.pow(10,r)),p=Gt(n.min,Math.round((c+h+d*Math.pow(10,r))*o)/o);for(;p<e;)i.push({value:p,major:vm(p),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),p=Math.round((c+h+d*Math.pow(10,r))*o)/o;let m=Gt(n.max,p);return i.push({value:m,major:vm(m),significand:d}),i}var Au=class extends Qn{static id="logarithmic";static defaults={ticks:{callback:Us.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=Di.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return gt(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=gt(t)?Math.max(0,t):null,this.max=gt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!gt(this._userMin)&&(this.min=t===Yn(this.min,0)?Yn(this.min,-1):Yn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,s=this.max,r=a=>i=t?i:a,o=a=>s=e?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Yn(i,-1)),o(Yn(s,1)))),i<=0&&r(Yn(s,-1)),s<=0&&o(Yn(i,1)),this.min=i,this.max=s}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},i=z0(e,this);return t.bounds==="ticks"&&wl(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Ai(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=Be(t),this._valueRange=Be(this.max)-Be(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Be(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function xu(n){let t=n.ticks;if(t.display&&n.display){let e=Lt(t.backdropPadding);return W(t.font&&t.font.size,dt.font.size)+e.height}return 0}function q0(n,t,e){return e=lt(e)?e:[e],{w:mg(n,t.string,e),h:e.length*t.lineHeight}}function Em(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function j0(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?et/r:0;for(let c=0;c<r;c++){let u=o.setContext(n.getPointLabelContext(c));s[c]=u.padding;let h=n.getPointPosition(c,n.drawingArea+s[c],a),d=Et(u.font),p=q0(n.ctx,d,n._pointLabels[c]);i[c]=p;let m=Mt(n.getIndexAngle(c)+a),_=Math.round(So(m)),y=Em(_,h.x,p.w,0,180),v=Em(_,h.y,p.h,90,270);W0(e,t,m,y,v)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=G0(n,i,s)}function W0(n,t,e,i,s){let r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,c=0;i.start<t.l?(a=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(c=(t.t-s.start)/o,n.t=Math.min(n.t,t.t-c)):s.end>t.b&&(c=(s.end-t.b)/o,n.b=Math.max(n.b,t.b+c))}function $0(n,t,e){let i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=e,c=n.getPointPosition(t,i+s+o,r),u=Math.round(So(Mt(c.angle+bt))),h=Q0(c.y,a.h,u),d=K0(u),p=Y0(c.x,a.w,d);return{visible:!0,x:c.x,y:h,textAlign:d,left:p,top:h,right:p+a.w,bottom:h+a.h}}function H0(n,t){if(!t)return!0;let{left:e,top:i,right:s,bottom:r}=n;return!(be({x:e,y:i},t)||be({x:e,y:r},t)||be({x:s,y:i},t)||be({x:s,y:r},t))}function G0(n,t,e){let i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,c={extra:xu(r)/2,additionalAngle:o?et/s:0},u;for(let h=0;h<s;h++){c.padding=e[h],c.size=t[h];let d=$0(n,h,c);i.push(d),a==="auto"&&(d.visible=H0(d,u),d.visible&&(u=d))}return i}function K0(n){return n===0||n===180?"center":n<180?"left":"right"}function Y0(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function Q0(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function J0(n,t,e){let{left:i,top:s,right:r,bottom:o}=e,{backdropColor:a}=t;if(!G(a)){let c=vn(t.borderRadius),u=Lt(t.backdropPadding);n.fillStyle=a;let h=i-u.left,d=s-u.top,p=r-i+u.width,m=o-s+u.height;Object.values(c).some(_=>_!==0)?(n.beginPath(),xi(n,{x:h,y:d,w:p,h:m,radius:c}),n.fill()):n.fillRect(h,d,p,m)}}function X0(n,t){let{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){let r=n._pointLabelItems[s];if(!r.visible)continue;let o=i.setContext(n.getPointLabelContext(s));J0(e,o,r);let a=Et(o.font),{x:c,y:u,textAlign:h}=r;In(e,n._pointLabels[s],c,u+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Ym(n,t,e,i){let{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,ut);else{let r=n.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function Z0(n,t,e,i,s){let r=n.ctx,o=t.circular,{color:a,lineWidth:c}=t;!o&&!i||!a||!c||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=c,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),Ym(n,e,o,i),r.closePath(),r.stroke(),r.restore())}function tS(n,t,e){return ze(n,{label:e,index:t,type:"pointLabel"})}var Pu=class extends Di{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Us.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=Lt(xu(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=gt(t)&&!isNaN(t)?t:0,this.max=gt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xu(this.options))}generateTickLabels(t){Di.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{let s=at(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let t=this.options;t.display&&t.pointLabels.display?j0(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){let e=ut/(this._pointLabels.length||1),i=this.options.startAngle||0;return Mt(t*e+ne(i))}getDistanceFromCenterForValue(t){if(G(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(G(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return tS(this.getContext(),t,i)}}getPointPosition(t,e,i=0){let s=this.getIndexAngle(t)-bt+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),Ym(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:i,grid:s,border:r}=e,o=this._pointLabels.length,a,c,u;if(e.pointLabels.display&&X0(this,o),s.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(h.value);let p=this.getContext(d),m=s.setContext(p),_=r.setContext(p);Z0(this,m,c,o,_)}}),i.display){for(t.save(),a=o-1;a>=0;a--){let h=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:p}=h;!p||!d||(t.lineWidth=p,t.strokeStyle=d,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,c=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),u=this.getPointPosition(a,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;let s=this.getIndexAngle(0),r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!e.reverse)return;let u=i.setContext(this.getContext(c)),h=Et(u.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=u.backdropColor;let d=Lt(u.backdropPadding);t.fillRect(-o/2-d.left,-r-h.size/2-d.top,o+d.width,h.size+d.height)}In(t,a.label,0,-r,h,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),t.restore()}drawTitle(){}},Xo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yt=Object.keys(Xo);function Sm(n,t){return n-t}function Am(n,t){if(G(t))return null;let e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts,o=t;return typeof i=="function"&&(o=i(o)),gt(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(Hn(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function xm(n,t,e,i){let s=Yt.length;for(let r=Yt.indexOf(n);r<s-1;++r){let o=Xo[Yt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return Yt[r]}return Yt[s-1]}function eS(n,t,e,i,s){for(let r=Yt.length-1;r>=Yt.indexOf(e);r--){let o=Yt[r];if(Xo[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return Yt[e?Yt.indexOf(e):0]}function nS(n){for(let t=Yt.indexOf(n)+1,e=Yt.length;t<e;++t)if(Xo[Yt[t]].common)return Yt[t]}function Pm(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:i,hi:s}=Ao(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function iS(n,t,e,i){let s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value,a,c;for(a=r;a<=o;a=+s.add(a,1,i))c=e[a],c>=0&&(t[c].major=!0);return t}function Rm(n,t,e){let i=[],s={},r=t.length,o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!e?i:iS(n,i,s,e)}var tr=class extends Qn{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let i=t.time||(t.time={}),s=this._adapter=new mT._date(t.adapters.date);s.init(e),vi(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Am(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,i=t.time.unit||"day",{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!o||!a)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=gt(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=gt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){let t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let r=this.min,o=this.max,a=ug(s,r,o);return this._unit=e.unit||(i.autoSkip?xm(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):eS(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:nS(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),Rm(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);let o=t.length<3?.5:.25;e=Rt(e,0,o),i=Rt(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){let t=this._adapter,e=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||xm(r.minUnit,e,i,this._getLabelCapacity(e)),a=W(s.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,u=Hn(c)||c===!0,h={},d=e,p,m;if(u&&(d=+t.startOf(d,"isoWeek",c)),d=+t.startOf(d,u?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);let _=s.ticks.source==="data"&&this.getDataTimestamps();for(p=d,m=0;p<i;p=+t.add(p,a,o),m++)Pm(h,p,_);return(p===i||s.bounds==="ticks"||m===1)&&Pm(h,p,_),Object.keys(h).sort(Sm).map(y=>+y)}getLabelForValue(t){let e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){let s=this.options.time.displayFormats,r=this._unit,o=e||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,s){let r=this.options,o=r.ticks.callback;if(o)return at(o,[t,e,i],this);let a=r.time.displayFormats,c=this._unit,u=this._majorUnit,h=c&&a[c],d=u&&a[u],p=i[e],m=u&&d&&p&&p.major;return this._adapter.format(t,s||(m?d:h))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,i=this.ctx.measureText(t).width,s=ne(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){let e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,Rm(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],e,i;if(t.length)return t;let s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Am(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return El(t.sort(Sm))}};function Uo(n,t,e){let i=0,s=n.length-1,r,o,a,c;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=ye(n,"pos",t)),{pos:r,time:a}=n[i],{pos:o,time:c}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=ye(n,"time",t)),{time:r,pos:a}=n[i],{time:o,pos:c}=n[s]);let u=o-r;return u?a+(c-a)*(t-r)/u:a}var Ru=class extends tr{static id="timeseries";static defaults=tr.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Uo(e,this.min),this._tableRange=Uo(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:i}=this,s=[],r=[],o,a,c,u,h;for(o=0,a=t.length;o<a;++o)u=t[o],u>=e&&u<=i&&s.push(u);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],c=s[o-1],u=s[o],Math.round((h+c)/2)!==u&&r.push({time:u,pos:o/(a-1)});return r}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Uo(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Uo(this._table,i*this._tableRange+this._minPos,!0)}},sS=Object.freeze({__proto__:null,CategoryScale:Eu,LinearScale:Su,LogarithmicScale:Au,RadialLinearScale:Pu,TimeScale:tr,TimeSeriesScale:Ru}),Qm=[gT,UE,M0,sS];var Jm=()=>{};var t_=function(n){let t=[],e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},rS=function(n){let t=[],e=0,i=0;for(;e<n.length;){let s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){let r=n[e++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){let r=n[e++],o=n[e++],a=n[e++],c=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(c&1023))}else{let r=n[e++],o=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return t.join("")},e_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){let r=n[s],o=s+1<n.length,a=o?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0,h=r>>2,d=(r&3)<<4|a>>4,p=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(p=64)),i.push(e[h],e[d],e[p],e[m])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(t_(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):rS(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){let r=e[n.charAt(s++)],a=s<n.length?e[n.charAt(s)]:0;++s;let u=s<n.length?e[n.charAt(s)]:64;++s;let d=s<n.length?e[n.charAt(s)]:64;if(++s,r==null||a==null||u==null||d==null)throw new ku;let p=r<<2|a>>4;if(i.push(p),u!==64){let m=a<<4&240|u>>2;if(i.push(m),d!==64){let _=u<<6&192|d;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ku=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},oS=function(n){let t=t_(n);return e_.encodeByteArray(t,!0)},ir=function(n){return oS(n).replace(/\./g,"")},ta=function(n){try{return e_.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function n_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aS=()=>n_().__FIREBASE_DEFAULTS__,cS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&ta(n[1]);return t&&JSON.parse(t)},ea=()=>{try{return Jm()||aS()||cS()||lS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ou=n=>ea()?.emulatorHosts?.[n],i_=n=>{let t=Ou(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},Nu=()=>ea()?.config,Mu=n=>ea()?.[`_${n}`];var Zo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}};function Sn(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function na(n){return(await fetch(n,{credentials:"include"})).ok}function s_(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ir(JSON.stringify(e)),ir(JSON.stringify(o)),""].join(".")}var nr={};function uS(){let n={prod:[],emulator:[]};for(let t of Object.keys(nr))nr[t]?n.emulator.push(t):n.prod.push(t);return n}function hS(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}var Xm=!1;function ia(n,t){if(typeof window>"u"||typeof document>"u"||!Sn(window.location.host)||nr[n]===t||nr[n]||Xm)return;nr[n]=t;function e(p){return`__firebase__banner__${p}`}let i="__firebase__banner",r=uS().prod.length>0;function o(){let p=document.getElementById(i);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){let p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Xm=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){let p=hS(i),m=e("text"),_=document.getElementById(m)||document.createElement("span"),y=e("learnmore"),v=document.getElementById(y)||document.createElement("a"),x=e("preprendIcon"),R=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){let O=p.element;a(O),h(v,y);let M=u();c(R,x),O.append(R,_,v,M),document.body.appendChild(O)}r?(_.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function dS(){let n=ea()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function c_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l_(){let n=kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function u_(){return!dS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vu(){try{return typeof indexedDB=="object"}catch{return!1}}function h_(){return new Promise((n,t)=>{try{let e=!0,i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}var fS="FirebaseError",Xt=class n extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=fS,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$e.prototype.create)}},$e=class{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){let i=e[0]||{},s=`${this.service}/${t}`,r=this.errors[t],o=r?pS(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Xt(s,a,i)}};function pS(n,t){return n.replace(gS,(e,i)=>{let s=t[i];return s!=null?String(s):`<${i}?>`})}var gS=/\{\$([^}]+)}/g;function d_(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function he(n,t){if(n===t)return!0;let e=Object.keys(n),i=Object.keys(t);for(let s of e){if(!i.includes(s))return!1;let r=n[s],o=t[s];if(Zm(r)&&Zm(o)){if(!he(r,o))return!1}else if(r!==o)return!1}for(let s of i)if(!e.includes(s))return!1;return!0}function Zm(n){return n!==null&&typeof n=="object"}function Oi(n){let t=[];for(let[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ni(n){let t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[s,r]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function Mi(n){let t=n.indexOf("?");if(!t)return"";let e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function f_(n,t){let e=new Du(n,t);return e.subscribe.bind(e)}var Du=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");mS(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=Cu),s.error===void 0&&(s.error=Cu),s.complete===void 0&&(s.complete=Cu);let r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function mS(n,t){if(typeof n!="object"||n===null)return!1;for(let e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Cu(){}var lk=14400*1e3;function qt(n){return n&&n._delegate?n._delegate:n}var ie=class{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Jn="[DEFAULT]";var Lu=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let i=new Zo;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){let e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yS(t))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch{}for(let[e,i]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(e);try{let r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Jn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){let t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Jn){return this.instances.has(t)}getOptions(t=Jn){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(let[r,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(t,e){let i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);let r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let i=this.onInitCallbacks.get(e);if(i)for(let s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_S(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Jn){return this.component?this.component.multipleInstances?t:Jn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _S(n){return n===Jn?void 0:n}function yS(n){return n.instantiationMode==="EAGER"}var sa=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new Lu(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var bS=[],K;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(K||(K={}));var wS={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},IS=K.INFO,vS={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},TS=(n,t,...e)=>{if(t<n.logLevel)return;let i=new Date().toISOString(),s=vS[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},An=class{constructor(t){this.name=t,this._logLevel=IS,this._logHandler=TS,this._userLogHandler=null,bS.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in K))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...t),this._logHandler(this,K.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...t),this._logHandler(this,K.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,K.INFO,...t),this._logHandler(this,K.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,K.WARN,...t),this._logHandler(this,K.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...t),this._logHandler(this,K.ERROR,...t)}};var ES=(n,t)=>t.some(e=>n instanceof e),p_,g_;function SS(){return p_||(p_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AS(){return g_||(g_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var m_=new WeakMap,Bu=new WeakMap,__=new WeakMap,Fu=new WeakMap,zu=new WeakMap;function xS(n){let t=new Promise((e,i)=>{let s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{e(Se(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&m_.set(e,n)}).catch(()=>{}),zu.set(t,n),t}function PS(n){if(Bu.has(n))return;let t=new Promise((e,i)=>{let s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{e(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});Bu.set(n,t)}var Uu={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Bu.get(n);if(t==="objectStoreNames")return n.objectStoreNames||__.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Se(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function y_(n){Uu=n(Uu)}function RS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let i=n.call(ra(this),t,...e);return __.set(i,t.sort?t.sort():[t]),Se(i)}:AS().includes(n)?function(...t){return n.apply(ra(this),t),Se(m_.get(this))}:function(...t){return Se(n.apply(ra(this),t))}}function CS(n){return typeof n=="function"?RS(n):(n instanceof IDBTransaction&&PS(n),ES(n,SS())?new Proxy(n,Uu):n)}function Se(n){if(n instanceof IDBRequest)return xS(n);if(Fu.has(n))return Fu.get(n);let t=CS(n);return t!==n&&(Fu.set(n,t),zu.set(t,n)),t}var ra=n=>zu.get(n);function w_(n,t,{blocked:e,upgrade:i,blocking:s,terminated:r}={}){let o=indexedDB.open(n,t),a=Se(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Se(o.result),c.oldVersion,c.newVersion,Se(o.transaction),c)}),e&&o.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),a.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var kS=["get","getKey","getAll","getAllKeys","count"],DS=["put","add","delete","clear"],qu=new Map;function b_(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(qu.get(t))return qu.get(t);let e=t.replace(/FromIndex$/,""),i=t!==e,s=DS.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||kS.includes(e)))return;let r=async function(o,...a){let c=this.transaction(o,s?"readwrite":"readonly"),u=c.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[e](...a),s&&c.done]))[0]};return qu.set(t,r),r}y_(n=>({...n,get:(t,e,i)=>b_(t,e)||n.get(t,e,i),has:(t,e)=>!!b_(t,e)||n.has(t,e)}));var Wu=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(OS(e)){let i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}};function OS(n){return n.getComponent()?.type==="VERSION"}var $u="@firebase/app",I_="0.14.8";var He=new An("@firebase/app"),NS="@firebase/app-compat",MS="@firebase/analytics-compat",VS="@firebase/analytics",LS="@firebase/app-check-compat",FS="@firebase/app-check",BS="@firebase/auth",US="@firebase/auth-compat",zS="@firebase/database",qS="@firebase/data-connect",jS="@firebase/database-compat",WS="@firebase/functions",$S="@firebase/functions-compat",HS="@firebase/installations",GS="@firebase/installations-compat",KS="@firebase/messaging",YS="@firebase/messaging-compat",QS="@firebase/performance",JS="@firebase/performance-compat",XS="@firebase/remote-config",ZS="@firebase/remote-config-compat",tA="@firebase/storage",eA="@firebase/storage-compat",nA="@firebase/firestore",iA="@firebase/ai",sA="@firebase/firestore-compat",rA="firebase",oA="12.9.0";var Hu="[DEFAULT]",aA={[$u]:"fire-core",[NS]:"fire-core-compat",[VS]:"fire-analytics",[MS]:"fire-analytics-compat",[FS]:"fire-app-check",[LS]:"fire-app-check-compat",[BS]:"fire-auth",[US]:"fire-auth-compat",[zS]:"fire-rtdb",[qS]:"fire-data-connect",[jS]:"fire-rtdb-compat",[WS]:"fire-fn",[$S]:"fire-fn-compat",[HS]:"fire-iid",[GS]:"fire-iid-compat",[KS]:"fire-fcm",[YS]:"fire-fcm-compat",[QS]:"fire-perf",[JS]:"fire-perf-compat",[XS]:"fire-rc",[ZS]:"fire-rc-compat",[tA]:"fire-gcs",[eA]:"fire-gcs-compat",[nA]:"fire-fst",[sA]:"fire-fst-compat",[iA]:"fire-vertex","fire-js":"fire-js",[rA]:"fire-js-all"};var oa=new Map,cA=new Map,Gu=new Map;function v_(n,t){try{n.container.addComponent(t)}catch(e){He.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Pn(n){let t=n.name;if(Gu.has(t))return He.debug(`There were multiple attempts to register component ${t}.`),!1;Gu.set(t,n);for(let e of oa.values())v_(e,n);for(let e of cA.values())v_(e,n);return!0}function rr(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function se(n){return n==null?!1:n.settings!==void 0}var lA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xn=new $e("app","Firebase",lA);var Ku=class{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ie("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}};var Rn=oA;function Ju(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let i={name:Hu,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw xn.create("bad-app-name",{appName:String(s)});if(e||(e=Nu()),!e)throw xn.create("no-options");let r=oa.get(s);if(r){if(he(e,r.options)&&he(i,r.config))return r;throw xn.create("duplicate-app",{appName:s})}let o=new sa(s);for(let c of Gu.values())o.addComponent(c);let a=new Ku(e,i,o);return oa.set(s,a),a}function aa(n=Hu){let t=oa.get(n);if(!t&&n===Hu&&Nu())return Ju();if(!t)throw xn.create("no-app",{appName:n});return t}function de(n,t,e){let i=aA[n]??n;e&&(i+=`-${e}`);let s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){let o=[`Unable to register library "${i}" with version "${t}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),He.warn(o.join(" "));return}Pn(new ie(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var uA="firebase-heartbeat-database",hA=1,sr="firebase-heartbeat-store",ju=null;function A_(){return ju||(ju=w_(uA,hA,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(sr)}catch(e){console.warn(e)}}}}).catch(n=>{throw xn.create("idb-open",{originalErrorMessage:n.message})})),ju}async function dA(n){try{let e=(await A_()).transaction(sr),i=await e.objectStore(sr).get(x_(n));return await e.done,i}catch(t){if(t instanceof Xt)He.warn(t.message);else{let e=xn.create("idb-get",{originalErrorMessage:t?.message});He.warn(e.message)}}}async function T_(n,t){try{let i=(await A_()).transaction(sr,"readwrite");await i.objectStore(sr).put(t,x_(n)),await i.done}catch(e){if(e instanceof Xt)He.warn(e.message);else{let i=xn.create("idb-set",{originalErrorMessage:e?.message});He.warn(i.message)}}}function x_(n){return`${n.name}!${n.options.appId}`}var fA=1024,pA=30,Yu=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Qu(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=E_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>pA){let s=mA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){He.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=E_(),{heartbeatsToSend:e,unsentEntries:i}=gA(this._heartbeatsCache.heartbeats),s=ir(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return He.warn(t),""}}};function E_(){return new Date().toISOString().substring(0,10)}function gA(n,t=fA){let e=[],i=n.slice();for(let s of n){let r=e.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),S_(e)>t){r.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),S_(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}var Qu=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vu()?h_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await dA(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){let i=await this.read();return T_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){let i=await this.read();return T_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}};function S_(n){return ir(JSON.stringify({version:2,heartbeats:n})).length}function mA(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}function _A(n){Pn(new ie("platform-logger",t=>new Wu(t),"PRIVATE")),Pn(new ie("heartbeat",t=>new Yu(t),"PRIVATE")),de($u,I_,n),de($u,I_,"esm2020"),de("fire-js","")}_A("");var yA="firebase",bA="12.9.0";de(yA,bA,"app");function H_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var G_=H_,K_=new $e("auth","Firebase",H_());var pa=new An("@firebase/auth");function wA(n,...t){pa.logLevel<=K.WARN&&pa.warn(`Auth (${Rn}): ${n}`,...t)}function la(n,...t){pa.logLevel<=K.ERROR&&pa.error(`Auth (${Rn}): ${n}`,...t)}function fe(n,...t){throw vh(n,...t)}function xe(n,...t){return vh(n,...t)}function Y_(n,t,e){let i={...G_(),[t]:e};return new $e("auth","Firebase",i).create(t,{appName:n.name})}function Xn(n){return Y_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vh(n,...t){if(typeof n!="string"){let e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return K_.create(n,...t)}function z(n,t,...e){if(!n)throw vh(t,...e)}function Ae(n){let t="INTERNAL ASSERTION FAILED: "+n;throw la(t),new Error(t)}function Ke(n,t){n||Ae(t)}function ih(){return typeof self<"u"&&self.location?.href||""}function IA(){return P_()==="http:"||P_()==="https:"}function P_(){return typeof self<"u"&&self.location?.protocol||null}function vA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IA()||a_()||"connection"in navigator)?navigator.onLine:!0}function TA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Zn=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ke(e>t,"Short delay should be less than long delay!"),this.isMobile=r_()||c_()}get(){return vA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Th(n,t){Ke(n.emulator,"Emulator should always be set here");let{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var ga=class{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var EA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var SA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AA=new Zn(3e4,6e4);function Dt(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function jt(n,t,e,i,s={}){return Q_(n,s,async()=>{let r={},o={};i&&(t==="GET"?o=i:r={body:JSON.stringify(i)});let a=Oi({key:n.config.apiKey,...o}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u={method:t,headers:c,...r};return o_()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Sn(n.emulatorConfig.host)&&(u.credentials="include"),ga.fetch()(await J_(n,n.config.apiHost,e,a),u)})}async function Q_(n,t,e){n._canInitEmulator=!1;let i={...EA,...t};try{let s=new sh(n),r=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();let o=await r.json();if("needConfirmation"in o)throw ar(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{let a=r.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ar(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ar(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw ar(n,"user-disabled",o);let h=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Y_(n,h,u);fe(n,h)}}catch(s){if(s instanceof Xt)throw s;fe(n,"network-request-failed",{message:String(s)})}}async function si(n,t,e,i,s={}){let r=await jt(n,t,e,i,s);return"mfaPendingCredential"in r&&fe(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function J_(n,t,e,i){let s=`${t}${e}?${i}`,r=n,o=r.config.emulator?Th(n.config,s):`${n.config.apiScheme}://${s}`;return SA.includes(e)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function xA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var sh=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(xe(this.auth,"network-request-failed")),AA.get())})}};function ar(n,t,e){let i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);let s=xe(n,t,i);return s.customData._tokenResponse=e,s}function R_(n){return n!==void 0&&n.enterprise!==void 0}var ma=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return xA(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function X_(n,t){return jt(n,"GET","/v2/recaptchaConfig",Dt(n,t))}async function PA(n,t){return jt(n,"POST","/v1/accounts:delete",t)}async function _a(n,t){return jt(n,"POST","/v1/accounts:lookup",t)}function cr(n){if(n)try{let t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Z_(n,t=!1){let e=qt(n),i=await e.getIdToken(t),s=Eh(i);z(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");let r=typeof s.firebase=="object"?s.firebase:void 0,o=r?.sign_in_provider;return{claims:s,token:i,authTime:cr(Xu(s.auth_time)),issuedAtTime:cr(Xu(s.iat)),expirationTime:cr(Xu(s.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function Xu(n){return Number(n)*1e3}function Eh(n){let[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return la("JWT malformed, contained fewer than 3 sections"),null;try{let s=ta(e);return s?JSON.parse(s):(la("Failed to decode base64 JWT payload"),null)}catch(s){return la("Caught error parsing JWT payload as JSON",s?.toString()),null}}function C_(n){let t=Eh(n);return z(t,"internal-error"),z(typeof t.exp<"u","internal-error"),z(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function dr(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Xt&&RA(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function RA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var rh=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var fr=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function ya(n){let t=n.auth,e=await n.getIdToken(),i=await dr(n,_a(t,{idToken:e}));z(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let r=s.providerUserInfo?.length?ey(s.providerUserInfo):[],o=CA(n.providerData,r),a=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!o?.length,u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new fr(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function ty(n){let t=qt(n);await ya(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function CA(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function ey(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function kA(n,t){let e=await Q_(n,{},async()=>{let i=Oi({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=await J_(n,s,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&Sn(n.emulatorConfig.host)&&(c.credentials="include"),ga.fetch()(o,c)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function DA(n,t){return jt(n,"POST","/v2/accounts:revokeToken",Dt(n,t))}var lr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){z(t.idToken,"internal-error"),z(typeof t.idToken<"u","internal-error"),z(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):C_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){z(t.length!==0,"internal-error");let e=C_(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){let{accessToken:i,refreshToken:s,expiresIn:r}=await kA(t,e);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){let{refreshToken:i,accessToken:s,expirationTime:r}=e,o=new n;return i&&(z(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),s&&(z(typeof s=="string","internal-error",{appName:t}),o.accessToken=s),r&&(z(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ae("not implemented")}};function Cn(n,t){z(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}var kn=class n{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new rh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fr(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){let e=await dr(this,this.stsTokenManager.getToken(this.auth,t));return z(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return Z_(this,t)}reload(){return ty(this)}_assign(t){this!==t&&(z(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new n({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await ya(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(se(this.auth.app))return Promise.reject(Xn(this.auth));let t=await this.getIdToken();return await dr(this,PA(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){let i=e.displayName??void 0,s=e.email??void 0,r=e.phoneNumber??void 0,o=e.photoURL??void 0,a=e.tenantId??void 0,c=e._redirectEventId??void 0,u=e.createdAt??void 0,h=e.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:_,stsTokenManager:y}=e;z(d&&y,t,"internal-error");let v=lr.fromJSON(this.name,y);z(typeof d=="string",t,"internal-error"),Cn(i,t.name),Cn(s,t.name),z(typeof p=="boolean",t,"internal-error"),z(typeof m=="boolean",t,"internal-error"),Cn(r,t.name),Cn(o,t.name),Cn(a,t.name),Cn(c,t.name),Cn(u,t.name),Cn(h,t.name);let x=new n({uid:d,auth:t,email:s,emailVerified:p,displayName:i,isAnonymous:m,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:v,createdAt:u,lastLoginAt:h});return _&&Array.isArray(_)&&(x.providerData=_.map(R=>({...R}))),c&&(x._redirectEventId=c),x}static async _fromIdTokenResponse(t,e,i=!1){let s=new lr;s.updateFromServerResponse(e);let r=new n({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await ya(r),r}static async _fromGetAccountInfoResponse(t,e,i){let s=e.users[0];z(s.localId!==void 0,"internal-error");let r=s.providerUserInfo!==void 0?ey(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!r?.length,a=new lr;a.updateFromIdToken(i);let c=new n({uid:s.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new fr(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!r?.length};return Object.assign(c,u),c}};var k_=new Map;function Ge(n){Ke(n instanceof Function,"Expected a class definition");let t=k_.get(n);return t?(Ke(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,k_.set(n,t),t)}var ba=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){let e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}};ba.type="NONE";var oh=ba;function ua(n,t,e){return`firebase:${n}:${t}:${e}`}var wa=class n{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;let{config:s,name:r}=this.auth;this.fullUserKey=ua(this.userKey,s.apiKey,r),this.fullPersistenceKey=ua("persistence",s.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){let t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let e=await _a(this.auth,{idToken:t}).catch(()=>{});return e?kn._fromGetAccountInfoResponse(this.auth,e,t):null}return kn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;let e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new n(Ge(oh),t,i);let s=(await Promise.all(e.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),r=s[0]||Ge(oh),o=ua(i,t.config.apiKey,t.name),a=null;for(let u of e)try{let h=await u._get(o);if(h){let d;if(typeof h=="string"){let p=await _a(t,{idToken:h}).catch(()=>{});if(!p)break;d=await kn._fromGetAccountInfoResponse(t,p,h)}else d=kn._fromJSON(t,h);u!==r&&(a=d),r=u;break}}catch{}let c=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new n(r,t,i):(r=c[0],a&&await r._set(o,a.toJSON()),await Promise.all(e.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new n(r,t,i))}};function D_(n){let t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ry(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ny(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ay(t))return"Blackberry";if(cy(t))return"Webos";if(iy(t))return"Safari";if((t.includes("chrome/")||sy(t))&&!t.includes("edge/"))return"Chrome";if(oy(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function ny(n=kt()){return/firefox\//i.test(n)}function iy(n=kt()){let t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sy(n=kt()){return/crios\//i.test(n)}function ry(n=kt()){return/iemobile/i.test(n)}function oy(n=kt()){return/android/i.test(n)}function ay(n=kt()){return/blackberry/i.test(n)}function cy(n=kt()){return/webos/i.test(n)}function Sh(n=kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OA(n=kt()){return Sh(n)&&!!window.navigator?.standalone}function NA(){return l_()&&document.documentMode===10}function ly(n=kt()){return Sh(n)||oy(n)||cy(n)||ay(n)||/windows phone/i.test(n)||ry(n)}function uy(n,t=[]){let e;switch(n){case"Browser":e=D_(kt());break;case"Worker":e=`${D_(kt())}-${n}`;break;default:e=n}let i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Rn}/${i}`}var ah=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let i=r=>new Promise((o,a)=>{try{let c=t(r);o(c)}catch(c){a(c)}});i.onAbort=e,this.queue.push(i);let s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;let e=[];try{for(let i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(let s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function MA(n,t={}){return jt(n,"GET","/v2/passwordPolicy",Dt(n,t))}var VA=6,ch=class{constructor(t){let e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??VA,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){let i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}};var lh=class{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ia(this),this.idTokenSubscription=new Ia(this),this.beforeStateQueue=new ah(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ge(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{let e=await _a(this,{idToken:t}),i=await kn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(se(this.app)){let r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}let e=await this.assertedPersistence.getCurrentUser(),i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=this.redirectUser?._redirectEventId,o=i?._redirectEventId,a=await this.tryRedirectSignIn(t);(!r||r===o)&&a?.user&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(r){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await ya(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=TA()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(se(this.app))return Promise.reject(Xn(this));let e=t?qt(t):null;return e&&z(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&z(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return se(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return se(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ge(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let t=await MA(this),e=new ch(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $e("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){let e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await DA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){let i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){let e=t&&Ge(t)||this._popupRedirectResolver;z(e,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[Ge(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};let r=typeof e=="function"?e:e.next.bind(e),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof e=="function"){let c=t.addObserver(e,i,s);return()=>{o=!0,c()}}else{let c=t.addObserver(e);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=uy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(se(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&wA(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Fi(n){return qt(n)}var Ia=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=f_(e=>this.observer=e)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ba={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LA(n){Ba=n}function hy(n){return Ba.loadJS(n)}function FA(){return Ba.recaptchaEnterpriseScript}function BA(){return Ba.gapiScript}function dy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var uh=class{constructor(){this.enterprise=new hh}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}},hh=class{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}};var UA="recaptcha-enterprise",ur="NO_RECAPTCHA",va=class{constructor(t){this.type=UA,this.auth=Fi(t)}async verify(t="verify",e=!1){async function i(r){if(!e){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{X_(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new ma(c);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(r,o,a){let c=window.grecaptcha;R_(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:t}).then(u=>{o(u)}).catch(()=>{o(ur)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uh().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{i(this.auth).then(a=>{if(!e&&R_(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=FA();c.length!==0&&(c+=a),hy(c).then(()=>{s(a,r,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}};async function or(n,t,e,i=!1,s=!1){let r=new va(n),o;if(s)o=ur;else try{o=await r.verify(e)}catch{o=await r.verify(e,!0)}let a={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function hr(n,t,e,i,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let r=await or(n,t,e,e==="getOobCode");return i(n,r)}else return i(n,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=await or(n,t,e,e==="getOobCode");return i(n,o)}else return Promise.reject(r)});else if(s==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let r=await or(n,t,e);return i(n,r).catch(async o=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${e} flow.`);let a=await or(n,t,e,!1,!0);return i(n,a)}return Promise.reject(o)})}else{let r=await or(n,t,e,!1,!0);return i(n,r)}else return Promise.reject(s+" provider is not supported.")}async function zA(n){let t=Fi(n),e=await X_(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new ma(e);t.tenantId==null?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new va(t).verify()}function fy(n,t){let e=rr(n,"auth");if(e.isInitialized()){let s=e.getImmediate(),r=e.getOptions();if(he(r,t??{}))return s;fe(s,"already-initialized")}return e.initialize({options:t})}function qA(n,t){let e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Ge);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function py(n,t,e){let i=Fi(n);z(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let s=!!e?.disableWarnings,r=gy(t),{host:o,port:a}=jA(t),c=a===null?"":`:${a}`,u={url:`${r}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){z(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),z(he(u,i.config.emulator)&&he(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Sn(o)?(na(`${r}//${o}${c}`),ia("Auth",!0)):s||WA()}function gy(n){let t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function jA(n){let t=gy(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};let i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){let r=s[1];return{host:r,port:O_(i.substr(r.length+1))}}else{let[r,o]=i.split(":");return{host:r,port:O_(o)}}}function O_(n){if(!n)return null;let t=Number(n);return isNaN(t)?null:t}function WA(){function n(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ti=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ae("not implemented")}_getIdTokenResponse(t){return Ae("not implemented")}_linkToIdToken(t,e){return Ae("not implemented")}_getReauthenticationResolver(t){return Ae("not implemented")}};async function $A(n,t){return jt(n,"POST","/v1/accounts:signUp",t)}async function HA(n,t){return si(n,"POST","/v1/accounts:signInWithPassword",Dt(n,t))}async function GA(n,t){return si(n,"POST","/v1/accounts:signInWithEmailLink",Dt(n,t))}async function KA(n,t){return si(n,"POST","/v1/accounts:signInWithEmailLink",Dt(n,t))}var pr=class n extends ti{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new n(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new n(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":let e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hr(t,e,"signInWithPassword",HA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return GA(t,{email:this._email,oobCode:this._password});default:fe(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":let i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hr(t,i,"signUpPassword",$A,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KA(t,{idToken:e,email:this._email,oobCode:this._password});default:fe(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};async function Vi(n,t){return si(n,"POST","/v1/accounts:signInWithIdp",Dt(n,t))}var YA="http://localhost",ei=class n extends ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let e=new n(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):fe("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=e;if(!i||!s)return null;let o=new n(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){let e=this.buildRequest();return Vi(t,e)}_linkToIdToken(t,e){let i=this.buildRequest();return i.idToken=e,Vi(t,i)}_getReauthenticationResolver(t){let e=this.buildRequest();return e.autoCreate=!1,Vi(t,e)}buildRequest(){let t={requestUri:YA,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Oi(e)}return t}};async function N_(n,t){return jt(n,"POST","/v1/accounts:sendVerificationCode",Dt(n,t))}async function QA(n,t){return si(n,"POST","/v1/accounts:signInWithPhoneNumber",Dt(n,t))}async function JA(n,t){let e=await si(n,"POST","/v1/accounts:signInWithPhoneNumber",Dt(n,t));if(e.temporaryProof)throw ar(n,"account-exists-with-different-credential",e);return e}var XA={USER_NOT_FOUND:"user-not-found"};async function ZA(n,t){let e={...t,operation:"REAUTH"};return si(n,"POST","/v1/accounts:signInWithPhoneNumber",Dt(n,e),XA)}var gr=class n extends ti{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new n({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new n({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return QA(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return JA(t,{idToken:e,...this._makeVerificationRequest()})}_getReauthenticationResolver(t){return ZA(t,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:t,phoneNumber:e,verificationId:i,verificationCode:s}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:i,code:s}}toJSON(){let t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));let{verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:r}=t;return!i&&!e&&!s&&!r?null:new n({verificationId:e,verificationCode:i,phoneNumber:s,temporaryProof:r})}};function tx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ex(n){let t=Ni(Mi(n)).link,e=t?Ni(Mi(t)).deep_link_id:null,i=Ni(Mi(n)).deep_link_id;return(i?Ni(Mi(i)).link:null)||i||e||t||n}var Ta=class n{constructor(t){let e=Ni(Mi(t)),i=e.apiKey??null,s=e.oobCode??null,r=tx(e.mode??null);z(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){let e=ex(t);try{return new n(e)}catch{return null}}};var Li=class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,e){return pr._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){let i=Ta.parseLink(e);return z(i,"argument-error"),pr._fromEmailAndCode(t,i.code,i.tenantId)}};Li.PROVIDER_ID="password";Li.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ea=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var ni=class extends Ea{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var mr=class n extends ni{constructor(){super("facebook.com")}static credential(t){return ei._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}};mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";var _r=class n extends ni{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ei._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return n.credential(e,i)}catch{return null}}};_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";var yr=class n extends ni{constructor(){super("github.com")}static credential(t){return ei._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}};yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";var br=class n extends ni{constructor(){super("twitter.com")}static credential(t,e){return ei._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return n.credential(e,i)}catch{return null}}};br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";var wr=class n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){let r=await kn._fromIdTokenResponse(t,i,s),o=M_(i);return new n({user:r,providerId:o,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);let s=M_(i);return new n({user:t,providerId:s,_tokenResponse:i,operationType:e})}};function M_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var dh=class n extends Xt{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,n.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new n(t,e,i,s)}};function my(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(n,r,t,i):r})}async function nx(n,t,e=!1){let i=await dr(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return wr._forOperation(n,"link",i)}async function ix(n,t,e=!1){let{auth:i}=n;if(se(i.app))return Promise.reject(Xn(i));let s="reauthenticate";try{let r=await dr(n,my(i,s,t,n),e);z(r.idToken,i,"internal-error");let o=Eh(r.idToken);z(o,i,"internal-error");let{sub:a}=o;return z(n.uid===a,i,"user-mismatch"),wr._forOperation(n,s,r)}catch(r){throw r?.code==="auth/user-not-found"&&fe(i,"user-mismatch"),r}}async function sx(n,t,e=!1){if(se(n.app))return Promise.reject(Xn(n));let i="signIn",s=await my(n,i,t),r=await wr._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(r.user),r}function _y(n,t,e,i){return qt(n).onIdTokenChanged(t,e,i)}function yy(n,t,e){return qt(n).beforeAuthStateChanged(t,e)}function Ah(n,t,e,i){return qt(n).onAuthStateChanged(t,e,i)}function V_(n,t){return jt(n,"POST","/v2/accounts/mfaEnrollment:start",Dt(n,t))}function rx(n,t){return jt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(n,t))}function ox(n,t){return jt(n,"POST","/v2/accounts/mfaEnrollment:start",Dt(n,t))}function ax(n,t){return jt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(n,t))}var Sa="__sak";var Aa=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Sa,"1"),this.storage.removeItem(Sa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var cx=1e3,lx=10,xa=class extends Aa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ly(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let e of Object.keys(this.listeners)){let i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}let i=t.key;e?this.detachListener():this.stopPolling();let s=()=>{let o=this.storage.getItem(i);!e&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);NA()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,lx):s()}notifyListeners(t,e){this.localCache[t]=e;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},cx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){let e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}};xa.type="LOCAL";var by=xa;var ux=1e3;function Zu(n){let t=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),e=RegExp(`${t}=([^;]+)`);return document.cookie.match(e)?.[1]??null}function th(n){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${n.split(":")[3]}`}var fh=class{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(t){if(typeof window===void 0)return t;let e=new URL(`${window.location.origin}/__cookies__`);return e.searchParams.set("finalTarget",t),e}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(t,e){}async _get(t){if(!this._isAvailable())return null;let e=th(t);return window.cookieStore?(await window.cookieStore.get(e))?.value:Zu(e)}async _remove(t){if(!this._isAvailable()||!await this._get(t))return;let i=th(t);document.cookie=`${i}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(t,e){if(!this._isAvailable())return;let i=th(t);if(window.cookieStore){let a=(u=>{let h=u.changed.find(p=>p.name===i);h&&e(h.value),u.deleted.find(p=>p.name===i)&&e(null)}),c=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(e,c),window.cookieStore.addEventListener("change",a)}let s=Zu(i),r=setInterval(()=>{let a=Zu(i);a!==s&&(e(a),s=a)},ux),o=()=>clearInterval(r);this.listenerUnsubscribes.set(e,o)}_removeListener(t,e){let i=this.listenerUnsubscribes.get(e);i&&(i(),this.listenerUnsubscribes.delete(e))}};fh.type="COOKIE";var Pa=class extends Aa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}};Pa.type="SESSION";var xh=Pa;function hx(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}var Ra=class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let e=t,{eventId:i,eventType:s,data:r}=e.data,o=this.handlersMap[s];if(!o?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let a=Array.from(o).map(async u=>u(e.origin,r)),c=await hx(a);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Ra.receivers=[];function Ph(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}var ph=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){let s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,c)=>{let u=Ph("",20);s.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(d){let p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(p.data.response);break;default:clearTimeout(h),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:e},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Pe(){return window}function dx(n){Pe().location.href=n}function wy(){return typeof Pe().WorkerGlobalScope<"u"&&typeof Pe().importScripts=="function"}async function fx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function px(){return navigator?.serviceWorker?.controller||null}function gx(){return wy()?self:null}var Iy="firebaseLocalStorageDb",mx=1,Ca="firebaseLocalStorage",vy="fbase_key",ii=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function Ua(n,t){return n.transaction([Ca],t?"readwrite":"readonly").objectStore(Ca)}function _x(){let n=indexedDB.deleteDatabase(Iy);return new ii(n).toPromise()}function gh(){let n=indexedDB.open(Iy,mx);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Ca,{keyPath:vy})}catch(s){e(s)}}),n.addEventListener("success",async()=>{let i=n.result;i.objectStoreNames.contains(Ca)?t(i):(i.close(),await _x(),t(await gh()))})})}async function L_(n,t,e){let i=Ua(n,!0).put({[vy]:t,value:e});return new ii(i).toPromise()}async function yx(n,t){let e=Ua(n,!1).get(t),i=await new ii(e).toPromise();return i===void 0?null:i.value}function F_(n,t){let e=Ua(n,!0).delete(t);return new ii(e).toPromise()}var bx=800,wx=3,ka=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gh(),this.db)}async _withRetries(t){let e=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(e++>wx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ra._getInstance(gx()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fx(),!this.activeServiceWorker)return;this.sender=new ph(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||px()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await gh();return await L_(t,Sa,"1"),await F_(t,Sa),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>L_(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){let e=await this._withRetries(i=>yx(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>F_(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let r=Ua(s,!1).getAll();return new ii(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let e=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),e.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}};ka.type="LOCAL";var Ty=ka;function B_(n,t){return jt(n,"POST","/v2/accounts/mfaSignIn:start",Dt(n,t))}function Ix(n,t){return jt(n,"POST","/v2/accounts/mfaSignIn:finalize",Dt(n,t))}function vx(n,t){return jt(n,"POST","/v2/accounts/mfaSignIn:finalize",Dt(n,t))}var Mk=dy("rcb"),Vk=new Zn(3e4,6e4);var ha="recaptcha";async function Tx(n,t,e){if(!n._getRecaptchaConfig())try{await zA(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof t=="string"?i={phoneNumber:t}:i=t,"session"in i){let s=i.session;if("phoneNumber"in i){z(s.type==="enroll",n,"internal-error");let r={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await hr(n,r,"mfaSmsEnrollment",async(u,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===ur){z(e?.type===ha,u,"argument-error");let d=await eh(u,h,e);return V_(u,d)}return V_(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{z(s.type==="signin",n,"internal-error");let r=i.multiFactorHint?.uid||i.multiFactorUid;z(r,n,"missing-multi-factor-info");let o={mfaPendingCredential:s.credential,mfaEnrollmentId:r,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await hr(n,o,"mfaSmsSignIn",async(h,d)=>{if(d.phoneSignInInfo.captchaResponse===ur){z(e?.type===ha,h,"argument-error");let p=await eh(h,d,e);return B_(h,p)}return B_(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{let s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await hr(n,s,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===ur){z(e?.type===ha,c,"argument-error");let h=await eh(c,u,e);return N_(c,h)}return N_(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{e?._reset()}}async function eh(n,t,e){z(e.type===ha,n,"argument-error");let i=await e.verify();z(typeof i=="string",n,"argument-error");let s={...t};if("phoneEnrollmentInfo"in s){let r=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,a=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:i,captchaResponse:o,clientType:a,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){let r=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,a=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:r,clientType:o,recaptchaVersion:a}}),s}else return Object.assign(s,{recaptchaToken:i}),s}var Ir=class n{constructor(t){this.providerId=n.PROVIDER_ID,this.auth=Fi(t)}verifyPhoneNumber(t,e){return Tx(this.auth,t,qt(e))}static credential(t,e){return gr._fromVerification(t,e)}static credentialFromResult(t){let e=t;return n.credentialFromTaggedObject(e)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{phoneNumber:e,temporaryProof:i}=t;return e&&i?gr._fromTokenResponse(e,i):null}};Ir.PROVIDER_ID="phone";Ir.PHONE_SIGN_IN_METHOD="phone";function Ex(n,t){return t?Ge(t):(z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var vr=class extends ti{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Vi(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Vi(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Vi(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function Sx(n){return sx(n.auth,new vr(n),n.bypassAuthState)}function Ax(n){let{auth:t,user:e}=n;return z(e,t,"internal-error"),ix(e,new vr(n),n.bypassAuthState)}async function xx(n){let{auth:t,user:e}=n;return z(e,t,"internal-error"),nx(e,new vr(n),n.bypassAuthState)}var Da=class{constructor(t,e,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){let{urlResponse:e,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:e,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Sx;case"linkViaPopup":case"linkViaRedirect":return xx;case"reauthViaPopup":case"reauthViaRedirect":return Ax;default:fe(this.auth,"internal-error")}}resolve(t){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Px=new Zn(2e3,1e4);var mh=class n extends Da{constructor(t,e,i,s,r){super(t,e,s,r),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return z(t,this.auth,"internal-error"),t}async onExecution(){Ke(this.filter.length===1,"Popup operations only handle one event");let t=Ph();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(xe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Px.get())};t()}};mh.currentPopupAction=null;var Rx="pendingRedirect",da=new Map,_h=class extends Da{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=da.get(this.auth._key());if(!t){try{let i=await Cx(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}da.set(this.auth._key(),t)}return this.bypassAuthState||da.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Cx(n,t){let e=Ox(t),i=Dx(n);if(!await i._isAvailable())return!1;let s=await i._get(e)==="true";return await i._remove(e),s}function kx(n,t){da.set(n._key(),t)}function Dx(n){return Ge(n._redirectPersistence)}function Ox(n){return ua(Rx,n.config.apiKey,n.name)}async function Nx(n,t,e=!1){if(se(n.app))return Promise.reject(Xn(n));let i=Fi(n),s=Ex(i,t),o=await new _h(i,s,e).execute();return o&&!e&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}var Mx=600*1e3,yh=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Vx(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!Ey(t)){let i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(xe(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Mx&&this.cachedEventUids.clear(),this.cachedEventUids.has(U_(t))}saveEventToCache(t){this.cachedEventUids.add(U_(t)),this.lastProcessedEventTime=Date.now()}};function U_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function Ey({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function Vx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ey(n);default:return!1}}async function Lx(n,t={}){return jt(n,"GET","/v1/projects",t)}var Fx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bx=/^https?/;async function Ux(n){if(n.config.emulator)return;let{authorizedDomains:t}=await Lx(n);for(let e of t)try{if(zx(e))return}catch{}fe(n,"unauthorized-domain")}function zx(n){let t=ih(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===i}if(!Bx.test(e))return!1;if(Fx.test(n))return i===n;let s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}var qx=new Zn(3e4,6e4);function z_(){let n=Pe().___jsl;if(n?.H){for(let t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function jx(n){return new Promise((t,e)=>{function i(){z_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{z_(),e(xe(n,"network-request-failed"))},timeout:qx.get()})}if(Pe().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Pe().gapi?.load)i();else{let s=dy("iframefcb");return Pe()[s]=()=>{gapi.load?i():e(xe(n,"network-request-failed"))},hy(`${BA()}?onload=${s}`).catch(r=>e(r))}}).catch(t=>{throw fa=null,t})}var fa=null;function Wx(n){return fa=fa||jx(n),fa}var $x=new Zn(5e3,15e3),Hx="__/auth/iframe",Gx="emulator/auth/iframe",Kx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qx(n){let t=n.config;z(t.authDomain,n,"auth-domain-config-required");let e=t.emulator?Th(t,Gx):`https://${n.config.authDomain}/${Hx}`,i={apiKey:t.apiKey,appName:n.name,v:Rn},s=Yx.get(n.config.apiHost);s&&(i.eid=s);let r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${e}?${Oi(i).slice(1)}`}async function Jx(n){let t=await Wx(n),e=Pe().gapi;return z(e,n,"internal-error"),t.open({where:document.body,url:Qx(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kx,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});let o=xe(n,"network-request-failed"),a=Pe().setTimeout(()=>{r(o)},$x.get());function c(){Pe().clearTimeout(a),s(i)}i.ping(c).then(c,()=>{r(o)})}))}var Xx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zx=500,tP=600,eP="_blank",nP="http://localhost",Oa=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function iP(n,t,e,i=Zx,s=tP){let r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c={...Xx,width:i.toString(),height:s.toString(),top:r,left:o},u=kt().toLowerCase();e&&(a=sy(u)?eP:e),ny(u)&&(t=t||nP,c.scrollbars="yes");let h=Object.entries(c).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(OA(u)&&a!=="_self")return sP(t||"",a),new Oa(null);let d=window.open(t||"",a,h);z(d,n,"popup-blocked");try{d.focus()}catch{}return new Oa(d)}function sP(n,t){let e=document.createElement("a");e.href=n,e.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}var rP="__/auth/handler",oP="emulator/auth/handler",aP=encodeURIComponent("fac");async function q_(n,t,e,i,s,r){z(n.config.authDomain,n,"auth-domain-config-required"),z(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Rn,eventId:s};if(t instanceof Ea){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",d_(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[h,d]of Object.entries(r||{}))o[h]=d}if(t instanceof ni){let h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),u=c?`#${aP}=${encodeURIComponent(c)}`:"";return`${cP(n)}?${Oi(a).slice(1)}${u}`}function cP({config:n}){return n.emulator?Th(n,oP):`https://${n.authDomain}/${rP}`}var nh="webStorageSupport",bh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xh,this._completeRedirectFn=Nx,this._overrideRedirectResult=kx}async _openPopup(t,e,i,s){Ke(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let r=await q_(t,e,i,ih(),s);return iP(t,r,Ph())}async _openRedirect(t,e,i,s){await this._originValidation(t);let r=await q_(t,e,i,ih(),s);return dx(r),new Promise(()=>{})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:s,promise:r}=this.eventManagers[e];return s?Promise.resolve(s):(Ke(r,"If manager is not set, promise should be"),r)}let i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){let e=await Jx(t),i=new yh(t);return e.register("authEvent",s=>(z(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(nh,{type:nh},s=>{let r=s?.[0]?.[nh];r!==void 0&&e(!!r),fe(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Ux(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return ly()||iy()||Sh()}},Sy=bh,Na=class{constructor(t){this.factorId=t}_process(t,e,i){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,i);case"signin":return this._finalizeSignIn(t,e.credential);default:return Ae("unexpected MultiFactorSessionType")}}},wh=class n extends Na{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new n(t)}_finalizeEnroll(t,e,i){return rx(t,{idToken:e,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return Ix(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Ma=class{constructor(){}static assertion(t){return wh._fromCredential(t)}};Ma.FACTOR_ID="phone";var Va=class{static assertionForEnrollment(t,e){return La._fromSecret(t,e)}static assertionForSignIn(t,e){return La._fromEnrollmentId(t,e)}static async generateSecret(t){let e=t;z(typeof e.user?.auth<"u","internal-error");let i=await ox(e.user.auth,{idToken:e.credential,totpEnrollmentInfo:{}});return Fa._fromStartTotpMfaEnrollmentResponse(i,e.user.auth)}};Va.FACTOR_ID="totp";var La=class n extends Na{constructor(t,e,i){super("totp"),this.otp=t,this.enrollmentId=e,this.secret=i}static _fromSecret(t,e){return new n(e,void 0,t)}static _fromEnrollmentId(t,e){return new n(e,t)}async _finalizeEnroll(t,e,i){return z(typeof this.secret<"u",t,"argument-error"),ax(t,{idToken:e,displayName:i,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(t,e){z(this.enrollmentId!==void 0&&this.otp!==void 0,t,"argument-error");let i={verificationCode:this.otp};return vx(t,{mfaPendingCredential:e,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:i})}},Fa=class n{constructor(t,e,i,s,r,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=t,this.hashingAlgorithm=e,this.codeLength=i,this.codeIntervalSeconds=s,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(t,e){return new n(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,e)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,e){let i=!1;return(ca(t)||ca(e))&&(i=!0),i&&(ca(t)&&(t=this.auth.currentUser?.email||"unknownuser"),ca(e)&&(e=this.auth.name)),`otpauth://totp/${e}:${t}?secret=${this.secretKey}&issuer=${e}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function ca(n){return typeof n>"u"||n?.length===0}var j_="@firebase/auth",W_="1.12.0";var Ih=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uP(n){Pn(new ie("auth",(t,{options:e})=>{let i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uy(n)},u=new lh(i,s,r,c);return qA(u,e),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Pn(new ie("auth-internal",t=>{let e=Fi(t.getProvider("auth").getImmediate());return(i=>new Ih(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),de(j_,W_,lP(n)),de(j_,W_,"esm2020")}var hP=300,dP=Mu("authIdTokenMaxAge")||hP,$_=null,fP=n=>async t=>{let e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>dP)return;let s=e?.token;$_!==s&&($_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Rh(n=aa()){let t=rr(n,"auth");if(t.isInitialized())return t.getImmediate();let e=fy(n,{popupRedirectResolver:Sy,persistence:[Ty,by,xh]}),i=Mu("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let r=new URL(i,location.origin);if(location.origin===r.origin){let o=fP(r.toString());yy(e,o,()=>o(e.currentUser)),_y(e,a=>o(a))}}let s=Ou("auth");return s&&py(e,`http://${s}`),e}function pP(){return document.getElementsByTagName("head")?.[0]??document}LA({loadJS(n){return new Promise((t,e)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{let r=xe("internal-error");r.customData=s,e(r)},i.type="text/javascript",i.charset="UTF-8",pP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uP("Browser");var Ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xy={};var Ye,Ch;(function(){var n;function t(I,w){function T(){}T.prototype=w.prototype,I.F=w.prototype,I.prototype=new T,I.prototype.constructor=I,I.D=function(A,S,P){for(var E=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)E[rt-2]=arguments[rt];return w.prototype[S].apply(A,E)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,w,T){T||(T=0);let A=Array(16);if(typeof w=="string")for(var S=0;S<16;++S)A[S]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(S=0;S<16;++S)A[S]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=I.g[0],T=I.g[1],S=I.g[2];let P=I.g[3],E;E=w+(P^T&(S^P))+A[0]+3614090360&4294967295,w=T+(E<<7&4294967295|E>>>25),E=P+(S^w&(T^S))+A[1]+3905402710&4294967295,P=w+(E<<12&4294967295|E>>>20),E=S+(T^P&(w^T))+A[2]+606105819&4294967295,S=P+(E<<17&4294967295|E>>>15),E=T+(w^S&(P^w))+A[3]+3250441966&4294967295,T=S+(E<<22&4294967295|E>>>10),E=w+(P^T&(S^P))+A[4]+4118548399&4294967295,w=T+(E<<7&4294967295|E>>>25),E=P+(S^w&(T^S))+A[5]+1200080426&4294967295,P=w+(E<<12&4294967295|E>>>20),E=S+(T^P&(w^T))+A[6]+2821735955&4294967295,S=P+(E<<17&4294967295|E>>>15),E=T+(w^S&(P^w))+A[7]+4249261313&4294967295,T=S+(E<<22&4294967295|E>>>10),E=w+(P^T&(S^P))+A[8]+1770035416&4294967295,w=T+(E<<7&4294967295|E>>>25),E=P+(S^w&(T^S))+A[9]+2336552879&4294967295,P=w+(E<<12&4294967295|E>>>20),E=S+(T^P&(w^T))+A[10]+4294925233&4294967295,S=P+(E<<17&4294967295|E>>>15),E=T+(w^S&(P^w))+A[11]+2304563134&4294967295,T=S+(E<<22&4294967295|E>>>10),E=w+(P^T&(S^P))+A[12]+1804603682&4294967295,w=T+(E<<7&4294967295|E>>>25),E=P+(S^w&(T^S))+A[13]+4254626195&4294967295,P=w+(E<<12&4294967295|E>>>20),E=S+(T^P&(w^T))+A[14]+2792965006&4294967295,S=P+(E<<17&4294967295|E>>>15),E=T+(w^S&(P^w))+A[15]+1236535329&4294967295,T=S+(E<<22&4294967295|E>>>10),E=w+(S^P&(T^S))+A[1]+4129170786&4294967295,w=T+(E<<5&4294967295|E>>>27),E=P+(T^S&(w^T))+A[6]+3225465664&4294967295,P=w+(E<<9&4294967295|E>>>23),E=S+(w^T&(P^w))+A[11]+643717713&4294967295,S=P+(E<<14&4294967295|E>>>18),E=T+(P^w&(S^P))+A[0]+3921069994&4294967295,T=S+(E<<20&4294967295|E>>>12),E=w+(S^P&(T^S))+A[5]+3593408605&4294967295,w=T+(E<<5&4294967295|E>>>27),E=P+(T^S&(w^T))+A[10]+38016083&4294967295,P=w+(E<<9&4294967295|E>>>23),E=S+(w^T&(P^w))+A[15]+3634488961&4294967295,S=P+(E<<14&4294967295|E>>>18),E=T+(P^w&(S^P))+A[4]+3889429448&4294967295,T=S+(E<<20&4294967295|E>>>12),E=w+(S^P&(T^S))+A[9]+568446438&4294967295,w=T+(E<<5&4294967295|E>>>27),E=P+(T^S&(w^T))+A[14]+3275163606&4294967295,P=w+(E<<9&4294967295|E>>>23),E=S+(w^T&(P^w))+A[3]+4107603335&4294967295,S=P+(E<<14&4294967295|E>>>18),E=T+(P^w&(S^P))+A[8]+1163531501&4294967295,T=S+(E<<20&4294967295|E>>>12),E=w+(S^P&(T^S))+A[13]+2850285829&4294967295,w=T+(E<<5&4294967295|E>>>27),E=P+(T^S&(w^T))+A[2]+4243563512&4294967295,P=w+(E<<9&4294967295|E>>>23),E=S+(w^T&(P^w))+A[7]+1735328473&4294967295,S=P+(E<<14&4294967295|E>>>18),E=T+(P^w&(S^P))+A[12]+2368359562&4294967295,T=S+(E<<20&4294967295|E>>>12),E=w+(T^S^P)+A[5]+4294588738&4294967295,w=T+(E<<4&4294967295|E>>>28),E=P+(w^T^S)+A[8]+2272392833&4294967295,P=w+(E<<11&4294967295|E>>>21),E=S+(P^w^T)+A[11]+1839030562&4294967295,S=P+(E<<16&4294967295|E>>>16),E=T+(S^P^w)+A[14]+4259657740&4294967295,T=S+(E<<23&4294967295|E>>>9),E=w+(T^S^P)+A[1]+2763975236&4294967295,w=T+(E<<4&4294967295|E>>>28),E=P+(w^T^S)+A[4]+1272893353&4294967295,P=w+(E<<11&4294967295|E>>>21),E=S+(P^w^T)+A[7]+4139469664&4294967295,S=P+(E<<16&4294967295|E>>>16),E=T+(S^P^w)+A[10]+3200236656&4294967295,T=S+(E<<23&4294967295|E>>>9),E=w+(T^S^P)+A[13]+681279174&4294967295,w=T+(E<<4&4294967295|E>>>28),E=P+(w^T^S)+A[0]+3936430074&4294967295,P=w+(E<<11&4294967295|E>>>21),E=S+(P^w^T)+A[3]+3572445317&4294967295,S=P+(E<<16&4294967295|E>>>16),E=T+(S^P^w)+A[6]+76029189&4294967295,T=S+(E<<23&4294967295|E>>>9),E=w+(T^S^P)+A[9]+3654602809&4294967295,w=T+(E<<4&4294967295|E>>>28),E=P+(w^T^S)+A[12]+3873151461&4294967295,P=w+(E<<11&4294967295|E>>>21),E=S+(P^w^T)+A[15]+530742520&4294967295,S=P+(E<<16&4294967295|E>>>16),E=T+(S^P^w)+A[2]+3299628645&4294967295,T=S+(E<<23&4294967295|E>>>9),E=w+(S^(T|~P))+A[0]+4096336452&4294967295,w=T+(E<<6&4294967295|E>>>26),E=P+(T^(w|~S))+A[7]+1126891415&4294967295,P=w+(E<<10&4294967295|E>>>22),E=S+(w^(P|~T))+A[14]+2878612391&4294967295,S=P+(E<<15&4294967295|E>>>17),E=T+(P^(S|~w))+A[5]+4237533241&4294967295,T=S+(E<<21&4294967295|E>>>11),E=w+(S^(T|~P))+A[12]+1700485571&4294967295,w=T+(E<<6&4294967295|E>>>26),E=P+(T^(w|~S))+A[3]+2399980690&4294967295,P=w+(E<<10&4294967295|E>>>22),E=S+(w^(P|~T))+A[10]+4293915773&4294967295,S=P+(E<<15&4294967295|E>>>17),E=T+(P^(S|~w))+A[1]+2240044497&4294967295,T=S+(E<<21&4294967295|E>>>11),E=w+(S^(T|~P))+A[8]+1873313359&4294967295,w=T+(E<<6&4294967295|E>>>26),E=P+(T^(w|~S))+A[15]+4264355552&4294967295,P=w+(E<<10&4294967295|E>>>22),E=S+(w^(P|~T))+A[6]+2734768916&4294967295,S=P+(E<<15&4294967295|E>>>17),E=T+(P^(S|~w))+A[13]+1309151649&4294967295,T=S+(E<<21&4294967295|E>>>11),E=w+(S^(T|~P))+A[4]+4149444226&4294967295,w=T+(E<<6&4294967295|E>>>26),E=P+(T^(w|~S))+A[11]+3174756917&4294967295,P=w+(E<<10&4294967295|E>>>22),E=S+(w^(P|~T))+A[2]+718787259&4294967295,S=P+(E<<15&4294967295|E>>>17),E=T+(P^(S|~w))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+P&4294967295}i.prototype.v=function(I,w){w===void 0&&(w=I.length);let T=w-this.blockSize,A=this.C,S=this.h,P=0;for(;P<w;){if(S==0)for(;P<=T;)s(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(A[S++]=I.charCodeAt(P++),S==this.blockSize){s(this,A),S=0;break}}else for(;P<w;)if(A[S++]=I[P++],S==this.blockSize){s(this,A),S=0;break}}this.h=S,this.o+=w},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var T=I.length-8;T<I.length;++T)I[T]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,T=0;T<4;++T)for(let A=0;A<32;A+=8)I[w++]=this.g[T]>>>A&255;return I};function r(I,w){var T=a;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=w(I)}function o(I,w){this.h=w;let T=[],A=!0;for(let S=I.length-1;S>=0;S--){let P=I[S]|0;A&&P==w||(T[S]=P,A=!1)}this.g=T}var a={};function c(I){return-128<=I&&I<128?r(I,function(w){return new o([w|0],w<0?-1:0)}):new o([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(I<0)return v(u(-I));let w=[],T=1;for(let A=0;I>=T;A++)w[A]=I/T|0,T*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return v(h(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let T=u(Math.pow(w,8)),A=d;for(let P=0;P<I.length;P+=8){var S=Math.min(8,I.length-P);let E=parseInt(I.substring(P,P+S),w);S<8?(S=u(Math.pow(w,S)),A=A.j(S).add(u(E))):(A=A.j(T),A=A.add(u(E)))}return A}var d=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(y(this))return-v(this).m();let I=0,w=1;for(let T=0;T<this.g.length;T++){let A=this.i(T);I+=(A>=0?A:4294967296+A)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(y(this))return"-"+v(this).toString(I);let w=u(Math.pow(I,6));var T=this;let A="";for(;;){let S=M(T,w).g;T=x(T,S.j(w));let P=((T.g.length>0?T.g[0]:T.h)>>>0).toString(I);if(T=S,_(T))return P+A;for(;P.length<6;)P="0"+P;A=P+A}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function y(I){return I.h==-1}n.l=function(I){return I=x(this,I),y(I)?-1:_(I)?0:1};function v(I){let w=I.g.length,T=[];for(let A=0;A<w;A++)T[A]=~I.g[A];return new o(T,~I.h).add(p)}n.abs=function(){return y(this)?v(this):this},n.add=function(I){let w=Math.max(this.g.length,I.g.length),T=[],A=0;for(let S=0;S<=w;S++){let P=A+(this.i(S)&65535)+(I.i(S)&65535),E=(P>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);A=E>>>16,P&=65535,E&=65535,T[S]=E<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function x(I,w){return I.add(v(w))}n.j=function(I){if(_(this)||_(I))return d;if(y(this))return y(I)?v(this).j(v(I)):v(v(this).j(I));if(y(I))return v(this.j(v(I)));if(this.l(m)<0&&I.l(m)<0)return u(this.m()*I.m());let w=this.g.length+I.g.length,T=[];for(var A=0;A<2*w;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(let S=0;S<I.g.length;S++){let P=this.i(A)>>>16,E=this.i(A)&65535,rt=I.i(S)>>>16,Y=I.i(S)&65535;T[2*A+2*S]+=E*Y,R(T,2*A+2*S),T[2*A+2*S+1]+=P*Y,R(T,2*A+2*S+1),T[2*A+2*S+1]+=E*rt,R(T,2*A+2*S+1),T[2*A+2*S+2]+=P*rt,R(T,2*A+2*S+2)}for(I=0;I<w;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=w;I<2*w;I++)T[I]=0;return new o(T,0)};function R(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function O(I,w){this.g=I,this.h=w}function M(I,w){if(_(w))throw Error("division by zero");if(_(I))return new O(d,d);if(y(I))return w=M(v(I),w),new O(v(w.g),v(w.h));if(y(w))return w=M(I,v(w)),new O(v(w.g),w.h);if(I.g.length>30){if(y(I)||y(w))throw Error("slowDivide_ only works with positive integers.");for(var T=p,A=w;A.l(I)<=0;)T=N(T),A=N(A);var S=D(T,1),P=D(A,1);for(A=D(A,2),T=D(T,2);!_(A);){var E=P.add(A);E.l(I)<=0&&(S=S.add(T),P=E),A=D(A,1),T=D(T,1)}return w=x(I,S.j(w)),new O(S,w)}for(S=d;I.l(w)>=0;){for(T=Math.max(1,Math.floor(I.m()/w.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),P=u(T),E=P.j(w);y(E)||E.l(I)>0;)T-=A,P=u(T),E=P.j(w);_(P)&&(P=p),S=S.add(P),I=x(I,E)}return new O(S,I)}n.B=function(I){return M(this,I).h},n.and=function(I){let w=Math.max(this.g.length,I.g.length),T=[];for(let A=0;A<w;A++)T[A]=this.i(A)&I.i(A);return new o(T,this.h&I.h)},n.or=function(I){let w=Math.max(this.g.length,I.g.length),T=[];for(let A=0;A<w;A++)T[A]=this.i(A)|I.i(A);return new o(T,this.h|I.h)},n.xor=function(I){let w=Math.max(this.g.length,I.g.length),T=[];for(let A=0;A<w;A++)T[A]=this.i(A)^I.i(A);return new o(T,this.h^I.h)};function N(I){let w=I.g.length+1,T=[];for(let A=0;A<w;A++)T[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(T,I.h)}function D(I,w){let T=w>>5;w%=32;let A=I.g.length-T,S=[];for(let P=0;P<A;P++)S[P]=w>0?I.i(P+T)>>>w|I.i(P+T+1)<<32-w:I.i(P+T);return new o(S,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Ch=xy.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ye=xy.Integer=o}).apply(typeof Ay<"u"?Ay:typeof self<"u"?self:typeof window<"u"?window:{});var za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qe={};var kh,yP,Bi,Dh,Tr,qa,Oh,Nh,Mh;(function(){var n,t=Object.defineProperty;function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof za=="object"&&za];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=e(this);function s(l,f){if(f)t:{var g=i;l=l.split(".");for(var b=0;b<l.length-1;b++){var C=l[b];if(!(C in g))break t;g=g[C]}l=l[l.length-1],b=g[l],f=f(b),f!=b&&f!=null&&t(g,l,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(f){var g=[],b;for(b in f)Object.prototype.hasOwnProperty.call(f,b)&&g.push([b,f[b]]);return g}});var r=r||{},o=this||self;function a(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function c(l,f,g){return l.call.apply(l.bind,arguments)}function u(l,f,g){return u=c,u.apply(null,arguments)}function h(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function d(l,f){function g(){}g.prototype=f.prototype,l.Z=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(b,C,k){for(var F=Array(arguments.length-2),H=2;H<arguments.length;H++)F[H-2]=arguments[H];return f.prototype[C].apply(b,F)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function m(l){let f=l.length;if(f>0){let g=Array(f);for(let b=0;b<f;b++)g[b]=l[b];return g}return[]}function _(l,f){for(let b=1;b<arguments.length;b++){let C=arguments[b];var g=typeof C;if(g=g!="object"?g:C?Array.isArray(C)?"array":g:"null",g=="array"||g=="object"&&typeof C.length=="number"){g=l.length||0;let k=C.length||0;l.length=g+k;for(let F=0;F<k;F++)l[g+F]=C[F]}else l.push(C)}}class y{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(l){o.setTimeout(()=>{throw l},0)}function x(){var l=I;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class R{constructor(){this.h=this.g=null}add(f,g){let b=O.get();b.set(f,g),this.h?this.h.next=b:this.g=b,this.h=b}}var O=new y(()=>new M,l=>l.reset());class M{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let N,D=!1,I=new R,w=()=>{let l=Promise.resolve(void 0);N=()=>{l.then(T)}};function T(){for(var l;l=x();){try{l.h.call(l.g)}catch(g){v(g)}var f=O;f.j(l),f.h<100&&(f.h++,l.next=f.g,f.g=l)}D=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return l})();function E(l){return/^[\s\xa0]*$/.test(l)}function rt(l,f){S.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,f)}d(rt,S),rt.prototype.init=function(l,f){let g=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget,f||(g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement)),this.relatedTarget=f,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),ct=0;function pt(l,f,g,b,C){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!b,this.ha=C,this.key=++ct,this.da=this.fa=!1}function Bt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function wt(l,f,g){for(let b in l)f.call(g,l[b],b,l)}function an(l,f){for(let g in l)f.call(void 0,l[g],g,l)}function Ln(l){let f={};for(let g in l)f[g]=l[g];return f}let Me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cn(l,f){let g,b;for(let C=1;C<arguments.length;C++){b=arguments[C];for(g in b)l[g]=b[g];for(let k=0;k<Me.length;k++)g=Me[k],Object.prototype.hasOwnProperty.call(b,g)&&(l[g]=b[g])}}function te(l){this.src=l,this.g={},this.h=0}te.prototype.add=function(l,f,g,b,C){let k=l.toString();l=this.g[k],l||(l=this.g[k]=[],this.h++);let F=ce(l,f,b,C);return F>-1?(f=l[F],g||(f.fa=!1)):(f=new pt(f,this.src,k,!!b,C),f.fa=g,l.push(f)),f};function Ve(l,f){let g=f.type;if(g in l.g){var b=l.g[g],C=Array.prototype.indexOf.call(b,f,void 0),k;(k=C>=0)&&Array.prototype.splice.call(b,C,1),k&&(Bt(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function ce(l,f,g,b){for(let C=0;C<l.length;++C){let k=l[C];if(!k.da&&k.listener==f&&k.capture==!!g&&k.ha==b)return C}return-1}var zc="closure_lm_"+(Math.random()*1e6|0),qc={};function Uf(l,f,g,b,C){if(b&&b.once)return qf(l,f,g,b,C);if(Array.isArray(f)){for(let k=0;k<f.length;k++)Uf(l,f[k],g,b,C);return null}return g=Hc(g),l&&l[Y]?l.J(f,g,a(b)?!!b.capture:!!b,C):zf(l,f,g,!1,b,C)}function zf(l,f,g,b,C,k){if(!f)throw Error("Invalid event type");let F=a(C)?!!C.capture:!!C,H=Wc(l);if(H||(l[zc]=H=new te(l)),g=H.add(f,g,b,F,k),g.proxy)return g;if(b=Zw(),g.proxy=b,b.src=l,b.listener=g,l.addEventListener)P||(C=F),C===void 0&&(C=!1),l.addEventListener(f.toString(),b,C);else if(l.attachEvent)l.attachEvent(Wf(f.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Zw(){function l(g){return f.call(l.src,l.listener,g)}let f=tI;return l}function qf(l,f,g,b,C){if(Array.isArray(f)){for(let k=0;k<f.length;k++)qf(l,f[k],g,b,C);return null}return g=Hc(g),l&&l[Y]?l.K(f,g,a(b)?!!b.capture:!!b,C):zf(l,f,g,!0,b,C)}function jf(l,f,g,b,C){if(Array.isArray(f))for(var k=0;k<f.length;k++)jf(l,f[k],g,b,C);else b=a(b)?!!b.capture:!!b,g=Hc(g),l&&l[Y]?(l=l.i,k=String(f).toString(),k in l.g&&(f=l.g[k],g=ce(f,g,b,C),g>-1&&(Bt(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete l.g[k],l.h--)))):l&&(l=Wc(l))&&(f=l.g[f.toString()],l=-1,f&&(l=ce(f,g,b,C)),(g=l>-1?f[l]:null)&&jc(g))}function jc(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Y])Ve(f.i,l);else{var g=l.type,b=l.proxy;f.removeEventListener?f.removeEventListener(g,b,l.capture):f.detachEvent?f.detachEvent(Wf(g),b):f.addListener&&f.removeListener&&f.removeListener(b),(g=Wc(f))?(Ve(g,l),g.h==0&&(g.src=null,f[zc]=null)):Bt(l)}}}function Wf(l){return l in qc?qc[l]:qc[l]="on"+l}function tI(l,f){if(l.da)l=!0;else{f=new rt(f,this);let g=l.listener,b=l.ha||l.src;l.fa&&jc(l),l=g.call(b,f)}return l}function Wc(l){return l=l[zc],l instanceof te?l:null}var $c="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hc(l){return typeof l=="function"?l:(l[$c]||(l[$c]=function(f){return l.handleEvent(f)}),l[$c])}function Ut(){A.call(this),this.i=new te(this),this.M=this,this.G=null}d(Ut,A),Ut.prototype[Y]=!0,Ut.prototype.removeEventListener=function(l,f,g,b){jf(this,l,f,g,b)};function $t(l,f){var g,b=l.G;if(b)for(g=[];b;b=b.G)g.push(b);if(l=l.M,b=f.type||f,typeof f=="string")f=new S(f,l);else if(f instanceof S)f.target=f.target||l;else{var C=f;f=new S(b,l),cn(f,C)}C=!0;let k,F;if(g)for(F=g.length-1;F>=0;F--)k=f.g=g[F],C=to(k,b,!0,f)&&C;if(k=f.g=l,C=to(k,b,!0,f)&&C,C=to(k,b,!1,f)&&C,g)for(F=0;F<g.length;F++)k=f.g=g[F],C=to(k,b,!1,f)&&C}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var l=this.i;for(let f in l.g){let g=l.g[f];for(let b=0;b<g.length;b++)Bt(g[b]);delete l.g[f],l.h--}}this.G=null},Ut.prototype.J=function(l,f,g,b){return this.i.add(String(l),f,!1,g,b)},Ut.prototype.K=function(l,f,g,b){return this.i.add(String(l),f,!0,g,b)};function to(l,f,g,b){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();let C=!0;for(let k=0;k<f.length;++k){let F=f[k];if(F&&!F.da&&F.capture==g){let H=F.listener,Pt=F.ha||F.src;F.fa&&Ve(l.i,F),C=H.call(Pt,b)!==!1&&C}}return C&&!b.defaultPrevented}function eI(l,f){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=u(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(l,f||0)}function $f(l){l.g=eI(()=>{l.g=null,l.i&&(l.i=!1,$f(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class nI extends A{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:$f(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(l){A.call(this),this.h=l,this.g={}}d(ys,A);var Hf=[];function Gf(l){wt(l.g,function(f,g){this.g.hasOwnProperty(g)&&jc(f)},l),l.g={}}ys.prototype.N=function(){ys.Z.N.call(this),Gf(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gc=o.JSON.stringify,iI=o.JSON.parse,sI=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Kf(){}function Yf(){}var bs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kc(){S.call(this,"d")}d(Kc,S);function Yc(){S.call(this,"c")}d(Yc,S);var Fn={},Qf=null;function eo(){return Qf=Qf||new Ut}Fn.Ia="serverreachability";function Jf(l){S.call(this,Fn.Ia,l)}d(Jf,S);function ws(l){let f=eo();$t(f,new Jf(f))}Fn.STAT_EVENT="statevent";function Xf(l,f){S.call(this,Fn.STAT_EVENT,l),this.stat=f}d(Xf,S);function Ht(l){let f=eo();$t(f,new Xf(f,l))}Fn.Ja="timingevent";function Zf(l,f){S.call(this,Fn.Ja,l),this.size=f}d(Zf,S);function Is(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},f)}function vs(){this.g=!0}vs.prototype.ua=function(){this.g=!1};function rI(l,f,g,b,C,k){l.info(function(){if(l.g)if(k){var F="",H=k.split("&");for(let ot=0;ot<H.length;ot++){var Pt=H[ot].split("=");if(Pt.length>1){let Ct=Pt[0];Pt=Pt[1];let _e=Ct.split("_");F=_e.length>=2&&_e[1]=="type"?F+(Ct+"="+Pt+"&"):F+(Ct+"=redacted&")}}}else F=null;else F=k;return"XMLHTTP REQ ("+b+") [attempt "+C+"]: "+f+`
`+g+`
`+F})}function oI(l,f,g,b,C,k,F){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+C+"]: "+f+`
`+g+`
`+k+" "+F})}function gi(l,f,g,b){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+cI(l,g)+(b?" "+b:"")})}function aI(l,f){l.info(function(){return"TIMEOUT: "+f})}vs.prototype.info=function(){};function cI(l,f){if(!l.g)return f;if(!f)return null;try{let k=JSON.parse(f);if(k){for(l=0;l<k.length;l++)if(Array.isArray(k[l])){var g=k[l];if(!(g.length<2)){var b=g[1];if(Array.isArray(b)&&!(b.length<1)){var C=b[0];if(C!="noop"&&C!="stop"&&C!="close")for(let F=1;F<b.length;F++)b[F]=""}}}}return Gc(k)}catch{return f}}var no={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ep;function Qc(){}d(Qc,Kf),Qc.prototype.g=function(){return new XMLHttpRequest},ep=new Qc;function Ts(l){return encodeURIComponent(String(l))}function lI(l){var f=1;l=l.split(":");let g=[];for(;f>0&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function ln(l,f,g,b){this.j=l,this.i=f,this.l=g,this.S=b||1,this.V=new ys(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new np}function np(){this.i=null,this.g="",this.h=!1}var ip={},Jc={};function Xc(l,f,g){l.M=1,l.A=so(me(f)),l.u=g,l.R=!0,sp(l,null)}function sp(l,f){l.F=Date.now(),io(l),l.B=me(l.A);var g=l.B,b=l.S;Array.isArray(b)||(b=[String(b)]),_p(g.i,"t",b),l.C=0,g=l.j.L,l.h=new np,l.g=Mp(l.j,g?f:null,!l.u),l.P>0&&(l.O=new nI(u(l.Y,l,l.g),l.P)),f=l.V,g=l.g,b=l.ba;var C="readystatechange";Array.isArray(C)||(C&&(Hf[0]=C.toString()),C=Hf);for(let k=0;k<C.length;k++){let F=Uf(g,C[k],b||f.handleEvent,!1,f.h||f);if(!F)break;f.g[F.key]=F}f=l.J?Ln(l.J):{},l.u?(l.v||(l.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,f)):(l.v="GET",l.g.ea(l.B,l.v,null,f)),ws(),rI(l.i,l.v,l.B,l.l,l.S,l.u)}ln.prototype.ba=function(l){l=l.target;let f=this.O;f&&dn(l)==3?f.j():this.Y(l)},ln.prototype.Y=function(l){try{if(l==this.g)t:{let H=dn(this.g),Pt=this.g.ya(),ot=this.g.ca();if(!(H<3)&&(H!=3||this.g&&(this.h.h||this.g.la()||Ep(this.g)))){this.K||H!=4||Pt==7||(Pt==8||ot<=0?ws(3):ws(2)),Zc(this);var f=this.g.ca();this.X=f;var g=uI(this);if(this.o=f==200,oI(this.i,this.v,this.B,this.l,this.S,H,f),this.o){if(this.U&&!this.L){e:{if(this.g){var b,C=this.g;if((b=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(b)){var k=b;break e}}k=null}if(l=k)gi(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tl(this,l);else{this.o=!1,this.m=3,Ht(12),Bn(this),Es(this);break t}}if(this.R){l=!0;let Ct;for(;!this.K&&this.C<g.length;)if(Ct=hI(this,g),Ct==Jc){H==4&&(this.m=4,Ht(14),l=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==ip){this.m=4,Ht(15),gi(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else gi(this.i,this.l,Ct,null),tl(this,Ct);if(rp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),H!=4||g.length!=0||this.h.h||(this.m=1,Ht(16),l=!1),this.o=this.o&&l,!l)gi(this.i,this.l,g,"[Invalid Chunked Response]"),Bn(this),Es(this);else if(g.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),al(F),F.P=!0,Ht(11))}}else gi(this.i,this.l,g,null),tl(this,g);H==4&&Bn(this),this.o&&!this.K&&(H==4?kp(this.j,this):(this.o=!1,io(this)))}else SI(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),Bn(this),Es(this)}}}catch{}};function uI(l){if(!rp(l))return l.g.la();let f=Ep(l.g);if(f==="")return"";let g="",b=f.length,C=dn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Bn(l),Es(l),"";l.h.i=new o.TextDecoder}for(let k=0;k<b;k++)l.h.h=!0,g+=l.h.i.decode(f[k],{stream:!(C&&k==b-1)});return f.length=0,l.h.g+=g,l.C=0,l.h.g}function rp(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function hI(l,f){var g=l.C,b=f.indexOf(`
`,g);return b==-1?Jc:(g=Number(f.substring(g,b)),isNaN(g)?ip:(b+=1,b+g>f.length?Jc:(f=f.slice(b,b+g),l.C=b+g,f)))}ln.prototype.cancel=function(){this.K=!0,Bn(this)};function io(l){l.T=Date.now()+l.H,op(l,l.H)}function op(l,f){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Is(u(l.aa,l),f)}function Zc(l){l.D&&(o.clearTimeout(l.D),l.D=null)}ln.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(aI(this.i,this.B),this.M!=2&&(ws(),Ht(17)),Bn(this),this.m=2,Es(this)):op(this,this.T-l)};function Es(l){l.j.I==0||l.K||kp(l.j,l)}function Bn(l){Zc(l);var f=l.O;f&&typeof f.dispose=="function"&&f.dispose(),l.O=null,Gf(l.V),l.g&&(f=l.g,l.g=null,f.abort(),f.dispose())}function tl(l,f){try{var g=l.j;if(g.I!=0&&(g.g==l||el(g.h,l))){if(!l.L&&el(g.h,l)&&g.I==3){try{var b=g.Ba.g.parse(f)}catch{b=null}if(Array.isArray(b)&&b.length==3){var C=b;if(C[0]==0){t:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)uo(g),co(g);else break t;ol(g),Ht(18)}}else g.xa=C[1],0<g.xa-g.K&&C[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Is(u(g.Va,g),6e3));lp(g.h)<=1&&g.ta&&(g.ta=void 0)}else zn(g,11)}else if((l.L||g.g==l)&&uo(g),!E(f))for(C=g.Ba.g.parse(f),f=0;f<C.length;f++){let ot=C[f],Ct=ot[0];if(!(Ct<=g.K))if(g.K=Ct,ot=ot[1],g.I==2)if(ot[0]=="c"){g.M=ot[1],g.ba=ot[2];let _e=ot[3];_e!=null&&(g.ka=_e,g.j.info("VER="+g.ka));let qn=ot[4];qn!=null&&(g.za=qn,g.j.info("SVER="+g.za));let fn=ot[5];fn!=null&&typeof fn=="number"&&fn>0&&(b=1.5*fn,g.O=b,g.j.info("backChannelRequestTimeoutMs_="+b)),b=g;let pn=l.g;if(pn){let fo=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var k=b.h;k.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(nl(k,k.h),k.h=null))}if(b.G){let cl=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(b.wa=cl,ht(b.J,b.G,cl))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),b=g;var F=l;if(b.na=Np(b,b.L?b.ba:null,b.W),F.L){up(b.h,F);var H=F,Pt=b.O;Pt&&(H.H=Pt),H.D&&(Zc(H),io(H)),b.g=F}else Rp(b);g.i.length>0&&lo(g)}else ot[0]!="stop"&&ot[0]!="close"||zn(g,7);else g.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?zn(g,7):rl(g):ot[0]!="noop"&&g.l&&g.l.qa(ot),g.A=0)}}ws(4)}catch{}}var dI=class{constructor(l,f){this.g=l,this.map=f}};function ap(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function lp(l){return l.h?1:l.g?l.g.size:0}function el(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function nl(l,f){l.g?l.g.add(f):l.h=f}function up(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}ap.prototype.cancel=function(){if(this.i=hp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function hp(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let g of l.g.values())f=f.concat(g.G);return f}return m(l.i)}var dp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fI(l,f){if(l){l=l.split("&");for(let g=0;g<l.length;g++){let b=l[g].indexOf("="),C,k=null;b>=0?(C=l[g].substring(0,b),k=l[g].substring(b+1)):C=l[g],f(C,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function un(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;l instanceof un?(this.l=l.l,Ss(this,l.j),this.o=l.o,this.g=l.g,As(this,l.u),this.h=l.h,il(this,yp(l.i)),this.m=l.m):l&&(f=String(l).match(dp))?(this.l=!1,Ss(this,f[1]||"",!0),this.o=xs(f[2]||""),this.g=xs(f[3]||"",!0),As(this,f[4]),this.h=xs(f[5]||"",!0),il(this,f[6]||"",!0),this.m=xs(f[7]||"")):(this.l=!1,this.i=new Rs(null,this.l))}un.prototype.toString=function(){let l=[];var f=this.j;f&&l.push(Ps(f,fp,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Ps(f,fp,!0),"@"),l.push(Ts(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ps(g,g.charAt(0)=="/"?mI:gI,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ps(g,yI)),l.join("")},un.prototype.resolve=function(l){let f=me(this),g=!!l.j;g?Ss(f,l.j):g=!!l.o,g?f.o=l.o:g=!!l.g,g?f.g=l.g:g=l.u!=null;var b=l.h;if(g)As(f,l.u);else if(g=!!l.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var C=f.h.lastIndexOf("/");C!=-1&&(b=f.h.slice(0,C+1)+b)}if(C=b,C==".."||C==".")b="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){b=C.lastIndexOf("/",0)==0,C=C.split("/");let k=[];for(let F=0;F<C.length;){let H=C[F++];H=="."?b&&F==C.length&&k.push(""):H==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),b&&F==C.length&&k.push("")):(k.push(H),b=!0)}b=k.join("/")}else b=C}return g?f.h=b:g=l.i.toString()!=="",g?il(f,yp(l.i)):g=!!l.m,g&&(f.m=l.m),f};function me(l){return new un(l)}function Ss(l,f,g){l.j=g?xs(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function As(l,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);l.u=f}else l.u=null}function il(l,f,g){f instanceof Rs?(l.i=f,bI(l.i,l.l)):(g||(f=Ps(f,_I)),l.i=new Rs(f,l.l))}function ht(l,f,g){l.i.set(f,g)}function so(l){return ht(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function xs(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ps(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,pI),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function pI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var fp=/[#\/\?@]/g,gI=/[#\?:]/g,mI=/[#\?]/g,_I=/[#\?@]/g,yI=/#/g;function Rs(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Un(l){l.g||(l.g=new Map,l.h=0,l.i&&fI(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Rs.prototype,n.add=function(l,f){Un(this),this.i=null,l=mi(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function pp(l,f){Un(l),f=mi(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function gp(l,f){return Un(l),f=mi(l,f),l.g.has(f)}n.forEach=function(l,f){Un(this),this.g.forEach(function(g,b){g.forEach(function(C){l.call(f,C,b,this)},this)},this)};function mp(l,f){Un(l);let g=[];if(typeof f=="string")gp(l,f)&&(g=g.concat(l.g.get(mi(l,f))));else for(l=Array.from(l.g.values()),f=0;f<l.length;f++)g=g.concat(l[f]);return g}n.set=function(l,f){return Un(this),this.i=null,l=mi(this,l),gp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=mp(this,l),l.length>0?String(l[0]):f):f};function _p(l,f,g){pp(l,f),g.length>0&&(l.i=null,l.g.set(mi(l,f),m(g)),l.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(let b=0;b<f.length;b++){var g=f[b];let C=Ts(g);g=mp(this,g);for(let k=0;k<g.length;k++){let F=C;g[k]!==""&&(F+="="+Ts(g[k])),l.push(F)}}return this.i=l.join("&")};function yp(l){let f=new Rs;return f.i=l.i,l.g&&(f.g=new Map(l.g),f.h=l.h),f}function mi(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function bI(l,f){f&&!l.j&&(Un(l),l.i=null,l.g.forEach(function(g,b){let C=b.toLowerCase();b!=C&&(pp(this,b),_p(this,C,g))},l)),l.j=f}function wI(l,f){let g=new vs;if(o.Image){let b=new Image;b.onload=h(hn,g,"TestLoadImage: loaded",!0,f,b),b.onerror=h(hn,g,"TestLoadImage: error",!1,f,b),b.onabort=h(hn,g,"TestLoadImage: abort",!1,f,b),b.ontimeout=h(hn,g,"TestLoadImage: timeout",!1,f,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else f(!1)}function II(l,f){let g=new vs,b=new AbortController,C=setTimeout(()=>{b.abort(),hn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:b.signal}).then(k=>{clearTimeout(C),k.ok?hn(g,"TestPingServer: ok",!0,f):hn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(C),hn(g,"TestPingServer: error",!1,f)})}function hn(l,f,g,b,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),b(g)}catch{}}function vI(){this.g=new sI}function ro(l){this.i=l.Sb||null,this.h=l.ab||!1}d(ro,Kf),ro.prototype.g=function(){return new oo(this.i,this.h)};function oo(l,f){Ut.call(this),this.H=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(oo,Ut),n=oo.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=f,this.readyState=1,ks(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(f.body=l),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bp(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function bp(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Cs(this):ks(this),this.readyState==3&&bp(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,Cs(this))},n.Na=function(l){this.g&&(this.response=l,Cs(this))},n.ga=function(){this.g&&Cs(this)};function Cs(l){l.readyState=4,l.l=null,l.j=null,l.B=null,ks(l)}n.setRequestHeader=function(l,f){this.A.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function ks(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function wp(l){let f="";return wt(l,function(g,b){f+=b,f+=":",f+=g,f+=`\r
`}),f}function sl(l,f,g){t:{for(b in g){var b=!1;break t}b=!0}b||(g=wp(g),typeof l=="string"?g!=null&&Ts(g):ht(l,f,g))}function yt(l){Ut.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(yt,Ut);var TI=/^https?$/i,EI=["POST","PUT"];n=yt.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,f,g,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ep.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(k){Ip(this,k);return}if(l=g||"",g=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var C in b)g.set(C,b[C]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(let k of b.keys())g.set(k,b.get(k));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(g.keys()).find(k=>k.toLowerCase()=="content-type"),C=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(EI,f,void 0)>=0)||b||C||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,F]of g)this.g.setRequestHeader(k,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(k){Ip(this,k)}};function Ip(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.o=5,vp(l),ao(l)}function vp(l){l.A||(l.A=!0,$t(l,"complete"),$t(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,$t(this,"complete"),$t(this,"abort"),ao(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ao(this,!0)),yt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Tp(this):this.Xa())},n.Xa=function(){Tp(this)};function Tp(l){if(l.h&&typeof r<"u"){if(l.v&&dn(l)==4)setTimeout(l.Ca.bind(l),0);else if($t(l,"readystatechange"),dn(l)==4){l.h=!1;try{let k=l.ca();t:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var g;if(!(g=f)){var b;if(b=k===0){let F=String(l.D).match(dp)[1]||null;!F&&o.self&&o.self.location&&(F=o.self.location.protocol.slice(0,-1)),b=!TI.test(F?F.toLowerCase():"")}g=b}if(g)$t(l,"complete"),$t(l,"success");else{l.o=6;try{var C=dn(l)>2?l.g.statusText:""}catch{C=""}l.l=C+" ["+l.ca()+"]",vp(l)}}finally{ao(l)}}}}function ao(l,f){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let g=l.g;l.g=null,f||$t(l,"ready");try{g.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function dn(l){return l.g?l.g.readyState:0}n.ca=function(){try{return dn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),iI(f)}};function Ep(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function SI(l){let f={};l=(l.g&&dn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(E(l[b]))continue;var g=lI(l[b]);let C=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let k=f[C]||[];f[C]=k,k.push(g)}an(f,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Sp(l){this.za=0,this.i=[],this.j=new vs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ds("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ds("baseRetryDelayMs",5e3,l),this.Za=Ds("retryDelaySeedMs",1e4,l),this.Ta=Ds("forwardChannelMaxRetries",2,l),this.va=Ds("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new ap(l&&l.concurrentRequestLimit),this.Ba=new vI,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Sp.prototype,n.ka=8,n.I=1,n.connect=function(l,f,g,b){Ht(0),this.W=l,this.H=f||{},g&&b!==void 0&&(this.H.OSID=g,this.H.OAID=b),this.F=this.X,this.J=Np(this,null,this.W),lo(this)};function rl(l){if(Ap(l),l.I==3){var f=l.V++,g=me(l.J);if(ht(g,"SID",l.M),ht(g,"RID",f),ht(g,"TYPE","terminate"),Os(l,g),f=new ln(l,l.j,f),f.M=2,f.A=so(me(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Mp(f.j,null),f.g.ea(f.A)),f.F=Date.now(),io(f)}Op(l)}function co(l){l.g&&(al(l),l.g.cancel(),l.g=null)}function Ap(l){co(l),l.v&&(o.clearTimeout(l.v),l.v=null),uo(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function lo(l){if(!cp(l.h)&&!l.m){l.m=!0;var f=l.Ea;N||w(),D||(N(),D=!0),I.add(f,l),l.D=0}}function AI(l,f){return lp(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=f.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Is(u(l.Ea,l,f),Dp(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let C=new ln(this,this.j,l),k=this.o;if(this.U&&(k?(k=Ln(k),cn(k,this.U)):k=this.U),this.u!==null||this.R||(C.J=k,k=null),this.S)t:{for(var f=0,g=0;g<this.i.length;g++){e:{var b=this.i[g];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(f+=b,f>4096){f=g;break t}if(f===4096||g===this.i.length-1){f=g+1;break t}}f=1e3}else f=1e3;f=Pp(this,C,f),g=me(this.J),ht(g,"RID",l),ht(g,"CVER",22),this.G&&ht(g,"X-HTTP-Session-Id",this.G),Os(this,g),k&&(this.R?f="headers="+Ts(wp(k))+"&"+f:this.u&&sl(g,this.u,k)),nl(this.h,C),this.Ra&&ht(g,"TYPE","init"),this.S?(ht(g,"$req",f),ht(g,"SID","null"),C.U=!0,Xc(C,g,null)):Xc(C,g,f),this.I=2}}else this.I==3&&(l?xp(this,l):this.i.length==0||cp(this.h)||xp(this))};function xp(l,f){var g;f?g=f.l:g=l.V++;let b=me(l.J);ht(b,"SID",l.M),ht(b,"RID",g),ht(b,"AID",l.K),Os(l,b),l.u&&l.o&&sl(b,l.u,l.o),g=new ln(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),f&&(l.i=f.G.concat(l.i)),f=Pp(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),nl(l.h,g),Xc(g,b,f)}function Os(l,f){l.H&&wt(l.H,function(g,b){ht(f,b,g)}),l.l&&wt({},function(g,b){ht(f,b,g)})}function Pp(l,f,g){g=Math.min(l.i.length,g);let b=l.l?u(l.l.Ka,l.l,l):null;t:{var C=l.i;let H=-1;for(;;){let Pt=["count="+g];H==-1?g>0?(H=C[0].g,Pt.push("ofs="+H)):H=0:Pt.push("ofs="+H);let ot=!0;for(let Ct=0;Ct<g;Ct++){var k=C[Ct].g;let _e=C[Ct].map;if(k-=H,k<0)H=Math.max(0,C[Ct].g-100),ot=!1;else try{k="req"+k+"_"||"";try{var F=_e instanceof Map?_e:Object.entries(_e);for(let[qn,fn]of F){let pn=fn;a(fn)&&(pn=Gc(fn)),Pt.push(k+qn+"="+encodeURIComponent(pn))}}catch(qn){throw Pt.push(k+"type="+encodeURIComponent("_badmap")),qn}}catch{b&&b(_e)}}if(ot){F=Pt.join("&");break t}}F=void 0}return l=l.i.splice(0,g),f.G=l,F}function Rp(l){if(!l.g&&!l.v){l.Y=1;var f=l.Da;N||w(),D||(N(),D=!0),I.add(f,l),l.A=0}}function ol(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Is(u(l.Da,l),Dp(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Cp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Is(u(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),co(this),Cp(this))};function al(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Cp(l){l.g=new ln(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var f=me(l.na);ht(f,"RID","rpc"),ht(f,"SID",l.M),ht(f,"AID",l.K),ht(f,"CI",l.F?"0":"1"),!l.F&&l.ia&&ht(f,"TO",l.ia),ht(f,"TYPE","xmlhttp"),Os(l,f),l.u&&l.o&&sl(f,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=so(me(f)),g.u=null,g.R=!0,sp(g,l)}n.Va=function(){this.C!=null&&(this.C=null,co(this),ol(this),Ht(19))};function uo(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function kp(l,f){var g=null;if(l.g==f){uo(l),al(l),l.g=null;var b=2}else if(el(l.h,f))g=f.G,up(l.h,f),b=1;else return;if(l.I!=0){if(f.o)if(b==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var C=l.D;b=eo(),$t(b,new Zf(b,g)),lo(l)}else Rp(l);else if(C=f.m,C==3||C==0&&f.X>0||!(b==1&&AI(l,f)||b==2&&ol(l)))switch(g&&g.length>0&&(f=l.h,f.i=f.i.concat(g)),C){case 1:zn(l,5);break;case 4:zn(l,10);break;case 3:zn(l,6);break;default:zn(l,2)}}}function Dp(l,f){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*f}function zn(l,f){if(l.j.info("Error code "+f),f==2){var g=u(l.bb,l),b=l.Ua;let C=!b;b=new un(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ss(b,"https"),so(b),C?wI(b.toString(),g):II(b.toString(),g)}else Ht(2);l.I=0,l.l&&l.l.pa(f),Op(l),Ap(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Op(l){if(l.I=0,l.ja=[],l.l){let f=hp(l.h);(f.length!=0||l.i.length!=0)&&(_(l.ja,f),_(l.ja,l.i),l.h.i.length=0,m(l.i),l.i.length=0),l.l.oa()}}function Np(l,f,g){var b=g instanceof un?me(g):new un(g);if(b.g!="")f&&(b.g=f+"."+b.g),As(b,b.u);else{var C=o.location;b=C.protocol,f=f?f+"."+C.hostname:C.hostname,C=+C.port;let k=new un(null);b&&Ss(k,b),f&&(k.g=f),C&&As(k,C),g&&(k.h=g),b=k}return g=l.G,f=l.wa,g&&f&&ht(b,g,f),ht(b,"VER",l.ka),Os(l,b),b}function Mp(l,f,g){if(f&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Aa&&!l.ma?new yt(new ro({ab:g})):new yt(l.ma),f.Fa(l.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vp(){}n=Vp.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ho(){}ho.prototype.g=function(l,f){return new Jt(l,f)};function Jt(l,f){Ut.call(this),this.g=new Sp(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(l?l["X-WebChannel-Client-Profile"]=f.sa:l={"X-WebChannel-Client-Profile":f.sa}),this.g.U=l,(l=f&&f.Qb)&&!E(l)&&(this.g.u=l),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!E(f)&&(this.g.G=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new _i(this)}d(Jt,Ut),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){rl(this.g)},Jt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Gc(l),l=g);f.i.push(new dI(f.Ya++,l)),f.I==3&&lo(f)},Jt.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,Jt.Z.N.call(this)};function Lp(l){Kc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){t:{for(let g in f){l=g;break t}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}d(Lp,Kc);function Fp(){Yc.call(this),this.status=1}d(Fp,Yc);function _i(l){this.g=l}d(_i,Vp),_i.prototype.ra=function(){$t(this.g,"a")},_i.prototype.qa=function(l){$t(this.g,new Lp(l))},_i.prototype.pa=function(l){$t(this.g,new Fp)},_i.prototype.oa=function(){$t(this.g,"b")},ho.prototype.createWebChannel=ho.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,Mh=Qe.createWebChannelTransport=function(){return new ho},Nh=Qe.getStatEventTarget=function(){return eo()},Oh=Qe.Event=Fn,qa=Qe.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},no.NO_ERROR=0,no.TIMEOUT=8,no.HTTP_ERROR=6,Tr=Qe.ErrorCode=no,tp.COMPLETE="complete",Dh=Qe.EventType=tp,Yf.EventType=bs,bs.OPEN="a",bs.CLOSE="b",bs.ERROR="c",bs.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,Bi=Qe.WebChannel=Yf,yP=Qe.FetchXmlHttpFactory=ro,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,kh=Qe.XhrIo=yt}).apply(typeof za<"u"?za:typeof self<"u"?self:typeof window<"u"?window:{});var Ot=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");var ls="12.9.0";function fb(n){ls=n}var li=new An("@firebase/firestore");function Ui(){return li.logLevel}function U(n,...t){if(li.logLevel<=K.DEBUG){let e=t.map(uf);li.debug(`Firestore (${ls}): ${n}`,...e)}}function Ze(n,...t){if(li.logLevel<=K.ERROR){let e=t.map(uf);li.error(`Firestore (${ls}): ${n}`,...e)}}function tn(n,...t){if(li.logLevel<=K.WARN){let e=t.map(uf);li.warn(`Firestore (${ls}): ${n}`,...e)}}function uf(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function j(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,pb(n,i,e)}function pb(n,t,e){let i=`FIRESTORE (${ls}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ze(i),new Error(i)}function _t(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||pb(t,s,i)}function tt(n,t){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Xt{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Je=class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}};var Ka=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Ya=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ot.UNAUTHENTICATED)))}shutdown(){}},qh=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}},Qa=class{constructor(t){this.t=t,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){_t(this.o===void 0,42304);let i=this.i,s=c=>this.i!==i?(i=this.i,e(c)):Promise.resolve(),r=new Je;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Je,t.enqueueRetryable((()=>s(this.currentUser)))};let o=()=>{let c=r;t.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Je)}}),0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_t(typeof i.accessToken=="string",31837,{l:i}),new Ka(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string",2055,{h:t}),new Ot(t)}},jh=class{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},Wh=class{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new jh(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Ot.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Ja=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Xa=class{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,se(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){_t(this.o===void 0,3512);let i=r=>{r.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);let o=r.token!==this.m;return this.m=r.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>i(r)))};let s=r=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){let r=this.V.getImmediate({optional:!0});r?s(r):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ja(this.p));let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(_t(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Ja(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function bP(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Yi=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let s=bP(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<e&&(i+=t.charAt(s[r]%62))}return i}};function J(n,t){return n<t?-1:n>t?1:0}function $h(n,t){let e=Math.min(n.length,t.length);for(let i=0;i<e;i++){let s=n.charAt(i),r=t.charAt(i);if(s!==r)return Vh(s)===Vh(r)?J(s,r):Vh(s)?1:-1}return J(n.length,t.length)}var wP=55296,IP=57343;function Vh(n){let t=n.charCodeAt(0);return t>=wP&&t<=IP}function Qi(n,t,e){return n.length===t.length&&n.every(((i,s)=>e(i,t[s])))}var Py="__name__",Za=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&j(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&j(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let s=0;s<i;s++){let r=n.compareSegments(t.get(s),e.get(s));if(r!==0)return r}return J(t.length,e.length)}static compareSegments(t,e){let i=n.isNumericId(t),s=n.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?n.extractNumericId(t).compare(n.extractNumericId(e)):$h(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ye.fromString(t.substring(4,t.length-2))}},mt=class n extends Za{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new B(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((s=>s.length>0)))}return new n(e)}static emptyPath(){return new n([])}},vP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zt=class n extends Za{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return vP.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Py}static keyField(){return new n([Py])}static fromServerFormat(t){let e=[],i="",s=0,r=()=>{if(i.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},o=!1;for(;s<t.length;){let a=t[s];if(a==="\\"){if(s+1===t.length)throw new B(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new B(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var q=class n{constructor(t){this.path=t}static fromPath(t){return new n(mt.fromString(t))}static fromName(t){return new n(mt.fromString(t).popFirst(5))}static empty(){return new n(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&mt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return mt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new mt(t.slice()))}};function TP(n,t,e){if(!e)throw new B(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function gb(n,t,e,i){if(t===!0&&i===!0)throw new B(L.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Ry(n){if(q.isDocumentKey(n))throw new B(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hr(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":j(12329,{type:typeof n})}function Gr(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new B(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Hr(n);throw new B(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function vt(n,t){let e={typeString:n};return t&&(e.value=t),e}function us(n,t){if(!mb(n))throw new B(L.INVALID_ARGUMENT,"JSON must be an object");let e;for(let i in t)if(t[i]){let s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}let o=n[i];if(s&&typeof o!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){e=`Expected '${i}' field to equal '${r.value}'`;break}}if(e)throw new B(L.INVALID_ARGUMENT,e);return!0}var Cy=-62135596800,ky=1e6,xt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*ky);return new n(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Cy)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ky}_compareTo(t){return this.seconds===t.seconds?J(this.nanoseconds,t.nanoseconds):J(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(us(t,n._jsonSchema))return new n(t.seconds,t.nanoseconds)}valueOf(){let t=this.seconds-Cy;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:vt("string",xt._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};var $=class n{static fromTimestamp(t){return new n(t)}static min(){return new n(new xt(0,0))}static max(){return new n(new xt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Rr=-1,tc=class{constructor(t,e,i,s){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=s}};tc.UNKNOWN_ID=-1;function EP(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=$.fromTimestamp(i===1e9?new xt(e+1,0):new xt(e,i));return new ui(s,q.empty(),t)}function SP(n){return new ui(n.readTime,n.key,Rr)}var ui=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n($.min(),q.empty(),Rr)}static max(){return new n($.max(),q.empty(),Rr)}};function AP(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=q.comparator(n.documentKey,t.documentKey),e!==0?e:J(n.largestBatchId,t.largestBatchId))}var xP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}};async function Ac(n){if(n.code!==L.FAILED_PRECONDITION||n.message!==xP)throw n;U("LocalStore","Unexpectedly lost primary lease")}var V=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n(((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(e,r).next(i,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):n.reject(e)}static resolve(t){return new n(((e,i)=>{e(t)}))}static reject(t){return new n(((e,i)=>{i(t)}))}static waitFor(t){return new n(((e,i)=>{let s=0,r=0,o=!1;t.forEach((a=>{++s,a.next((()=>{++r,o&&r===s&&e()}),(c=>i(c)))})),o=!0,r===s&&e()}))}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next((s=>s?n.resolve(s):i()));return e}static forEach(t,e){let i=[];return t.forEach(((s,r)=>{i.push(e.call(this,s,r))})),this.waitFor(i)}static mapArray(t,e){return new n(((i,s)=>{let r=t.length,o=new Array(r),a=0;for(let c=0;c<r;c++){let u=c;e(t[u]).next((h=>{o[u]=h,++a,a===r&&i(o)}),(h=>s(h)))}}))}static doWhile(t,e){return new n(((i,s)=>{let r=()=>{t()===!0?e().next((()=>{r()}),s):i()};r()}))}};function PP(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function hs(n){return n.name==="IndexedDbTransactionError"}var Ji=class{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}};Ji.ce=-1;var RP=-1;function xc(n){return n==null}function Cr(n){return n===0&&1/n==-1/0}function CP(n){return typeof n=="number"&&Number.isInteger(n)&&!Cr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var _b="";function kP(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Dy(t)),t=DP(n.get(e),t);return Dy(t)}function DP(n,t){let e=t,i=n.length;for(let s=0;s<i;s++){let r=n.charAt(s);switch(r){case"\0":e+="";break;case _b:e+="";break;default:e+=r}}return e}function Dy(n){return n+_b+""}var OP="remoteDocuments",yb="owner";var bb="mutationQueues";var wb="mutations";var Ib="documentMutations",NP="remoteDocumentsV14";var vb="remoteDocumentGlobal";var Tb="targets";var Eb="targetDocuments";var Sb="targetGlobal",Ab="collectionParents";var xb="clientMetadata";var Pb="bundles";var Rb="namedQueries";var MP="indexConfiguration";var VP="indexState";var LP="indexEntries";var Cb="documentOverlays";var FP="globals";var BP=[bb,wb,Ib,OP,Tb,yb,Sb,Eb,xb,vb,Ab,Pb,Rb],iD=[...BP,Cb],UP=[bb,wb,Ib,NP,Tb,yb,Sb,Eb,xb,vb,Ab,Pb,Rb,Cb],zP=UP,qP=[...zP,MP,VP,LP];var sD=[...qP,FP];function Oy(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ds(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function kb(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var Tt=class n{constructor(t,e){this.comparator=t,this.root=e||Ce.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ce.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ce.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){let t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wi(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wi(this.root,t,this.comparator,!0)}},Wi=class{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?i(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ce=class n{constructor(t,e,i,s,r){this.key=t,this.value=e,this.color=i??n.RED,this.left=s??n.EMPTY,this.right=r??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,r){return new n(t??this.key,e??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this,r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,e,i),null):r===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return n.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let t=this.left.check();if(t!==this.right.check())throw j(27949);return t+(this.isRed()?0:1)}};Ce.EMPTY=null,Ce.RED=!0,Ce.BLACK=!1;Ce.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(t,e,i,s,r){return this}insert(t,e,i){return new Ce(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Nt=class n{constructor(t){this.comparator=t,this.data=new Tt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ec(this.data.getIterator())}getIteratorFrom(t){return new ec(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let s=e.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){let t=[];return this.forEach((e=>{t.push(e)})),t}toString(){let t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},ec=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ri=class n{constructor(t){this.fields=t,t.sort(Zt.comparator)}static empty(){return new n([])}unionWith(t){let e=new Nt(Zt.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Qi(this.fields,t.fields,((e,i)=>e.isEqual(i)))}};var nc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ft=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=(function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new nc("Invalid base64 string: "+r):r}})(t);return new n(e)}static fromUint8Array(t){let e=(function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r})(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){let i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return J(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Ft.EMPTY_BYTE_STRING=new Ft("");var jP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(n){if(_t(!!n,39018),typeof n=="string"){let t=0,e=jP.exec(n);if(_t(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function nn(n){return typeof n=="string"?Ft.fromBase64String(n):Ft.fromUint8Array(n)}var Db="server_timestamp",Ob="__type__",Nb="__previous_value__",Mb="__local_write_time__";function Pc(n){return(n?.mapValue?.fields||{})[Ob]?.stringValue===Db}function Rc(n){let t=n.mapValue.fields[Nb];return Pc(t)?Rc(t):t}function kr(n){let t=en(n.mapValue.fields[Mb].timestampValue);return new xt(t.seconds,t.nanos)}var Gh=class{constructor(t,e,i,s,r,o,a,c,u,h,d){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h,this.apiKey=d}},ic="(default)",Dr=class n{constructor(t,e){this.projectId=t,this.database=e||ic}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ic}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};function Vb(n,t){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new B(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dr(n.options.projectId,t)}var hf="__type__",Lb="__max__",ja={mapValue:{fields:{__type__:{stringValue:Lb}}}},df="__vector__",Xi="value";function Dn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pc(n)?4:Bb(n)?9007199254740991:Fb(n)?10:11:j(28295,{value:n})}function Ne(n,t){if(n===t)return!0;let e=Dn(n);if(e!==Dn(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return kr(n).isEqual(kr(t));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;let o=en(s.timestampValue),a=en(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(s,r){return nn(s.bytesValue).isEqual(nn(r.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(s,r){return ft(s.geoPointValue.latitude)===ft(r.geoPointValue.latitude)&&ft(s.geoPointValue.longitude)===ft(r.geoPointValue.longitude)})(n,t);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return ft(s.integerValue)===ft(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){let o=ft(s.doubleValue),a=ft(r.doubleValue);return o===a?Cr(o)===Cr(a):isNaN(o)&&isNaN(a)}return!1})(n,t);case 9:return Qi(n.arrayValue.values||[],t.arrayValue.values||[],Ne);case 10:case 11:return(function(s,r){let o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(Oy(o)!==Oy(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ne(o[c],a[c])))return!1;return!0})(n,t);default:return j(52216,{left:n})}}function Or(n,t){return(n.values||[]).find((e=>Ne(e,t)))!==void 0}function Zi(n,t){if(n===t)return 0;let e=Dn(n),i=Dn(t);if(e!==i)return J(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return J(n.booleanValue,t.booleanValue);case 2:return(function(r,o){let a=ft(r.integerValue||r.doubleValue),c=ft(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,t);case 3:return Ny(n.timestampValue,t.timestampValue);case 4:return Ny(kr(n),kr(t));case 5:return $h(n.stringValue,t.stringValue);case 6:return(function(r,o){let a=nn(r),c=nn(o);return a.compareTo(c)})(n.bytesValue,t.bytesValue);case 7:return(function(r,o){let a=r.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=J(a[u],c[u]);if(h!==0)return h}return J(a.length,c.length)})(n.referenceValue,t.referenceValue);case 8:return(function(r,o){let a=J(ft(r.latitude),ft(o.latitude));return a!==0?a:J(ft(r.longitude),ft(o.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return My(n.arrayValue,t.arrayValue);case 10:return(function(r,o){let a=r.fields||{},c=o.fields||{},u=a[Xi]?.arrayValue,h=c[Xi]?.arrayValue,d=J(u?.values?.length||0,h?.values?.length||0);return d!==0?d:My(u,h)})(n.mapValue,t.mapValue);case 11:return(function(r,o){if(r===ja.mapValue&&o===ja.mapValue)return 0;if(r===ja.mapValue)return 1;if(o===ja.mapValue)return-1;let a=r.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){let p=$h(c[d],h[d]);if(p!==0)return p;let m=Zi(a[c[d]],u[h[d]]);if(m!==0)return m}return J(c.length,h.length)})(n.mapValue,t.mapValue);default:throw j(23264,{he:e})}}function Ny(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return J(n,t);let e=en(n),i=en(t),s=J(e.seconds,i.seconds);return s!==0?s:J(e.nanos,i.nanos)}function My(n,t){let e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){let r=Zi(e[s],i[s]);if(r)return r}return J(e.length,i.length)}function ts(n){return Kh(n)}function Kh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){let i=en(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return nn(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return q.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",s=!0;for(let r of e.values||[])s?s=!1:i+=",",i+=Kh(r);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){let i=Object.keys(e.fields||{}).sort(),s="{",r=!0;for(let o of i)r?r=!1:s+=",",s+=`${o}:${Kh(e.fields[o])}`;return s+"}"})(n.mapValue):j(61005,{value:n})}function Ha(n){switch(Dn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Rc(n);return t?16+Ha(t):16;case 5:return 2*n.stringValue.length;case 6:return nn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,r)=>s+Ha(r)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return ds(i.fields,((r,o)=>{s+=r.length+Ha(o)})),s})(n.mapValue);default:throw j(13486,{value:n})}}function ff(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Yh(n){return!!n&&"integerValue"in n}function pf(n){return!!n&&"arrayValue"in n}function Vy(n){return!!n&&"nullValue"in n}function Ly(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lh(n){return!!n&&"mapValue"in n}function Fb(n){return(n?.mapValue?.fields||{})[hf]?.stringValue===df}function Ar(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){let t={mapValue:{fields:{}}};return ds(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Ar(i))),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ar(n.arrayValue.values[e]);return t}return{...n}}function Bb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Lb}var oD={mapValue:{fields:{[hf]:{stringValue:df},[Xi]:{arrayValue:{}}}}};var Re=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Lh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ar(e)}setAll(t){let e=Zt.emptyPath(),i={},s=[];t.forEach(((o,a)=>{if(!e.isImmediateParentOf(a)){let c=this.getFieldsMap(e);this.applyChanges(c,i,s),i={},s=[],e=a.popLast()}o?i[a.lastSegment()]=Ar(o):s.push(a.lastSegment())}));let r=this.getFieldsMap(e);this.applyChanges(r,i,s)}delete(t){let e=this.field(t.popLast());Lh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ne(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];Lh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){ds(e,((s,r)=>t[s]=r));for(let s of i)delete t[s]}clone(){return new n(Ar(this.value))}};var pe=class n{constructor(t,e,i,s,r,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new n(t,0,$.min(),$.min(),$.min(),Re.empty(),0)}static newFoundDocument(t,e,i,s){return new n(t,1,e,$.min(),i,s,0)}static newNoDocument(t,e){return new n(t,2,e,$.min(),$.min(),Re.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,$.min(),$.min(),Re.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Re.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Re.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hi=class{constructor(t,e){this.position=t,this.inclusive=e}};function Fy(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){let r=t[s],o=n.position[s];if(r.field.isKeyField()?i=q.comparator(q.fromName(o.referenceValue),e.key):i=Zi(o,e.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function By(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ne(n.position[e],t.position[e]))return!1;return!0}var On=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function WP(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var sc=class{},It=class n extends sc{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Jh(t,e,i):e==="array-contains"?new td(t,i):e==="in"?new ed(t,i):e==="not-in"?new nd(t,i):e==="array-contains-any"?new id(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Xh(t,i):new Zh(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Zi(e,this.value)):e!==null&&Dn(this.value)===Dn(e)&&this.matchesComparison(Zi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},oe=class n extends sc{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new n(t,e)}matches(t){return Ub(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Ub(n){return n.op==="and"}function zb(n){return $P(n)&&Ub(n)}function $P(n){for(let t of n.filters)if(t instanceof oe)return!1;return!0}function Qh(n){if(n instanceof It)return n.field.canonicalString()+n.op.toString()+ts(n.value);if(zb(n))return n.filters.map((t=>Qh(t))).join(",");{let t=n.filters.map((e=>Qh(e))).join(",");return`${n.op}(${t})`}}function qb(n,t){return n instanceof It?(function(i,s){return s instanceof It&&i.op===s.op&&i.field.isEqual(s.field)&&Ne(i.value,s.value)})(n,t):n instanceof oe?(function(i,s){return s instanceof oe&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((r,o,a)=>r&&qb(o,s.filters[a])),!0):!1})(n,t):void j(19439)}function jb(n){return n instanceof It?(function(e){return`${e.field.canonicalString()} ${e.op} ${ts(e.value)}`})(n):n instanceof oe?(function(e){return e.op.toString()+" {"+e.getFilters().map(jb).join(" ,")+"}"})(n):"Filter"}var Jh=class extends It{constructor(t,e,i){super(t,e,i),this.key=q.fromName(i.referenceValue)}matches(t){let e=q.comparator(t.key,this.key);return this.matchesComparison(e)}},Xh=class extends It{constructor(t,e){super(t,"in",e),this.keys=Wb("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}},Zh=class extends It{constructor(t,e){super(t,"not-in",e),this.keys=Wb("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}};function Wb(n,t){return(t.arrayValue?.values||[]).map((e=>q.fromName(e.referenceValue)))}var td=class extends It{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return pf(e)&&Or(e.arrayValue,this.value)}},ed=class extends It{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Or(this.value.arrayValue,e)}},nd=class extends It{constructor(t,e){super(t,"not-in",e)}matches(t){if(Or(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Or(this.value.arrayValue,e)}},id=class extends It{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!pf(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>Or(this.value.arrayValue,i)))}};var sd=class{constructor(t,e=null,i=[],s=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}};function Uy(n,t=null,e=[],i=[],s=null,r=null,o=null){return new sd(n,t,e,i,s,r,o)}function gf(n){let t=tt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>Qh(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(r){return r.field.canonicalString()+r.dir})(i))).join(","),xc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>ts(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>ts(i))).join(",")),t.Te=e}return t.Te}function mf(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!WP(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!qb(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!By(n.startAt,t.startAt)&&By(n.endAt,t.endAt)}function rd(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Nn=class{constructor(t,e=null,i=[],s=[],r=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function HP(n,t,e,i,s,r,o,a){return new Nn(n,t,e,i,s,r,o,a)}function _f(n){return new Nn(n)}function zy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GP(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function yf(n){return n.collectionGroup!==null}function $i(n){let t=tt(n);if(t.Ie===null){t.Ie=[];let e=new Set;for(let r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(Zt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new On(r,i))})),e.has(Zt.keyField().canonicalString())||t.Ie.push(new On(Zt.keyField(),i))}return t.Ie}function ke(n){let t=tt(n);return t.Ee||(t.Ee=KP(t,$i(n))),t.Ee}function KP(n,t){if(n.limitType==="F")return Uy(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((s=>{let r=s.dir==="desc"?"asc":"desc";return new On(s.field,r)}));let e=n.endAt?new hi(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new hi(n.startAt.position,n.startAt.inclusive):null;return Uy(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Cc(n,t){let e=n.filters.concat([t]);return new Nn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function $b(n,t){let e=n.explicitOrderBy.concat([t]);return new Nn(n.path,n.collectionGroup,e,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function rc(n,t,e){return new Nn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function kc(n,t){return mf(ke(n),ke(t))&&n.limitType===t.limitType}function Hb(n){return`${gf(ke(n))}|lt:${n.limitType}`}function zi(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((s=>jb(s))).join(", ")}]`),xc(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>ts(s))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>ts(s))).join(",")),`Target(${i})`})(ke(n))}; limitType=${n.limitType})`}function Dc(n,t){return t.isFoundDocument()&&(function(i,s){let r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):q.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)})(n,t)&&(function(i,s){for(let r of $i(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(n,t)&&(function(i,s){for(let r of i.filters)if(!r.matches(s))return!1;return!0})(n,t)&&(function(i,s){return!(i.startAt&&!(function(o,a,c){let u=Fy(o,a,c);return o.inclusive?u<=0:u<0})(i.startAt,$i(i),s)||i.endAt&&!(function(o,a,c){let u=Fy(o,a,c);return o.inclusive?u>=0:u>0})(i.endAt,$i(i),s))})(n,t)}function YP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Gb(n){return(t,e)=>{let i=!1;for(let s of $i(n)){let r=QP(s,t,e);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function QP(n,t,e){let i=n.field.isKeyField()?q.comparator(t.key,e.key):(function(r,o,a){let c=o.data.field(r),u=a.data.field(r);return c!==null&&u!==null?Zi(c,u):j(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return j(19790,{direction:n.dir})}}var sn=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){ds(this.inner,((e,i)=>{for(let[s,r]of i)t(s,r)}))}isEmpty(){return kb(this.inner)}size(){return this.innerSize}};var JP=new Tt(q.comparator);function Mn(){return JP}var Kb=new Tt(q.comparator);function Sr(...n){let t=Kb;for(let e of n)t=t.insert(e.key,e);return t}function XP(n){let t=Kb;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function oi(){return xr()}function Yb(){return xr()}function xr(){return new sn((n=>n.toString()),((n,t)=>n.isEqual(t)))}var aD=new Tt(q.comparator),ZP=new Nt(q.comparator);function Z(...n){let t=ZP;for(let e of n)t=t.add(e);return t}var tR=new Nt(J);function eR(){return tR}function bf(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cr(t)?"-0":t}}function Qb(n){return{integerValue:""+n}}function nR(n,t){return CP(t)?Qb(t):bf(n,t)}var es=class{constructor(){this._=void 0}};function iR(n,t,e){return n instanceof Nr?(function(s,r){let o={fields:{[Ob]:{stringValue:Db},[Mb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Pc(r)&&(r=Rc(r)),r&&(o.fields[Nb]=r),{mapValue:o}})(e,t):n instanceof ns?Jb(n,t):n instanceof is?Xb(n,t):(function(s,r){let o=rR(s,r),a=qy(o)+qy(s.Ae);return Yh(o)&&Yh(s.Ae)?Qb(a):bf(s.serializer,a)})(n,t)}function sR(n,t,e){return n instanceof ns?Jb(n,t):n instanceof is?Xb(n,t):e}function rR(n,t){return n instanceof Mr?(function(i){return Yh(i)||(function(r){return!!r&&"doubleValue"in r})(i)})(t)?t:{integerValue:0}:null}var Nr=class extends es{},ns=class extends es{constructor(t){super(),this.elements=t}};function Jb(n,t){let e=Zb(t);for(let i of n.elements)e.some((s=>Ne(s,i)))||e.push(i);return{arrayValue:{values:e}}}var is=class extends es{constructor(t){super(),this.elements=t}};function Xb(n,t){let e=Zb(t);for(let i of n.elements)e=e.filter((s=>!Ne(s,i)));return{arrayValue:{values:e}}}var Mr=class extends es{constructor(t,e){super(),this.serializer=t,this.Ae=e}};function qy(n){return ft(n.integerValue||n.doubleValue)}function Zb(n){return pf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function oR(n,t){return n.field.isEqual(t.field)&&(function(i,s){return i instanceof ns&&s instanceof ns||i instanceof is&&s instanceof is?Qi(i.elements,s.elements,Ne):i instanceof Mr&&s instanceof Mr?Ne(i.Ae,s.Ae):i instanceof Nr&&s instanceof Nr})(n.transform,t.transform)}var Hi=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Ga(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Vr=class{};function tw(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new oc(n.key,Hi.none()):new Lr(n.key,n.data,Hi.none());{let e=n.data,i=Re.empty(),s=new Nt(Zt.comparator);for(let r of t.fields)if(!s.has(r)){let o=e.field(r);o===null&&r.length>1&&(r=r.popLast(),o=e.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new ss(n.key,i,new ri(s.toArray()),Hi.none())}}function aR(n,t,e){n instanceof Lr?(function(s,r,o){let a=s.value.clone(),c=Wy(s.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,t,e):n instanceof ss?(function(s,r,o){if(!Ga(s.precondition,r))return void r.convertToUnknownDocument(o.version);let a=Wy(s.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(ew(s)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,t,e):(function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,e)}function Pr(n,t,e,i){return n instanceof Lr?(function(r,o,a,c){if(!Ga(r.precondition,o))return a;let u=r.value.clone(),h=$y(r.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,t,e,i):n instanceof ss?(function(r,o,a,c){if(!Ga(r.precondition,o))return a;let u=$y(r.fieldTransforms,c,o),h=o.data;return h.setAll(ew(r)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((d=>d.field)))})(n,t,e,i):(function(r,o,a){return Ga(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,t,e)}function jy(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Qi(i,s,((r,o)=>oR(r,o)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Lr=class extends Vr{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},ss=class extends Vr{constructor(t,e,i,s,r=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}};function ew(n){let t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}})),t}function Wy(n,t,e){let i=new Map;_t(n.length===e.length,32656,{Ve:e.length,de:n.length});for(let s=0;s<e.length;s++){let r=n[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,sR(o,a,e[s]))}return i}function $y(n,t,e){let i=new Map;for(let s of n){let r=s.transform,o=e.data.field(s.field);i.set(s.field,iR(r,o,t))}return i}var oc=class extends Vr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var od=class{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){let r=this.mutations[s];r.key.isEqual(t.key)&&aR(r,t,i[s])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=Pr(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=Pr(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=Yb();return this.mutations.forEach((s=>{let r=t.get(s.key),o=r.overlayedDocument,a=this.applyToLocalView(o,r.mutatedFields);a=e.has(s.key)?null:a;let c=tw(o,a);c!==null&&i.set(s.key,c),o.isValidDocument()||o.convertToNoDocument($.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Z())}isEqual(t){return this.batchId===t.batchId&&Qi(this.mutations,t.mutations,((e,i)=>jy(e,i)))&&Qi(this.baseMutations,t.baseMutations,((e,i)=>jy(e,i)))}};var ad=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var cd=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var St,X;function nw(n){if(n===void 0)return Ze("GRPC error has no .code"),L.UNKNOWN;switch(n){case St.OK:return L.OK;case St.CANCELLED:return L.CANCELLED;case St.UNKNOWN:return L.UNKNOWN;case St.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case St.INTERNAL:return L.INTERNAL;case St.UNAVAILABLE:return L.UNAVAILABLE;case St.UNAUTHENTICATED:return L.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case St.NOT_FOUND:return L.NOT_FOUND;case St.ALREADY_EXISTS:return L.ALREADY_EXISTS;case St.PERMISSION_DENIED:return L.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case St.ABORTED:return L.ABORTED;case St.OUT_OF_RANGE:return L.OUT_OF_RANGE;case St.UNIMPLEMENTED:return L.UNIMPLEMENTED;case St.DATA_LOSS:return L.DATA_LOSS;default:return j(39323,{code:n})}}(X=St||(St={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var cR=null;function lR(){return new TextEncoder}var uR=new Ye([4294967295,4294967295],0);function Hy(n){let t=lR().encode(n),e=new Ch;return e.update(t),new Uint8Array(e.digest())}function Gy(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Ye([e,i],0),new Ye([s,r],0)]}var ld=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ai(`Invalid padding: ${e}`);if(i<0)throw new ai(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ai(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new ai(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Ye.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(Ye.fromNumber(i)));return s.compare(uR)===1&&(s=new Ye([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;let e=Hy(t),[i,s]=Gy(e);for(let r=0;r<this.hashCount;r++){let o=this.ye(i,s,r);if(!this.we(o))return!1}return!0}static create(t,e,i){let s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new n(r,s,e);return i.forEach((a=>o.insert(a))),o}insert(t){if(this.ge===0)return;let e=Hy(t),[i,s]=Gy(e);for(let r=0;r<this.hashCount;r++){let o=this.ye(i,s,r);this.be(o)}}be(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},ai=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ac=class n{constructor(t,e,i,s,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let s=new Map;return s.set(t,Fr.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n($.min(),s,new Tt(J),Mn(),Z())}},Fr=class n{constructor(t,e,i,s,r){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,Z(),Z(),Z())}};var Gi=class{constructor(t,e,i,s){this.Se=t,this.removedTargetIds=e,this.key=i,this.De=s}},cc=class{constructor(t,e){this.targetId=t,this.Ce=e}},lc=class{constructor(t,e,i=Ft.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}},uc=class{constructor(){this.ve=0,this.Fe=Ky(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Z(),e=Z(),i=Z();return this.Fe.forEach(((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:j(38017,{changeType:r})}})),new Fr(this.Me,this.xe,t,e,i)}Ke(){this.Oe=!1,this.Fe=Ky()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},ud=class{constructor(t){this.Ge=t,this.ze=new Map,this.je=Mn(),this.He=Wa(),this.Je=Wa(),this.Ze=new Tt(J)}Xe(t){for(let e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(let e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{let i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:j(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,s)=>{this.rt(s)&&e(s)}))}st(t){let e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){let r=s.target;if(rd(r))if(i===0){let o=new q(r.path);this.et(e,o,pe.newNoDocument(o,$.min()))}else _t(i===1,20013,{expectedCount:i});else{let o=this._t(e);if(o!==i){let a=this.ut(t),c=a?this.ct(a,t,o):1;if(c!==0){this.it(e);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,u)}cR?.lt((function(h,d,p,m,_){let y={localCacheCount:h,existenceFilterCount:d.count,databaseId:p.database,projectId:p.projectId},v=d.unchangedNames;return v&&(y.bloomFilter={applied:_===0,hashCount:v?.hashCount??0,bitmapLength:v?.bits?.bitmap?.length??0,padding:v?.bits?.padding??0,mightContain:x=>m?.mightContain(x)??!1}),y})(o,t.Ce,this.Ge.ht(),a,c))}}}}ut(t){let e=t.Ce.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=e,o,a;try{o=nn(i).toUint8Array()}catch(c){if(c instanceof nc)return tn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ld(o,s,r)}catch(c){return tn(c instanceof ai?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){let i=this.Ge.getRemoteKeysForTarget(e),s=0;return i.forEach((r=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(e,r,null),s++)})),s}Tt(t){let e=new Map;this.ze.forEach(((r,o)=>{let a=this.ot(o);if(a){if(r.current&&rd(a.target)){let c=new q(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,pe.newNoDocument(c,t))}r.Be&&(e.set(o,r.ke()),r.Ke())}}));let i=Z();this.Je.forEach(((r,o)=>{let a=!0;o.forEachWhile((c=>{let u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(i=i.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(t)));let s=new ac(t,e,this.Ze,this.je,i);return this.je=Mn(),this.He=Wa(),this.Je=Wa(),this.Ze=new Tt(J),s}Ye(t,e){if(!this.rt(t))return;let i=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,i),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;let s=this.nt(t);this.Et(t,e)?s.qe(e,1):s.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){let e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new uc,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new Nt(J),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new Nt(J),this.He=this.He.insert(t,e)),e}rt(t){let e=this.ot(t)!==null;return e||U("WatchChangeAggregator","Detected inactive target",t),e}ot(t){let e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new uc),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}};function Wa(){return new Tt(q.comparator)}function Ky(){return new Tt(q.comparator)}var hR={asc:"ASCENDING",desc:"DESCENDING"},dR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fR={and:"AND",or:"OR"},hd=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function dd(n,t){return n.useProto3Json||xc(t)?t:{value:t}}function fd(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function iw(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Ki(n){return _t(!!n,49232),$.fromTimestamp((function(e){let i=en(e);return new xt(i.seconds,i.nanos)})(n))}function sw(n,t){return pd(n,t).canonicalString()}function pd(n,t){let e=(function(s){return new mt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return t===void 0?e:e.child(t)}function rw(n){let t=mt.fromString(n);return _t(uw(t),10190,{key:t.toString()}),t}function Fh(n,t){let e=rw(t);if(e.get(1)!==n.databaseId.projectId)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new q(aw(e))}function ow(n,t){return sw(n.databaseId,t)}function pR(n){let t=rw(n);return t.length===4?mt.emptyPath():aw(t)}function Yy(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aw(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function gR(n,t){let e;if("targetChange"in t){t.targetChange;let i=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:j(39313,{state:u})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=(function(u,h){return u.useProto3Json?(_t(h===void 0||typeof h=="string",58123),Ft.fromBase64String(h||"")):(_t(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ft.fromUint8Array(h||new Uint8Array))})(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&(function(u){let h=u.code===void 0?L.UNKNOWN:nw(u.code);return new B(h,u.message||"")})(o);e=new lc(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let s=Fh(n,i.document.name),r=Ki(i.document.updateTime),o=i.document.createTime?Ki(i.document.createTime):$.min(),a=new Re({mapValue:{fields:i.document.fields}}),c=pe.newFoundDocument(s,r,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];e=new Gi(u,h,c.key,c)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let s=Fh(n,i.document),r=i.readTime?Ki(i.readTime):$.min(),o=pe.newNoDocument(s,r),a=i.removedTargetIds||[];e=new Gi([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let s=Fh(n,i.document),r=i.removedTargetIds||[];e=new Gi([],r,s,null)}else{if(!("filter"in t))return j(11601,{Vt:t});{t.filter;let i=t.filter;i.targetId;let{count:s=0,unchangedNames:r}=i,o=new cd(s,r),a=i.targetId;e=new cc(a,o)}}return e}function mR(n,t){return{documents:[ow(n,t.path)]}}function _R(n,t){let e={structuredQuery:{}},i=t.path,s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=ow(n,s);let r=(function(u){if(u.length!==0)return lw(oe.create(u,"and"))})(t.filters);r&&(e.structuredQuery.where=r);let o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:qi(p.field),direction:wR(p.dir)}})(h)))})(t.orderBy);o&&(e.structuredQuery.orderBy=o);let a=dd(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(t.endAt)),{ft:e,parent:s}}function yR(n){let t=pR(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,s=null;if(i>0){_t(i===1,65062);let h=e.from[0];h.allDescendants?s=h.collectionId:t=t.child(h.collectionId)}let r=[];e.where&&(r=(function(d){let p=cw(d);return p instanceof oe&&zb(p)?p.getFilters():[p]})(e.where));let o=[];e.orderBy&&(o=(function(d){return d.map((p=>(function(_){return new On(ji(_.field),(function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(p)))})(e.orderBy));let a=null;e.limit&&(a=(function(d){let p;return p=typeof d=="object"?d.value:d,xc(p)?null:p})(e.limit));let c=null;e.startAt&&(c=(function(d){let p=!!d.before,m=d.values||[];return new hi(m,p)})(e.startAt));let u=null;return e.endAt&&(u=(function(d){let p=!d.before,m=d.values||[];return new hi(m,p)})(e.endAt)),HP(t,s,o,r,a,"F",c,u)}function bR(n,t){let e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function cw(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=ji(e.unaryFilter.field);return It.create(i,"==",{doubleValue:NaN});case"IS_NULL":let s=ji(e.unaryFilter.field);return It.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=ji(e.unaryFilter.field);return It.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ji(e.unaryFilter.field);return It.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}})(n):n.fieldFilter!==void 0?(function(e){return It.create(ji(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return oe.create(e.compositeFilter.filters.map((i=>cw(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return j(1026)}})(e.compositeFilter.op))})(n):j(30097,{filter:n})}function wR(n){return hR[n]}function IR(n){return dR[n]}function vR(n){return fR[n]}function qi(n){return{fieldPath:n.canonicalString()}}function ji(n){return Zt.fromServerFormat(n.fieldPath)}function lw(n){return n instanceof It?(function(e){if(e.op==="=="){if(Ly(e.value))return{unaryFilter:{field:qi(e.field),op:"IS_NAN"}};if(Vy(e.value))return{unaryFilter:{field:qi(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Ly(e.value))return{unaryFilter:{field:qi(e.field),op:"IS_NOT_NAN"}};if(Vy(e.value))return{unaryFilter:{field:qi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(e.field),op:IR(e.op),value:e.value}}})(n):n instanceof oe?(function(e){let i=e.getFilters().map((s=>lw(s)));return i.length===1?i[0]:{compositeFilter:{op:vR(e.op),filters:i}}})(n):j(54877,{filter:n})}function uw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function hw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var Br=class n{constructor(t,e,i,s,r=$.min(),o=$.min(),a=Ft.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var gd=class{constructor(t){this.yt=t}};function dw(n){let t=yR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rc(t,t.limit,"L"):t}var hc=class{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(ft(t.integerValue));else if("doubleValue"in t){let i=ft(t.doubleValue);isNaN(i)?this.Ft(e,13):(this.Ft(e,15),Cr(i)?e.Mt(0):e.Mt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Ft(e,20),typeof i=="string"&&(i=en(i)),e.xt(`${i.seconds||""}`),e.Mt(i.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(nn(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.Ft(e,45),e.Mt(i.latitude||0),e.Mt(i.longitude||0)}else"mapValue"in t?Bb(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Fb(t)?this.kt(t.mapValue,e):(this.Kt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.qt(t.arrayValue,e),this.Nt(e)):j(19022,{Ut:t})}Ot(t,e){this.Ft(e,25),this.$t(t,e)}$t(t,e){e.xt(t)}Kt(t,e){let i=t.fields||{};this.Ft(e,55);for(let s of Object.keys(i))this.Ot(s,e),this.Ct(i[s],e)}kt(t,e){let i=t.fields||{};this.Ft(e,53);let s=Xi,r=i[s].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(ft(r)),this.Ot(s,e),this.Ct(i[s],e)}qt(t,e){let i=t.values||[];this.Ft(e,50);for(let s of i)this.Ct(s,e)}Lt(t,e){this.Ft(e,37),q.fromName(t).path.forEach((i=>{this.Ft(e,60),this.$t(i,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}};hc.Wt=new hc;var md=class{constructor(){this.Sn=new _d}addToCollectionParentIndex(t,e){return this.Sn.add(e),V.resolve()}getCollectionParents(t,e){return V.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return V.resolve()}deleteFieldIndex(t,e){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,e){return V.resolve()}getDocumentsMatchingTarget(t,e){return V.resolve(null)}getIndexType(t,e){return V.resolve(0)}getFieldIndexes(t,e){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,e){return V.resolve(ui.min())}getMinOffsetFromCollectionGroup(t,e){return V.resolve(ui.min())}updateCollectionGroup(t,e,i){return V.resolve()}updateIndexEntries(t,e){return V.resolve()}},_d=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new Nt(mt.comparator),r=!s.has(i);return this.index[e]=s.add(i),r}has(t){let e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Nt(mt.comparator)).toArray()}};var cD=new Uint8Array(0);var Qy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fw=41943040,re=class n{static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}};re.DEFAULT_COLLECTION_PERCENTILE=10,re.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,re.DEFAULT=new re(fw,re.DEFAULT_COLLECTION_PERCENTILE,re.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),re.DISABLED=new re(-1,0,0);var Ur=class n{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var Jy="LruGarbageCollector",TR=1048576;function Xy([n,t],[e,i]){let s=J(n,e);return s===0?J(t,i):s}var yd=class{constructor(t){this.Pr=t,this.buffer=new Nt(Xy),this.Tr=0}Ir(){return++this.Tr}Er(t){let e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();Xy(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},bd=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){U(Jy,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){hs(e)?U(Jy,"Ignoring IndexedDB error during garbage collection: ",e):await Ac(e)}await this.Ar(3e5)}))}},wd=class{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return V.resolve(Ji.ce);let i=new yd(e);return this.Vr.forEachTarget(t,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(t,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.Vr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Qy)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qy):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let i,s,r,o,a,c,u,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(t,s)))).next((d=>(i=d,a=Date.now(),this.removeTargets(t,i,e)))).next((d=>(r=d,c=Date.now(),this.removeOrphanedDocuments(t,i)))).next((d=>(u=Date.now(),Ui()<=K.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:d}))))}};function ER(n,t){return new wd(n,t)}var Id=class{constructor(){this.changes=new sn((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,pe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?V.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var vd=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var Td=class{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(i=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(i!==null&&Pr(i.mutation,s,ri.empty(),xt.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Z()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Z()){let s=oi();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,i).next((r=>{let o=Sr();return r.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(t,e){let i=oi();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Z())))}populateOverlays(t,e,i){let s=[];return i.forEach((r=>{e.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(t,s).next((r=>{r.forEach(((o,a)=>{e.set(o,a)}))}))}computeViews(t,e,i,s){let r=Mn(),o=xr(),a=(function(){return xr()})();return e.forEach(((c,u)=>{let h=i.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof ss)?r=r.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Pr(h.mutation,u,h.mutation.getFieldMask(),xt.now())):o.set(u.key,ri.empty())})),this.recalculateAndSaveOverlays(t,r).next((c=>(c.forEach(((u,h)=>o.set(u,h))),e.forEach(((u,h)=>a.set(u,new vd(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(t,e){let i=xr(),s=new Tt(((o,a)=>o-a)),r=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((o=>{for(let a of o)a.keys().forEach((c=>{let u=e.get(c);if(u===null)return;let h=i.get(c)||ri.empty();h=a.applyToLocalView(u,h),i.set(c,h);let d=(s.get(a.batchId)||Z()).add(c);s=s.insert(a.batchId,d)}))})).next((()=>{let o=[],a=s.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,d=Yb();h.forEach((p=>{if(!r.has(p)){let m=tw(e.get(p),i.get(p));m!==null&&d.set(p,m),r=r.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return V.waitFor(o)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,s){return GP(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):yf(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next((r=>{let o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-r.size):V.resolve(oi()),a=Rr,c=r;return o.next((u=>V.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?V.resolve():this.remoteDocumentCache.getEntry(t,h).next((p=>{c=c.insert(h,p)}))))).next((()=>this.populateOverlays(t,u,r))).next((()=>this.computeViews(t,c,u,Z()))).next((h=>({batchId:a,changes:XP(h)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new q(e)).next((i=>{let s=Sr();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){let r=e.collectionGroup,o=Sr();return this.indexManager.getCollectionParents(t,r).next((a=>V.forEach(a,(c=>{let u=(function(d,p){return new Nn(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(e,c.child(r));return this.getDocumentsMatchingCollectionQuery(t,u,i,s).next((h=>{h.forEach(((d,p)=>{o=o.insert(d,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,e,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r,s)))).next((o=>{r.forEach(((c,u)=>{let h=u.getKey();o.get(h)===null&&(o=o.insert(h,pe.newInvalidDocument(h)))}));let a=Sr();return o.forEach(((c,u)=>{let h=r.get(c);h!==void 0&&Pr(h.mutation,u,ri.empty(),xt.now()),Dc(e,u)&&(a=a.insert(c,u))})),a}))}};var Ed=class{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return V.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:Ki(s.createTime)}})(e)),V.resolve()}getNamedQuery(t,e){return V.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(s){return{name:s.name,query:dw(s.bundledQuery),readTime:Ki(s.readTime)}})(e)),V.resolve()}};var Sd=class{constructor(){this.overlays=new Tt(q.comparator),this.Lr=new Map}getOverlay(t,e){return V.resolve(this.overlays.get(e))}getOverlays(t,e){let i=oi();return V.forEach(e,(s=>this.getOverlay(t,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((s,r)=>{this.bt(t,e,r)})),V.resolve()}removeOverlaysForBatchId(t,e,i){let s=this.Lr.get(i);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.Lr.delete(i)),V.resolve()}getOverlaysForCollection(t,e,i){let s=oi(),r=e.length+1,o=new q(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===r&&c.largestBatchId>i&&s.set(c.getKey(),c)}return V.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let r=new Tt(((u,h)=>u-h)),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>i){let h=r.get(u.largestBatchId);h===null&&(h=oi(),r=r.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=oi(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return V.resolve(a)}bt(t,e,i){let s=this.overlays.get(i.key);if(s!==null){let o=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new ad(e,i));let r=this.Lr.get(e);r===void 0&&(r=Z(),this.Lr.set(e,r)),this.Lr.set(e,r.add(i.key))}};var Ad=class{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,V.resolve()}};var zr=class{constructor(){this.kr=new Nt(At.Kr),this.qr=new Nt(At.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){let i=new At(t,e);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Wr(new At(t,e))}Qr(t,e){t.forEach((i=>this.removeReference(i,e)))}Gr(t){let e=new q(new mt([])),i=new At(e,t),s=new At(e,t+1),r=[];return this.qr.forEachInRange([i,s],(o=>{this.Wr(o),r.push(o.key)})),r}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){let e=new q(new mt([])),i=new At(e,t),s=new At(e,t+1),r=Z();return this.qr.forEachInRange([i,s],(o=>{r=r.add(o.key)})),r}containsKey(t){let e=new At(t,0),i=this.kr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},At=class{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return q.comparator(t.key,e.key)||J(t.Hr,e.Hr)}static Ur(t,e){return J(t.Hr,e.Hr)||q.comparator(t.key,e.key)}};var xd=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new Nt(At.Kr)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){let r=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new od(r,e,i,s);this.mutationQueue.push(o);for(let a of s)this.Jr=this.Jr.add(new At(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(t,e){return V.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,s=this.Xr(i),r=s<0?0:s;return V.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?RP:this.Yn-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new At(e,0),s=new At(e,Number.POSITIVE_INFINITY),r=[];return this.Jr.forEachInRange([i,s],(o=>{let a=this.Zr(o.Hr);r.push(a)})),V.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Nt(J);return e.forEach((s=>{let r=new At(s,0),o=new At(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([r,o],(a=>{i=i.add(a.Hr)}))})),V.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,s=i.length+1,r=i;q.isDocumentKey(r)||(r=r.child(""));let o=new At(new q(r),0),a=new Nt(J);return this.Jr.forEachWhile((c=>{let u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Hr)),!0)}),o),V.resolve(this.Yr(a))}Yr(t){let e=[];return t.forEach((i=>{let s=this.Zr(i);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){_t(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return V.forEach(e.mutations,(s=>{let r=new At(s.key,e.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,e){let i=new At(e,0),s=this.Jr.firstAfterOrEqual(i);return V.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){let e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var Pd=class{constructor(t){this.ti=t,this.docs=(function(){return new Tt(q.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,s=this.docs.get(i),r=s?s.size:0,o=this.ti(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return V.resolve(i?i.document.mutableCopy():pe.newInvalidDocument(e))}getEntries(t,e){let i=Mn();return e.forEach((s=>{let r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():pe.newInvalidDocument(s))})),V.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let r=Mn(),o=e.path,a=new q(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||AP(SP(h),i)<=0||(s.has(h.key)||Dc(e,h))&&(r=r.insert(h.key,h.mutableCopy()))}return V.resolve(r)}getAllFromCollectionGroup(t,e,i,s){j(9500)}ni(t,e){return V.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new Rd(this)}getSize(t){return V.resolve(this.size)}},Rd=class extends Id{constructor(t){super(),this.Mr=t}applyChanges(t){let e=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?e.push(this.Mr.addEntry(t,s)):this.Mr.removeEntry(i)})),V.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}};var Cd=class{constructor(t){this.persistence=t,this.ri=new sn((e=>gf(e)),mf),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.ii=0,this.si=new zr,this.targetCount=0,this.oi=Ur._r()}forEachTarget(t,e){return this.ri.forEach(((i,s)=>e(s))),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.ii&&(this.ii=e),V.resolve()}lr(t){this.ri.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.oi=new Ur(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,V.resolve()}updateTargetData(t,e){return this.lr(e),V.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,e,i){let s=0,r=[];return this.ri.forEach(((o,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.ri.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)})),V.waitFor(r).next((()=>s))}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,e){let i=this.ri.get(e)||null;return V.resolve(i)}addMatchingKeys(t,e,i){return this.si.$r(e,i),V.resolve()}removeMatchingKeys(t,e,i){this.si.Qr(e,i);let s=this.persistence.referenceDelegate,r=[];return s&&e.forEach((o=>{r.push(s.markPotentiallyOrphaned(t,o))})),V.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),V.resolve()}getMatchingKeysForTargetId(t,e){let i=this.si.jr(e);return V.resolve(i)}containsKey(t,e){return V.resolve(this.si.containsKey(e))}};var dc=class{constructor(t,e){this._i={},this.overlays={},this.ai=new Ji(0),this.ui=!1,this.ui=!0,this.ci=new Ad,this.referenceDelegate=t(this),this.li=new Cd(this),this.indexManager=new md,this.remoteDocumentCache=(function(s){return new Pd(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new gd(e),this.Pi=new Ed(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Sd,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this._i[t.toKey()];return i||(i=new xd(e,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,i){U("MemoryPersistence","Starting transaction:",t);let s=new kd(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((r=>this.referenceDelegate.Ii(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ei(t,e){return V.or(Object.values(this._i).map((i=>()=>i.containsKey(t,e))))}},kd=class extends Hh{constructor(t){super(),this.currentSequenceNumber=t}},Dd=class n{constructor(t){this.persistence=t,this.Ri=new zr,this.Ai=null}static Vi(t){return new n(t)}get di(){if(this.Ai)return this.Ai;throw j(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.di.delete(i.toString()),V.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.di.add(i.toString()),V.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),V.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((s=>this.di.add(s.toString())));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((r=>this.di.add(r.toString())))})).next((()=>i.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.di,(i=>{let s=q.fromPath(i);return this.mi(t,s).next((r=>{r||e.removeEntry(s,$.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((i=>{i?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return V.or([()=>V.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}},fc=class n{constructor(t,e){this.persistence=t,this.fi=new sn((i=>kP(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=ER(this,e)}static Vi(t,e){return new n(t,e)}Ti(){}Ii(t){return V.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){let e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((s=>i+s))))}pr(t){let e=0;return this.mr(t,(i=>{e++})).next((()=>e))}mr(t,e){return V.forEach(this.fi,((i,s)=>this.wr(t,i,s).next((r=>r?V.resolve():e(s)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0,s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ni(t,(o=>this.wr(t,o,e).next((a=>{a||(i++,r.removeEntry(o,$.min()))})))).next((()=>r.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),V.resolve()}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),V.resolve()}removeReference(t,e,i){return this.fi.set(i,t.currentSequenceNumber),V.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),V.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ha(t.data.value)),e}wr(t,e,i){return V.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{let s=this.fi.get(e);return V.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}};var Od=class n{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Ts=i,this.Is=s}static Es(t,e){let i=Z(),s=Z();for(let r of e.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new n(t,e.fromCache,i,s)}};var Nd=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Md=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return u_()?8:PP(kt())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){let r={result:null};return this.gs(t,e).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ps(t,e,s,i).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;let o=new Nd;return this.ys(t,e,o).next((a=>{if(r.result=a,this.As)return this.ws(t,e,o,a.size)}))})).next((()=>r.result))}ws(t,e,i,s){return i.documentReadCount<this.Vs?(Ui()<=K.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",zi(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),V.resolve()):(Ui()<=K.DEBUG&&U("QueryEngine","Query:",zi(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(Ui()<=K.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",zi(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ke(e))):V.resolve())}gs(t,e){if(zy(e))return V.resolve(null);let i=ke(e);return this.indexManager.getIndexType(t,i).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=rc(e,null,"F"),i=ke(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((r=>{let o=Z(...r);return this.fs.getDocuments(t,o).next((a=>this.indexManager.getMinOffset(t,i).next((c=>{let u=this.bs(e,a);return this.Ss(e,u,o,c.readTime)?this.gs(t,rc(e,null,"F")):this.Ds(t,u,e,c)}))))})))))}ps(t,e,i,s){return zy(e)||s.isEqual($.min())?V.resolve(null):this.fs.getDocuments(t,i).next((r=>{let o=this.bs(e,r);return this.Ss(e,o,i,s)?V.resolve(null):(Ui()<=K.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zi(e)),this.Ds(t,o,e,EP(s,Rr)).next((a=>a)))}))}bs(t,e){let i=new Nt(Gb(t));return e.forEach(((s,r)=>{Dc(t,r)&&(i=i.add(r))})),i}Ss(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}ys(t,e,i){return Ui()<=K.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",zi(e)),this.fs.getDocumentsMatchingQuery(t,e,ui.min(),i)}Ds(t,e,i,s){return this.fs.getDocumentsMatchingQuery(t,i,s).next((r=>(e.forEach((o=>{r=r.insert(o.key,o)})),r)))}};var wf="LocalStore",SR=3e8,Vd=class{constructor(t,e,i,s){this.persistence=t,this.Cs=e,this.serializer=s,this.vs=new Tt(J),this.Fs=new sn((r=>gf(r)),mf),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Td(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}};function AR(n,t,e,i){return new Vd(n,t,e,i)}async function pw(n,t){let e=tt(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next((r=>(s=r,e.Os(t),e.mutationQueue.getAllMutationBatches(i)))).next((r=>{let o=[],a=[],c=Z();for(let u of s){o.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of r){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return e.localDocuments.getDocuments(i,c).next((u=>({Ns:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function gw(n){let t=tt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function xR(n,t){let e=tt(n),i=t.snapshotVersion,s=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{let o=e.xs.newChangeBuffer({trackRemovals:!0});s=e.vs;let a=[];t.targetChanges.forEach(((h,d)=>{let p=s.get(d);if(!p)return;a.push(e.li.removeMatchingKeys(r,h.removedDocuments,d).next((()=>e.li.addMatchingKeys(r,h.addedDocuments,d))));let m=p.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?m=m.withResumeToken(Ft.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),s=s.insert(d,m),(function(y,v,x){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=SR?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(p,m,h)&&a.push(e.li.updateTargetData(r,m))}));let c=Mn(),u=Z();if(t.documentUpdates.forEach((h=>{t.resolvedLimboDocuments.has(h)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(r,h))})),a.push(PR(r,o,t.documentUpdates).next((h=>{c=h.Bs,u=h.Ls}))),!i.isEqual($.min())){let h=e.li.getLastRemoteSnapshotVersion(r).next((d=>e.li.setTargetsMetadata(r,r.currentSequenceNumber,i)));a.push(h)}return V.waitFor(a).next((()=>o.apply(r))).next((()=>e.localDocuments.getLocalViewOfDocuments(r,c,u))).next((()=>c))})).then((r=>(e.vs=s,r)))}function PR(n,t,e){let i=Z(),s=Z();return e.forEach((r=>i=i.add(r))),t.getEntries(n,i).next((r=>{let o=Mn();return e.forEach(((a,c)=>{let u=r.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual($.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):U(wf,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)})),{Bs:o,Ls:s}}))}function RR(n,t){let e=tt(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return e.li.getTargetData(i,t).next((r=>r?(s=r,V.resolve(s)):e.li.allocateTargetId(i).next((o=>(s=new Br(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{let s=e.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.vs=e.vs.insert(i.targetId,i),e.Fs.set(t,i.targetId)),i}))}async function Ld(n,t,e){let i=tt(n),s=i.vs.get(t),r=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",r,(o=>i.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!hs(o))throw o;U(wf,`Failed to update sequence numbers for target ${t}: ${o}`)}i.vs=i.vs.remove(t),i.Fs.delete(s.target)}function Zy(n,t,e){let i=tt(n),s=$.min(),r=Z();return i.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,h){let d=tt(c),p=d.Fs.get(h);return p!==void 0?V.resolve(d.vs.get(p)):d.li.getTargetData(u,h)})(i,o,ke(t)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(o,a.targetId).next((c=>{r=c}))})).next((()=>i.Cs.getDocumentsMatchingQuery(o,t,e?s:$.min(),e?r:Z()))).next((a=>(CR(i,YP(t),a),{documents:a,ks:r})))))}function CR(n,t,e){let i=n.Ms.get(t)||$.min();e.forEach(((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)})),n.Ms.set(t,i)}var pc=class{constructor(){this.activeTargetIds=eR()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var Fd=class{constructor(){this.vo=new pc,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,i){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new pc,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Bd=class{Mo(t){}shutdown(){}};var tb="ConnectivityMonitor",gc=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){U(tb,"Network connectivity changed: AVAILABLE");for(let t of this.Lo)t(0)}Bo(){U(tb,"Network connectivity changed: UNAVAILABLE");for(let t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $a=null;function Ud(){return $a===null?$a=(function(){return 268435456+Math.round(2147483648*Math.random())})():$a++,"0x"+$a.toString(16)}var Bh="RestConnection",kR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},zd=class{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===ic?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(t,e,i,s,r){let o=Ud(),a=this.Qo(t,e.toUriEncodedString());U(Bh,`Sending RPC '${t}' ${o}:`,a,i);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,r);let{host:u}=new URL(a),h=Sn(u);return this.zo(t,a,c,i,h).then((d=>(U(Bh,`Received RPC '${t}' ${o}: `,d),d)),(d=>{throw tn(Bh,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",i),d}))}jo(t,e,i,s,r,o){return this.Wo(t,e,i,s,r)}Go(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ls})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,r)=>t[r]=s)),i&&i.headers.forEach(((s,r)=>t[r]=s))}Qo(t,e){let i=kR[t],s=`${this.qo}/v1/${e}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}};var qd=class{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}};var Wt="WebChannelConnection",Er=(n,t,e)=>{n.listen(t,(i=>{try{e(i)}catch(s){setTimeout((()=>{throw s}),0)}}))},mc=class n extends zd{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!n.c_){let t=Nh();Er(t,Oh.STAT_EVENT,(e=>{e.stat===qa.PROXY?U(Wt,"STAT_EVENT: detected buffering proxy"):e.stat===qa.NOPROXY&&U(Wt,"STAT_EVENT: detected no buffering proxy")})),n.c_=!0}}zo(t,e,i,s,r){let o=Ud();return new Promise(((a,c)=>{let u=new kh;u.setWithCredentials(!0),u.listenOnce(Dh.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Tr.NO_ERROR:let d=u.getResponseJson();U(Wt,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case Tr.TIMEOUT:U(Wt,`RPC '${t}' ${o} timed out`),c(new B(L.DEADLINE_EXCEEDED,"Request time out"));break;case Tr.HTTP_ERROR:let p=u.getStatus();if(U(Wt,`RPC '${t}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let y=(function(x){let R=x.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(R)>=0?R:L.UNKNOWN})(_.status);c(new B(y,_.message))}else c(new B(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new B(L.UNAVAILABLE,"Connection failed."));break;default:j(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{U(Wt,`RPC '${t}' ${o} completed.`)}}));let h=JSON.stringify(s);U(Wt,`RPC '${t}' ${o} sending request:`,s),u.send(e,"POST",h,i,15)}))}T_(t,e,i){let s=Ud(),r=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,e,i),a.encodeInitMessageHeaders=!0;let u=r.join("");U(Wt,`Creating RPC '${t}' stream ${s}: ${u}`,a);let h=o.createWebChannel(u,a);this.I_(h);let d=!1,p=!1,m=new qd({Ho:_=>{p?U(Wt,`Not sending because RPC '${t}' stream ${s} is closed:`,_):(d||(U(Wt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),d=!0),U(Wt,`RPC '${t}' stream ${s} sending:`,_),h.send(_))},Jo:()=>h.close()});return Er(h,Bi.EventType.OPEN,(()=>{p||(U(Wt,`RPC '${t}' stream ${s} transport opened.`),m.i_())})),Er(h,Bi.EventType.CLOSE,(()=>{p||(p=!0,U(Wt,`RPC '${t}' stream ${s} transport closed`),m.o_(),this.E_(h))})),Er(h,Bi.EventType.ERROR,(_=>{p||(p=!0,tn(Wt,`RPC '${t}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),m.o_(new B(L.UNAVAILABLE,"The operation could not be completed")))})),Er(h,Bi.EventType.MESSAGE,(_=>{if(!p){let y=_.data[0];_t(!!y,16349);let v=y,x=v?.error||v[0]?.error;if(x){U(Wt,`RPC '${t}' stream ${s} received error:`,x);let R=x.status,O=(function(D){let I=St[D];if(I!==void 0)return nw(I)})(R),M=x.message;R==="NOT_FOUND"&&M.includes("database")&&M.includes("does not exist")&&M.includes(this.databaseId.database)&&tn(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),O===void 0&&(O=L.INTERNAL,M="Unknown error status: "+R+" with message "+x.message),p=!0,m.o_(new B(O,M)),h.close()}else U(Wt,`RPC '${t}' stream ${s} received:`,y),m.__(y)}})),n.u_(),setTimeout((()=>{m.s_()}),0),m}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,i){super.Go(t,e,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Mh()}};function DR(n){return new mc(n)}function Uh(){return typeof document<"u"?document:null}function Kr(n){return new hd(n,!0)}mc.c_=!1;var _c=class{constructor(t,e,i=1e3,s=1.5,r=6e4){this.Ci=t,this.timerId=e,this.R_=i,this.A_=s,this.V_=r,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();let e=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&U("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var eb="PersistentStream",jd=class{constructor(t,e,i,s,r,o,a,c){this.Ci=t,this.b_=i,this.S_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _c(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===L.RESOURCE_EXHAUSTED?(Ze(e.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;let t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===e&&this.G_(i,s)}),(i=>{t((()=>{let s=new B(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(t,e){let i=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return U(eb,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(U(eb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}},Wd=class extends jd{constructor(t,e,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,o),this.serializer=r}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();let e=gR(this.serializer,t),i=(function(r){if(!("targetChange"in r))return $.min();let o=r.targetChange;return o.targetIds&&o.targetIds.length?$.min():o.readTime?Ki(o.readTime):$.min()})(t);return this.listener.J_(e,i)}Z_(t){let e={};e.database=Yy(this.serializer),e.addTarget=(function(r,o){let a,c=o.target;if(a=rd(c)?{documents:mR(r,c)}:{query:_R(r,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=iw(r,o.resumeToken);let u=dd(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo($.min())>0){a.readTime=fd(r,o.snapshotVersion.toTimestamp());let u=dd(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,t);let i=bR(this.serializer,t);i&&(e.labels=i),this.K_(e)}X_(t){let e={};e.database=Yy(this.serializer),e.removeTarget=t,this.K_(e)}};var $d=class{},Hd=class extends $d{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Wo(t,pd(e,i),s,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new B(L.UNKNOWN,r.toString())}))}jo(t,e,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.jo(t,pd(e,i),s,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(L.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function OR(n,t,e,i){return new Hd(n,t,e,i)}var Gd=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ze(e),this.aa=!1):U("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var rs="RemoteStore",Kd=class{constructor(t,e,i,s,r){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=r,this.Aa.Mo((o=>{i.enqueueAndForget((async()=>{Qr(this)&&(U(rs,"Restarting streams for network reachability change."),await(async function(c){let u=tt(c);u.Ea.add(4),await Yr(u),u.Va.set("Unknown"),u.Ea.delete(4),await Oc(u)})(this))}))})),this.Va=new Gd(i,s)}};async function Oc(n){if(Qr(n))for(let t of n.Ra)await t(!0)}async function Yr(n){for(let t of n.Ra)await t(!1)}function mw(n,t){let e=tt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Ef(e)?Tf(e):fs(e).O_()&&vf(e,t))}function If(n,t){let e=tt(n),i=fs(e);e.Ia.delete(t),i.O_()&&_w(e,t),e.Ia.size===0&&(i.O_()?i.L_():Qr(e)&&e.Va.set("Unknown"))}function vf(n,t){if(n.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}fs(n).Z_(t)}function _w(n,t){n.da.$e(t),fs(n).X_(t)}function Tf(n){n.da=new ud({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),fs(n).start(),n.Va.ua()}function Ef(n){return Qr(n)&&!fs(n).x_()&&n.Ia.size>0}function Qr(n){return tt(n).Ea.size===0}function yw(n){n.da=void 0}async function NR(n){n.Va.set("Online")}async function MR(n){n.Ia.forEach(((t,e)=>{vf(n,t)}))}async function VR(n,t){yw(n),Ef(n)?(n.Va.ha(t),Tf(n)):n.Va.set("Unknown")}async function LR(n,t,e){if(n.Va.set("Online"),t instanceof lc&&t.state===2&&t.cause)try{await(async function(s,r){let o=r.cause;for(let a of r.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))})(n,t)}catch(i){U(rs,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await nb(n,i)}else if(t instanceof Gi?n.da.Xe(t):t instanceof cc?n.da.st(t):n.da.tt(t),!e.isEqual($.min()))try{let i=await gw(n.localStore);e.compareTo(i)>=0&&await(function(r,o){let a=r.da.Tt(o);return a.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=r.Ia.get(u);h&&r.Ia.set(u,h.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,u)=>{let h=r.Ia.get(c);if(!h)return;r.Ia.set(c,h.withResumeToken(Ft.EMPTY_BYTE_STRING,h.snapshotVersion)),_w(r,c);let d=new Br(h.target,c,u,h.sequenceNumber);vf(r,d)})),r.remoteSyncer.applyRemoteEvent(a)})(n,e)}catch(i){U(rs,"Failed to raise snapshot:",i),await nb(n,i)}}async function nb(n,t,e){if(!hs(t))throw t;n.Ea.add(1),await Yr(n),n.Va.set("Offline"),e||(e=()=>gw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{U(rs,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Oc(n)}))}async function ib(n,t){let e=tt(n);e.asyncQueue.verifyOperationInProgress(),U(rs,"RemoteStore received new credentials");let i=Qr(e);e.Ea.add(3),await Yr(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Oc(e)}async function FR(n,t){let e=tt(n);t?(e.Ea.delete(2),await Oc(e)):t||(e.Ea.add(2),await Yr(e),e.Va.set("Unknown"))}function fs(n){return n.ma||(n.ma=(function(e,i,s){let r=tt(e);return r.sa(),new Wd(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(n.datastore,n.asyncQueue,{Zo:NR.bind(null,n),Yo:MR.bind(null,n),t_:VR.bind(null,n),J_:LR.bind(null,n)}),n.Ra.push((async t=>{t?(n.ma.B_(),Ef(n)?Tf(n):n.Va.set("Unknown")):(await n.ma.stop(),yw(n))}))),n.ma}var Yd=class n{constructor(t,e,i,s,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,r){let o=Date.now()+i,a=new n(t,e,o,s,r);return a.start(i),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bw(n,t){if(Ze("AsyncQueue",`${t}: ${n}`),hs(n))return new B(L.UNAVAILABLE,`${t}: ${n}`);throw n}var qr=class n{static emptySet(t){return new n(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||q.comparator(e.key,i.key):(e,i)=>q.comparator(e.key,i.key),this.keyedMap=Sr(),this.sortedSet=new Tt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let s=e.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){let t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var yc=class{constructor(){this.ga=new Tt(q.comparator)}track(t){let e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):j(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){let t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}},di=class n{constructor(t,e,i,s,r,o,a,c,u){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,e,i,s,r){let o=[];return e.forEach((a=>{o.push({type:0,doc:a})})),new n(t,e,qr.emptySet(e),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&kc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}};var Qd=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}},Jd=class{constructor(){this.queries=sb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){let s=tt(e),r=s.queries;s.queries=sb(),r.forEach(((o,a)=>{for(let c of a.ba)c.onError(i)}))})(this,new B(L.ABORTED,"Firestore shutting down"))}};function sb(){return new sn((n=>Hb(n)),kc)}async function BR(n,t){let e=tt(n),i=3,s=t.query,r=e.queries.get(s);r?!r.Sa()&&t.Da()&&(i=2):(r=new Qd,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await e.onListen(s,!0);break;case 1:r.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(o){let a=bw(o,`Initialization of query '${zi(t.query)}' failed`);return void t.onError(a)}e.queries.set(s,r),r.ba.push(t),t.va(e.onlineState),r.wa&&t.Fa(r.wa)&&Sf(e)}async function UR(n,t){let e=tt(n),i=t.query,s=3,r=e.queries.get(i);if(r){let o=r.ba.indexOf(t);o>=0&&(r.ba.splice(o,1),r.ba.length===0?s=t.Da()?0:1:!r.Sa()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function zR(n,t){let e=tt(n),i=!1;for(let s of t){let r=s.query,o=e.queries.get(r);if(o){for(let a of o.ba)a.Fa(s)&&(i=!0);o.wa=s}}i&&Sf(e)}function qR(n,t,e){let i=tt(n),s=i.queries.get(t);if(s)for(let r of s.ba)r.onError(e);i.queries.delete(t)}function Sf(n){n.Ca.forEach((t=>{t.next()}))}var Xd,rb;(rb=Xd||(Xd={})).Ma="default",rb.Cache="cache";var Zd=class{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){let i=[];for(let s of t.docChanges)s.type!==3&&i.push(s);t=new di(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;let i=e!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;let e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=di.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Xd.Cache}};var bc=class{constructor(t){this.key=t}},wc=class{constructor(t){this.key=t}},tf=class{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Z(),this.mutatedKeys=Z(),this.eu=Gb(t),this.tu=new qr(this.eu)}get nu(){return this.Za}ru(t,e){let i=e?e.iu:new yc,s=e?e.tu:this.tu,r=e?e.mutatedKeys:this.mutatedKeys,o=s,a=!1,c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((h,d)=>{let p=s.get(h),m=Dc(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),v=!1;p&&m?p.data.isEqual(m.data)?_!==y&&(i.track({type:3,doc:m}),v=!0):this.su(p,m)||(i.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),v=!0):p&&!m&&(i.track({type:1,doc:p}),v=!0,(c||u)&&(a=!0)),v&&(m?(o=o.add(m),r=y?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),i.track({type:1,doc:h})}return{tu:o,iu:i,Ss:a,mutatedKeys:r}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){let r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;let o=t.iu.ya();o.sort(((h,d)=>(function(m,_){let y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{Vt:v})}};return y(m)-y(_)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(i),s=s??!1;let a=e&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new di(this.query,t.tu,r,o,t.mutatedKeys,c===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yc,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];let t=this.Ya;this.Ya=Z(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));let e=[];return t.forEach((i=>{this.Ya.has(i)||e.push(new wc(i))})),this.Ya.forEach((i=>{t.has(i)||e.push(new bc(i))})),e}cu(t){this.Za=t.ks,this.Ya=Z();let e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return di.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},Af="SyncEngine",ef=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},nf=class{constructor(t){this.key=t,this.hu=!1}},sf=class{constructor(t,e,i,s,r,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new sn((a=>Hb(a)),kc),this.Iu=new Map,this.Eu=new Set,this.Ru=new Tt(q.comparator),this.Au=new Map,this.Vu=new zr,this.du={},this.mu=new Map,this.fu=Ur.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function jR(n,t,e=!0){let i=Ew(n),s,r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await ww(i,t,e,!0),s}async function WR(n,t){let e=Ew(n);await ww(e,t,!0,!1)}async function ww(n,t,e,i){let s=await RR(n.localStore,ke(t)),r=s.targetId,o=n.sharedClientState.addLocalQueryTarget(r,e),a;return i&&(a=await $R(n,t,r,o==="current",s.resumeToken)),n.isPrimaryClient&&e&&mw(n.remoteStore,s),a}async function $R(n,t,e,i,s){n.pu=(d,p,m)=>(async function(y,v,x,R){let O=v.view.ru(x);O.Ss&&(O=await Zy(y.localStore,v.query,!1).then((({documents:I})=>v.view.ru(I,O))));let M=R&&R.targetChanges.get(v.targetId),N=R&&R.targetMismatches.get(v.targetId)!=null,D=v.view.applyChanges(O,y.isPrimaryClient,M,N);return ab(y,v.targetId,D.au),D.snapshot})(n,d,p,m);let r=await Zy(n.localStore,t,!0),o=new tf(t,r.ks),a=o.ru(r.documents),c=Fr.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),u=o.applyChanges(a,n.isPrimaryClient,c);ab(n,e,u.au);let h=new ef(t,e,o);return n.Tu.set(t,h),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),u.snapshot}async function HR(n,t,e){let i=tt(n),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter((o=>!kc(o,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Ld(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),e&&If(i.remoteStore,s.targetId),rf(i,s.targetId)})).catch(Ac)):(rf(i,s.targetId),await Ld(i.localStore,s.targetId,!0))}async function GR(n,t){let e=tt(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),If(e.remoteStore,i.targetId))}async function Iw(n,t){let e=tt(n);try{let i=await xR(e.localStore,t);t.targetChanges.forEach(((s,r)=>{let o=e.Au.get(r);o&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?_t(o.hu,14607):s.removedDocuments.size>0&&(_t(o.hu,42227),o.hu=!1))})),await Tw(e,i,t)}catch(i){await Ac(i)}}function ob(n,t,e){let i=tt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let s=[];i.Tu.forEach(((r,o)=>{let a=o.view.va(t);a.snapshot&&s.push(a.snapshot)})),(function(o,a){let c=tt(o);c.onlineState=a;let u=!1;c.queries.forEach(((h,d)=>{for(let p of d.ba)p.va(a)&&(u=!0)})),u&&Sf(c)})(i.eventManager,t),s.length&&i.Pu.J_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function KR(n,t,e){let i=tt(n);i.sharedClientState.updateQueryState(t,"rejected",e);let s=i.Au.get(t),r=s&&s.key;if(r){let o=new Tt(q.comparator);o=o.insert(r,pe.newNoDocument(r,$.min()));let a=Z().add(r),c=new ac($.min(),new Map,new Tt(J),o,a);await Iw(i,c),i.Ru=i.Ru.remove(r),i.Au.delete(t),xf(i)}else await Ld(i.localStore,t,!1).then((()=>rf(i,t,e))).catch(Ac)}function rf(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Vu.Gr(t).forEach((i=>{n.Vu.containsKey(i)||vw(n,i)}))}function vw(n,t){n.Eu.delete(t.path.canonicalString());let e=n.Ru.get(t);e!==null&&(If(n.remoteStore,e),n.Ru=n.Ru.remove(t),n.Au.delete(e),xf(n))}function ab(n,t,e){for(let i of e)i instanceof bc?(n.Vu.addReference(i.key,t),YR(n,i)):i instanceof wc?(U(Af,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,t),n.Vu.containsKey(i.key)||vw(n,i.key)):j(19791,{wu:i})}function YR(n,t){let e=t.key,i=e.path.canonicalString();n.Ru.get(e)||n.Eu.has(i)||(U(Af,"New document in limbo: "+e),n.Eu.add(i),xf(n))}function xf(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let t=n.Eu.values().next().value;n.Eu.delete(t);let e=new q(mt.fromString(t)),i=n.fu.next();n.Au.set(i,new nf(e)),n.Ru=n.Ru.insert(e,i),mw(n.remoteStore,new Br(ke(_f(e.path)),i,"TargetPurposeLimboResolution",Ji.ce))}}async function Tw(n,t,e){let i=tt(n),s=[],r=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach(((a,c)=>{o.push(i.pu(c,t,e).then((u=>{if((u||e)&&i.isPrimaryClient){let h=u?!u.fromCache:e?.targetChanges.get(c.targetId)?.current;i.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);let h=Od.Es(c.targetId,u);r.push(h)}})))})),await Promise.all(o),i.Pu.J_(s),await(async function(c,u){let h=tt(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>V.forEach(u,(p=>V.forEach(p.Ts,(m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m))).next((()=>V.forEach(p.Is,(m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))))))}catch(d){if(!hs(d))throw d;U(wf,"Failed to update sequence numbers: "+d)}for(let d of u){let p=d.targetId;if(!d.fromCache){let m=h.vs.get(p),_=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(_);h.vs=h.vs.insert(p,y)}}})(i.localStore,r))}async function QR(n,t){let e=tt(n);if(!e.currentUser.isEqual(t)){U(Af,"User change. New user:",t.toKey());let i=await pw(e.localStore,t);e.currentUser=t,(function(r,o){r.mu.forEach((a=>{a.forEach((c=>{c.reject(new B(L.CANCELLED,o))}))})),r.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Tw(e,i.Ns)}}function JR(n,t){let e=tt(n),i=e.Au.get(t);if(i&&i.hu)return Z().add(i.key);{let s=Z(),r=e.Iu.get(t);if(!r)return s;for(let o of r){let a=e.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function Ew(n){let t=tt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Iw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=JR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KR.bind(null,t),t.Pu.J_=zR.bind(null,t.eventManager),t.Pu.yu=qR.bind(null,t.eventManager),t}var fi=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Kr(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return AR(this.persistence,new Md,t.initialUser,this.serializer)}Cu(t){return new dc(Dd.Vi,this.serializer)}Du(t){return new Fd}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};fi.provider={build:()=>new fi};var Ic=class extends fi{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){_t(this.persistence.referenceDelegate instanceof fc,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new bd(i,t.asyncQueue,e)}Cu(t){let e=this.cacheSizeBytes!==void 0?re.withCacheSize(this.cacheSizeBytes):re.DEFAULT;return new dc((i=>fc.Vi(i,e)),this.serializer)}};var os=class{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ob(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QR.bind(null,this.syncEngine),await FR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Jd})()}createDatastore(t){let e=Kr(t.databaseInfo.databaseId),i=DR(t.databaseInfo);return OR(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,s,r,o,a){return new Kd(i,s,r,o,a)})(this.localStore,this.datastore,t.asyncQueue,(e=>ob(this.syncEngine,e,0)),(function(){return gc.v()?new gc:new Bd})())}createSyncEngine(t,e){return(function(s,r,o,a,c,u,h){let d=new sf(s,r,o,a,c,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){let i=tt(e);U(rs,"RemoteStore shutting down."),i.Ea.add(5),await Yr(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};os.provider={build:()=>new os};var of=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ze("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}};var Vn="FirestoreClient",af=class{constructor(t,e,i,s,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this._databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=Yi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,(async o=>{U(Vn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,(o=>(U(Vn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=bw(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};async function zh(n,t){n.asyncQueue.verifyOperationInProgress(),U(Vn,"Initializing OfflineComponentProvider");let e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await pw(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function cb(n,t){n.asyncQueue.verifyOperationInProgress();let e=await XR(n);U(Vn,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>ib(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>ib(t.remoteStore,s))),n._onlineComponents=t}async function XR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U(Vn,"Using user provided OfflineComponentProvider");try{await zh(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;tn("Error using user provided cache. Falling back to memory cache: "+e),await zh(n,new fi)}}else U(Vn,"Using default OfflineComponentProvider"),await zh(n,new Ic(void 0));return n._offlineComponents}async function ZR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(U(Vn,"Using user provided OnlineComponentProvider"),await cb(n,n._uninitializedComponentsProvider._online)):(U(Vn,"Using default OnlineComponentProvider"),await cb(n,new os))),n._onlineComponents}async function tC(n){let t=await ZR(n),e=t.eventManager;return e.onListen=jR.bind(null,t.syncEngine),e.onUnlisten=HR.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=WR.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=GR.bind(null,t.syncEngine),e}function Sw(n,t,e={}){let i=new Je;return n.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,c,u){let h=new of({next:p=>{h.Nu(),o.enqueueAndForget((()=>UR(r,d))),p.fromCache&&c.source==="server"?u.reject(new B(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new Zd(a,h,{includeMetadataChanges:!0,Ka:!0});return BR(r,d)})(await tC(n),n.asyncQueue,t,e,i))),i.promise}function Aw(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var eC="ComponentProvider",lb=new Map;function nC(n,t,e,i,s){return new Gh(n,t,e,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Aw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}var xw="firestore.googleapis.com",ub=!0,vc=class{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new B(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xw,this.ssl=ub}else this.host=t.host,this.ssl=t.ssl??ub;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=fw;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<TR)throw new B(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Aw(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},jr=class{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new B(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vc(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Ya;switch(i.type){case"firstParty":return new Wh(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){let i=lb.get(e);i&&(U(eC,"Removing Datastore"),lb.delete(e),i.terminate())})(this),Promise.resolve()}};function Pw(n,t,e,i={}){n=Gr(n,jr);let s=Sn(t),r=n._getSettings(),o={...r,emulatorOptions:n._getEmulatorOptions()},a=`${t}:${e}`;s&&(na(`https://${a}`),ia("Firestore",!0)),r.host!==xw&&r.host!==a&&tn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c={...r,host:a,ssl:s,emulatorOptions:i};if(!he(c,o)&&(n._setSettings(c),i.mockUserToken)){let u,h;if(typeof i.mockUserToken=="string")u=i.mockUserToken,h=Ot.MOCK_USER;else{u=s_(i.mockUserToken,n._app?.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new B(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ot(d)}n._authCredentials=new qh(new Ka(u,h))}}var rn=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},Qt=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(us(e,n._jsonSchema))return new n(t,i||null,new q(mt.fromString(e.referencePath)))}};Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:vt("string",Qt._jsonSchemaVersion),referencePath:vt("string")};var ci=class n extends rn{constructor(t,e,i){super(t,e,_f(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Qt(this.firestore,null,new q(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function Pf(n,t,...e){if(n=qt(n),TP("collection","path",t),n instanceof jr){let i=mt.fromString(t,...e);return Ry(i),new ci(n,null,i)}{if(!(n instanceof Qt||n instanceof ci))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(mt.fromString(t,...e));return Ry(i),new ci(n.firestore,null,i)}}var hb="AsyncQueue",Tc=class{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _c(this,"async_queue_retry"),this._c=()=>{let i=Uh();i&&U(hb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;let e=Uh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;let e=Uh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));let e=new Je;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!hs(t))throw t;U(hb,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){let e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Ze("INTERNAL UNHANDLED ERROR: ",db(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);let s=Yd.createAndSchedule(this,t,e,i,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&j(47125,{Pc:db(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(let e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(let e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){let e=this.tc.indexOf(t);this.tc.splice(e,1)}};function db(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}var as=class extends jr{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new Tc,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new Tc(t),this._firestoreClient=void 0,await t}}};function Rf(n,t){let e=typeof n=="object"?n:aa(),i=typeof n=="string"?n:t||ic,s=rr(e,"firestore").getImmediate({identifier:i});if(!s._initialized){let r=i_("firestore");r&&Pw(s,...r)}return s}function Cf(n){if(n._terminated)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iC(n),n._firestoreClient}function iC(n){let t=n._freezeSettings(),e=nC(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new af(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(s){let r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}})(n._componentsProvider))}var De=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(Ft.fromBase64String(t))}catch(e){throw new B(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(Ft.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(us(t,n._jsonSchema))return n.fromBase64String(t.bytes)}};De._jsonSchemaVersion="firestore/bytes/1.0",De._jsonSchema={type:vt("string",De._jsonSchemaVersion),bytes:vt("string")};var cs=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new B(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Wr=class{constructor(t){this._methodName=t}};var Xe=class n{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new B(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new B(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return J(this._lat,t._lat)||J(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(t){if(us(t,n._jsonSchema))return new n(t.latitude,t.longitude)}};Xe._jsonSchemaVersion="firestore/geoPoint/1.0",Xe._jsonSchema={type:vt("string",Xe._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};var Oe=class n{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(us(t,n._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new n(t.vectorValues);throw new B(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Oe._jsonSchemaVersion="firestore/vectorValue/1.0",Oe._jsonSchema={type:vt("string",Oe._jsonSchemaVersion),vectorValues:vt("object")};var sC=/^__.*__$/;function Rw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{dataSource:n})}}var cf=class n{constructor(t,e,i,s,r,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.validatePath(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new n({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){let e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){let e=this.path?.child(t),i=this.contextWith({path:e,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Ec(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(Rw(this.dataSource)&&sC.test(t))throw this.createError('Document fields cannot begin and end with "__"')}},lf=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Kr(t)}createContext(t,e,i,s=!1){return new cf({dataSource:t,methodName:e,targetDoc:i,path:Zt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Cw(n){let t=n._freezeSettings(),e=Kr(n._databaseId);return new lf(n._databaseId,!!t.ignoreUndefinedProperties,e)}function kw(n,t,e,i=!1){return kf(e,n.createContext(i?4:3,t))}function kf(n,t){if(Dw(n=qt(n)))return oC("Unsupported field value:",t,n),rC(n,t);if(n instanceof Wr)return(function(i,s){if(!Rw(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);let r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,s){let r=[],o=0;for(let a of i){let c=kf(a,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}})(n,t)}return(function(i,s){if((i=qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return nR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let r=xt.fromDate(i);return{timestampValue:fd(s.serializer,r)}}if(i instanceof xt){let r=new xt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:fd(s.serializer,r)}}if(i instanceof Xe)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof De)return{bytesValue:iw(s.serializer,i._byteString)};if(i instanceof Qt){let r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:sw(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Oe)return(function(o,a){let c=o instanceof Oe?o.toArray():o;return{mapValue:{fields:{[hf]:{stringValue:df},[Xi]:{arrayValue:{values:c.map((h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return bf(a.serializer,h)}))}}}}}})(i,s);if(hw(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Hr(i)}`)})(n,t)}function rC(n,t){let e={};return kb(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ds(n,((i,s)=>{let r=kf(s,t.childContextForField(i));r!=null&&(e[i]=r)})),{mapValue:{fields:e}}}function Dw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xt||n instanceof Xe||n instanceof De||n instanceof Qt||n instanceof Wr||n instanceof Oe||hw(n))}function oC(n,t,e){if(!Dw(e)||!mb(e)){let i=Hr(e);throw i==="an object"?t.createError(n+" a custom object"):t.createError(n+" "+i)}}function Nc(n,t,e){if((t=qt(t))instanceof cs)return t._internalPath;if(typeof t=="string")return Ow(n,t);throw Ec("Field path arguments must be of type string or ",n,!1,void 0,e)}var aC=new RegExp("[~\\*/\\[\\]]");function Ow(n,t,e){if(t.search(aC)>=0)throw Ec(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new cs(...t.split("."))._internalPath}catch{throw Ec(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Ec(n,t,e,i,s){let r=i&&!i.isEmpty(),o=s!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new B(L.INVALID_ARGUMENT,a+n+c)}var $r=class{convertValue(t,e="none"){switch(Dn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ft(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(nn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw j(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return ds(t,((s,r)=>{i[s]=this.convertValue(r,e)})),i}convertVectorValue(t){let e=t.fields?.[Xi].arrayValue?.values?.map((i=>ft(i.doubleValue)));return new Oe(e)}convertGeoPoint(t){return new Xe(ft(t.latitude),ft(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":let i=Rc(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(kr(t));default:return null}}convertTimestamp(t){let e=en(t);return new xt(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=mt.fromString(t);_t(uw(i),9688,{name:t});let s=new Dr(i.get(1),i.get(3)),r=new q(i.popFirst(5));return s.isEqual(e)||Ze(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}};var Sc=class extends $r{constructor(t){super(),this.firestore=t}convertBytes(t){return new De(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qt(this.firestore,null,e)}};var Nw="@firebase/firestore",Mw="4.11.0";var Mc=class{constructor(t,e,i,s,r){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Df(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){let e=this._document.data.field(Nc("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Df=class extends Mc{data(){return super.data()}};function fC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Jr=class{},Vc=class extends Jr{};function Bw(n,t,...e){let i=[];t instanceof Jr&&i.push(t),i=i.concat(e),(function(r){let o=r.filter((c=>c instanceof Nf)).length,a=r.filter((c=>c instanceof Of)).length;if(o>1||o>0&&a>0)throw new B(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let s of i)n=s._apply(n);return n}var Of=class n extends Vc{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return zw(t._query,e),new rn(t.firestore,t.converter,Cc(t._query,e))}_parse(t){let e=Cw(t.firestore);return(function(r,o,a,c,u,h,d){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Lw(d,h);let _=[];for(let y of d)_.push(Vw(c,r,y));p={arrayValue:{values:_}}}else p=Vw(c,r,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Lw(d,h),p=kw(a,o,d,h==="in"||h==="not-in");return It.create(u,h,p)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};var Nf=class n extends Jr{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:oe.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:((function(s,r){let o=s,a=r.getFlattenedFilters();for(let c of a)zw(o,c),o=Cc(o,c)})(t._query,e),new rn(t.firestore,t.converter,Cc(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Mf=class n extends Vc{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=(function(s,r,o){if(s.startAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new On(r,o)})(t._query,this._field,this._direction);return new rn(t.firestore,t.converter,$b(t._query,e))}};function Uw(n,t="asc"){let e=t,i=Nc("orderBy",n);return Mf._create(i,e)}function Vw(n,t,e){if(typeof(e=qt(e))=="string"){if(e==="")throw new B(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yf(t)&&e.indexOf("/")!==-1)throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(mt.fromString(e));if(!q.isDocumentKey(i))throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ff(n,new q(i))}if(e instanceof Qt)return ff(n,e._key);throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hr(e)}.`)}function Lw(n,t){if(!Array.isArray(n)||n.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function zw(n,t){let e=(function(s,r){for(let o of s)for(let a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var ps=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},gs=class n extends Mc{constructor(t,e,i,s,r,o){super(t,e,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new ms(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(Nc("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let t=this._document,e={};return e.type=n._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",gs._jsonSchema={type:vt("string",gs._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};var ms=class extends gs{data(t={}){return super.data(t)}},_s=class n{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new ps(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){let t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new ms(this._firestore,this._userDataWriter,i.key,i,new ps(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new B(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{let c=new ms(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ps(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{let c=new ms(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ps(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter),u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:pC(a.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let t={};t.type=n._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Yi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let e=[],i=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(e.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function pC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:n})}}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:vt("string",_s._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};function qw(n){n=Gr(n,rn);let t=Gr(n.firestore,as),e=Cf(t),i=new Sc(t);return fC(n._query),Sw(e,n._query).then((s=>new _s(t,i,n,s)))}(function(t,e=!0){fb(Rn),Pn(new ie("firestore",((i,{instanceIdentifier:s,options:r})=>{let o=i.getProvider("app").getImmediate(),a=new as(new Qa(i.getProvider("auth-internal")),new Xa(o,i.getProvider("app-check-internal")),Vb(o,s),o);return r={useFetchStreams:e,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),de(Nw,Mw,t),de(Nw,Mw,"esm2020")})();var gC={apiKey:"AIzaSyBShjWSNLwVOiaGh34ei7NlVe2uXSC8g2E",authDomain:"focus-a5e5c.firebaseapp.com",projectId:"focus-a5e5c",storageBucket:"focus-a5e5c.firebasestorage.app",messagingSenderId:"245416282683",appId:"1:245416282683:web:54dfc1ac47dcd5406caa1e",measurementId:"G-8GJDKGNPD2"},jw=Ju(gC),Lc=Rh(jw),Ww=Rf(jw);var Xr=globalThis.chrome?.storage;function Fc(n,t){if(!n||typeof n[t]!="function")return;let e=n[t].bind(n);n[t]=(...i)=>{if(typeof i[i.length-1]=="function")return e(...i);try{let r=e(...i);if(r&&typeof r.then=="function")return r}catch(r){return Promise.reject(r)}return new Promise((r,o)=>{e(...i,a=>{let c=globalThis.chrome?.runtime?.lastError;if(c){o(new Error(c.message||"Extension storage error"));return}r(a)})})}}Xr&&[Xr.local,Xr.sync,Xr.managed,Xr.session].filter(Boolean).forEach(n=>{Fc(n,"get"),Fc(n,"set"),Fc(n,"remove"),Fc(n,"clear")});var $w,mC=new Promise(n=>{$w=n});async function _C(n){if(n){let t=await n.getIdToken();await chrome.storage.local.set({authUser:{uid:n.uid,email:n.email,token:t,lastRefresh:Date.now()}})}else await chrome.storage.local.remove(["authUser"])}Ah(Lc,n=>{_C(n),$w()});function Hw(){return Lc.currentUser}async function Gw(){return await mC,Lc.currentUser}async function Kw(){let n=Hw();if(!n)return[];let t=Bw(Pf(Ww,"users",n.uid,"sessions"),Uw("createdAt","desc"));return(await qw(t)).docs.map(i=>yC(i))}function yC(n){let t=n.data();return{id:n.id,topic:t.topic||"",duration:t.duration||0,startTime:Vf(t.startTime),endTime:Vf(t.endTime),focusScore:t.focusScore!=null?t.focusScore:100,distractions:t.distractions||0,distractionTime:t.distractionTime||0,distractingSites:t.distractingSites||{},choices:t.choices||{angel:0,devil:0},allowedSites:t.allowedSites||[],createdAt:Vf(t.createdAt)}}function Vf(n){return n?typeof n=="number"?n:typeof n.toMillis=="function"?n.toMillis():n.seconds!=null?n.seconds*1e3+(n.nanoseconds||0)/1e6:null:null}We.register(...Qm);var st={range:"7d",dataSource:"live",persona:"new",liveSessions:[],analyticsCache:new Map,searchQuery:""},ae={weeklyTime:null,weeklyScore:null,periodCompare:null,scoreDistribution:null};function it(n){return document.getElementById(n)}function Bf(n){let t=document.createElement("div");return t.textContent=n,t.innerHTML}function Uc(n){let t=Math.floor(n/1e3),e=Math.floor(t/3600),i=Math.floor(t%3600/60);return e>0&&i>0?`${e}h ${i}m`:e>0?`${e}h`:i>0?`${i}m`:`${t}s`}function bC(n){let t=n/36e5;return t>=1?`${t.toFixed(1)}h`:`${Math.round(n/(1e3*60))}m`}function pi(n){let t=new Date(n);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function wC(n){return new Date(`${n}T12:00:00`).toLocaleDateString("en-US",{weekday:"short"})}function Qw(n){let t=[];for(let e=n-1;e>=0;e-=1){let i=new Date;i.setDate(i.getDate()-e),t.push(pi(i.getTime()))}return t}function IC(n,t){let e=new Set(Qw(t)),i=new Set;return n.forEach(s=>{let r=pi(s.startTime||s.endTime||Date.now());e.has(r)&&i.add(r)}),Math.min(i.size,t)}function vC(n){let t=new Date(n);return t.setHours(0,0,0,0),t.getTime()}function TC(n){let t=new Date(n);return t.setHours(23,59,59,999),t.getTime()}function EC(n,t){let e=new Date(n),i=new Date(t),s=e.toLocaleDateString("en-US",{month:"short"}),r=i.toLocaleDateString("en-US",{month:"short"});return s===r?`${s} ${e.getDate()}-${i.getDate()}`:`${s} ${e.getDate()}-${r} ${i.getDate()}`}function SC(n,t){let e=Date.now(),i=m=>m.startTime||m.endTime||0;if(t==="7d"){let m=Qw(7),_={};return n.forEach(y=>{let v=pi(i(y)||e);_[v]||(_[v]=[]),_[v].push(y)}),{labels:m.map(y=>wC(y)),time:m.map(y=>on(_[y]||[])),score:m.map(y=>ge(_[y]||[])),timeSubtitle:"Hours per day, last 7 days",scoreSubtitle:"Average score per day, last 7 days"}}if(t==="30d"){let m=vC(e-25056e5),_=[];for(let R=0;R<5;R+=1){let O=m+R*7*24*60*60*1e3,M=Math.min(O+10080*60*1e3-1,TC(e));_.push({start:O,end:M})}let y=[],v=[],x=[];return _.forEach(R=>{let O=n.filter(M=>{let N=i(M);return N>=R.start&&N<=R.end});y.push(EC(R.start,R.end)),v.push(on(O)),x.push(ge(O))}),{labels:y,time:v,score:x,timeSubtitle:"Hours per week, last 30 days",scoreSubtitle:"Average score per week, last 30 days"}}let s=n.length?Math.max(...n.map(m=>i(m))):e,r=n.length?Math.min(...n.map(m=>i(m))):e,o=new Date(r);o.setDate(1),o.setHours(0,0,0,0);let a=new Date(s);a.setDate(1),a.setHours(0,0,0,0);let c=[],u=new Date(o);for(;u<=a;){let m=u.getTime(),_=new Date(u);_.setMonth(_.getMonth()+1);let y=_.getTime()-1;c.push({start:m,end:y,label:u.toLocaleDateString("en-US",{month:"short",year:"numeric"})}),u.setMonth(u.getMonth()+1)}let h=[],d=[],p=[];return c.forEach(m=>{let _=n.filter(y=>{let v=i(y);return v>=m.start&&v<=m.end});h.push(m.label),d.push(on(_)),p.push(ge(_))}),{labels:h,time:d,score:p,timeSubtitle:"Hours per month, full history",scoreSubtitle:"Average score per month"}}function AC(n){return n==="7d"?7:n==="30d"?30:null}function xC(n){let t=AC(n);if(!t)return null;let e=Date.now(),i=e-t*24*60*60*1e3,s=i-t*24*60*60*1e3;return{currentStart:i,previousStart:s,now:e,currentEnd:e}}function on(n){return n.reduce((t,e)=>t+(e.duration||0),0)}function ge(n){return n.length?Math.round(n.reduce((t,e)=>t+(e.focusScore||0),0)/n.length):null}function Zr(n){return n.reduce((t,e)=>t+(e.distractions||0),0)}function PC(n){if(!n.length)return{currentStreak:0,longestStreak:0};let t=new Set(n.map(a=>pi(a.startTime||a.endTime||Date.now()))),e=[...t].sort(),i=1,s=1;for(let a=1;a<e.length;a+=1){let c=new Date(`${e[a-1]}T12:00:00`);(new Date(`${e[a]}T12:00:00`)-c)/(1e3*60*60*24)===1?(s+=1,i=Math.max(i,s)):s=1}let r=new Date,o=0;for(let a=0;a<365;a+=1){let c=new Date(r);c.setDate(r.getDate()-a);let u=pi(c.getTime());if(t.has(u))o+=1;else{if(a===0)continue;break}}return{currentStreak:o,longestStreak:Math.max(i,o)}}function RC(n){let t={bestTime:null,optimalLength:null,bestDay:null,confidence:{bestTime:0,optimalLength:0,bestDay:0},opportunity:""};if(!n.length)return t.opportunity="Opportunity: Start 3 focused sessions to unlock personalized recommendations.",t;let e={};n.forEach(_=>{if(!_.startTime)return;let y=new Date(_.startTime).getHours();e[y]||(e[y]={total:0,count:0}),e[y].total+=_.focusScore||0,e[y].count+=1});let i=null,s=-1;if(Object.entries(e).forEach(([_,y])=>{if(y.count<2)return;let v=y.total/y.count;v>s&&(s=v,i=Number(_))}),i!==null){let _=(i+2)%24,y=i===0?12:i>12?i-12:i,v=_===0?12:_>12?_-12:_;t.bestTime={label:`${y}${i>=12?"PM":"AM"} - ${v}${_>=12?"PM":"AM"}`,score:Math.round(s),recommendation:"Schedule your hardest task in this window."},t.confidence.bestTime=e[i].count}let r={"< 30m":[],"30-60m":[],"60-90m":[],"90m+":[]};n.forEach(_=>{let y=(_.duration||0)/6e4;y<30?r["< 30m"].push(_.focusScore||0):y<60?r["30-60m"].push(_.focusScore||0):y<90?r["60-90m"].push(_.focusScore||0):r["90m+"].push(_.focusScore||0)});let o=null,a=-1;Object.entries(r).forEach(([_,y])=>{if(y.length<2)return;let v=y.reduce((x,R)=>x+R,0)/y.length;v>a&&(a=v,o=_)}),o&&(t.optimalLength={label:o,score:Math.round(a),recommendation:"Use this duration as your default deep-work block."},t.confidence.optimalLength=r[o].length);let c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u={};n.forEach(_=>{if(!_.startTime)return;let y=new Date(_.startTime).getDay();u[y]||(u[y]={total:0,count:0}),u[y].total+=_.focusScore||0,u[y].count+=1});let h=null,d=-1;Object.entries(u).forEach(([_,y])=>{if(y.count<2)return;let v=y.total/y.count;v>d&&(d=v,h=Number(_))}),h!==null&&(t.bestDay={label:c[h],score:Math.round(d),recommendation:"Plan revision-heavy sessions on this day."},t.confidence.bestDay=u[h].count);let p=n.filter(_=>(_.startTime||0)>=Date.now()-10080*60*1e3),m=p.filter(_=>{let y=new Date(_.startTime||0).getHours();return y>=21||y<6});if(m.length>=2){let _=ge(m)||0,y=ge(p)||0;_+6<y&&(t.opportunity="Opportunity: Late-night sessions are underperforming; shift deep work earlier.")}return t.opportunity||(t.opportunity="Opportunity: Keep session timing consistent to improve focus stability."),t}function CC(n,t){let e=[...n].sort((D,I)=>(D.startTime||0)-(I.startTime||0)),i=xC(t),s=i?e.filter(D=>(D.startTime||D.endTime||0)>=i.currentStart):e,r=i?e.filter(D=>{let I=D.startTime||D.endTime||0;return I>=i.previousStart&&I<i.currentStart}):[],o=pi(Date.now()),a=s.filter(D=>pi(D.startTime||D.endTime||Date.now())===o),c=SC(s,t),u={high:s.filter(D=>(D.focusScore||0)>=80).length,medium:s.filter(D=>(D.focusScore||0)>=50&&(D.focusScore||0)<80).length,low:s.filter(D=>(D.focusScore||0)<50).length},h={};s.forEach(D=>{Object.entries(D.distractingSites||{}).forEach(([I,w])=>{h[I]=(h[I]||0)+w})});let d={};r.forEach(D=>{Object.entries(D.distractingSites||{}).forEach(([I,w])=>{d[I]=(d[I]||0)+w})});let p=Object.entries(h).sort((D,I)=>I[1]-D[1]).slice(0,5).map(([D,I])=>({domain:D,count:I,delta:I-(d[D]||0)})),m=0,_=0;s.forEach(D=>{m+=D.choices?.angel||0,_+=D.choices?.devil||0});let y=0,v=0;r.forEach(D=>{y+=D.choices?.angel||0,v+=D.choices?.devil||0});let x=IC(e,14),R=s.length?[...s].sort((D,I)=>(I.focusScore||0)-(D.focusScore||0))[0]:null,O=s.length?[...s].sort((D,I)=>{let w=(D.focusScore||0)-(D.distractions||0)*2,T=(I.focusScore||0)-(I.distractions||0)*2;return w-T})[0]:null,M=RC(s),N=PC(e);return{sessionsFiltered:s,today:{focusTime:on(a),sessions:a.length,avgScore:ge(a),distractions:Zr(a)},period:{focusTime:on(s),sessions:s.length,avgScore:ge(s),distractions:Zr(s)},previous:{focusTime:on(r),sessions:r.length,avgScore:ge(r),distractions:Zr(r)},allTime:{focusTime:on(e),sessions:e.length,avgScore:ge(e),longestStreak:N.longestStreak},currentStreak:N.currentStreak,weekly:{labels:c.labels,time:c.time,score:c.score},chartSubtitles:{time:c.timeSubtitle,score:c.scoreSubtitle},periodCompare:{labels:["Focus Hours","Sessions","Avg Score","Distractions"],current:[Number((on(s)/(1e3*60*60)).toFixed(1)),s.length,ge(s)||0,Zr(s)],previous:[Number((on(r)/(1e3*60*60)).toFixed(1)),r.length,ge(r)||0,Zr(r)]},scoreDistribution:u,topSites:p,choices:{angel:m,devil:_,prevAngel:y,prevDevil:v},insights:M,consistency14:x,bestSession:R,worstSession:O,range:t}}function kC(n){let t=document.getElementById("chart-period-compare");t&&(ae.periodCompare&&ae.periodCompare.destroy(),ae.periodCompare=new We(t,{type:"bar",data:{labels:n.labels,datasets:[{label:"Current",data:n.current,backgroundColor:"rgba(244, 125, 91, 0.75)",borderRadius:6},{label:"Previous",data:n.previous,backgroundColor:"rgba(171, 171, 171, 0.55)",borderRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,color:"#7A7A7A",font:{size:11}}},tooltip:{backgroundColor:"#2D2D2D",titleFont:{size:11},bodyFont:{size:12},padding:10,cornerRadius:8}},scales:{x:{grid:{display:!1},ticks:{color:"#ABABAB",font:{size:11}},border:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(240, 237, 233, 0.35)"},ticks:{color:"#ABABAB",font:{size:11},maxTicksLimit:4},border:{display:!1}}}}}))}function DC(n){let t=document.getElementById("chart-score-distribution");t&&(ae.scoreDistribution&&ae.scoreDistribution.destroy(),ae.scoreDistribution=new We(t,{type:"doughnut",data:{labels:["High (80-100)","Medium (50-79)","Low (0-49)"],datasets:[{data:[n.high,n.medium,n.low],backgroundColor:["#6BCF7F","#FFB880","#FF6B6B"],borderWidth:0,hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"62%",plugins:{legend:{position:"bottom",labels:{boxWidth:10,color:"#7A7A7A",font:{size:11}}},tooltip:{backgroundColor:"#2D2D2D",titleFont:{size:11},bodyFont:{size:12},padding:10,cornerRadius:8,callbacks:{label:e=>{let i=e.dataset.data.reduce((o,a)=>o+a,0)||1,s=e.raw||0,r=Math.round(s/i*100);return`${e.label}: ${s} sessions (${r}%)`}}}}}}))}function OC(n,t="",e=!1){if(n===null||Number.isNaN(n))return{text:"--",cls:"delta-neutral"};if(n===0)return{text:`0${t}`,cls:"delta-neutral"};let i=n>0,s=e?i?"delta-neg":"delta-pos":i?"delta-pos":"delta-neg";return{text:`${i?"+":""}${n}${t}`,cls:s}}function NC(n){if(n===null||Number.isNaN(n))return{text:"--",cls:"delta-neutral"};if(n===0)return{text:"0m",cls:"delta-neutral"};let t=n>0,e=t?"delta-pos":"delta-neg";return Math.abs(n)>=180?{text:`${t?"+":"-"}${(Math.abs(n)/60).toFixed(1)}h`,cls:e}:{text:`${t?"+":""}${n}m`,cls:e}}function MC(n,t){let e=document.getElementById("chart-weekly-time");if(!e)return;ae.weeklyTime&&ae.weeklyTime.destroy();let i=t.map(o=>o/(1e3*60*60)),s=e.getContext("2d").createLinearGradient(0,0,0,240);s.addColorStop(0,"rgba(244, 125, 91, 0.24)"),s.addColorStop(1,"rgba(244, 125, 91, 0.02)");let r=n.length<=8?{color:"#ABABAB",autoSkip:!1,font:{size:11}}:{color:"#ABABAB",font:{size:11},autoSkip:!1,callback:(o,a)=>{let c=a===n.length-1;return a%2===0||c?n[a]:""}};ae.weeklyTime=new We(e,{type:"line",data:{labels:n,datasets:[{label:"Focus Time (hrs)",data:i,borderColor:"#F47D5B",backgroundColor:s,fill:!0,tension:.35,pointBackgroundColor:"#F47D5B",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:3,pointHoverRadius:5}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#2D2D2D",titleFont:{size:11},bodyFont:{size:12},displayColors:!1,padding:10,cornerRadius:8,callbacks:{label:o=>`Focus: ${Uc(t[o.dataIndex]||0)}`}}},scales:{x:{grid:{display:!1},ticks:r,border:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(240, 237, 233, 0.35)"},ticks:{color:"#ABABAB",callback:o=>`${Number(o).toFixed(1)}h`,maxTicksLimit:4,font:{size:11}},border:{display:!1}}}}})}function VC(n,t){let e=document.getElementById("chart-weekly-score");if(!e)return;ae.weeklyScore&&ae.weeklyScore.destroy();let i=n.length<=8?{color:"#ABABAB",autoSkip:!1,font:{size:11}}:{color:"#ABABAB",font:{size:11},autoSkip:!1,callback:(s,r)=>{let o=r===n.length-1;return r%2===0||o?n[r]:""}};ae.weeklyScore=new We(e,{type:"bar",data:{labels:n,datasets:[{data:t.map(s=>s??0),backgroundColor:t.map(s=>s===null?"rgba(240,237,233,0.6)":s>=80?"rgba(107,207,127,0.7)":s>=50?"rgba(255,184,128,0.7)":"rgba(255,107,107,0.7)"),borderRadius:6,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#2D2D2D",titleFont:{size:11},bodyFont:{size:12},padding:10,cornerRadius:8,callbacks:{label:s=>{let r=t[s.dataIndex];return r===null?"No sessions":`Score: ${r}%`}}}},scales:{x:{grid:{display:!1},ticks:i,border:{display:!1}},y:{beginAtZero:!0,max:100,grid:{color:"rgba(240, 237, 233, 0.35)"},ticks:{color:"#ABABAB",callback:s=>`${s}%`,maxTicksLimit:4,font:{size:11}},border:{display:!1}}}}})}function LC(n,t){let e=it("nav-username"),i=it("nav-avatar"),s=it("nav-session-badge");n?.name&&(e&&(e.textContent=n.name),i&&(i.textContent=n.name.charAt(0).toUpperCase())),s&&(s.style.display=t?.active?"flex":"none")}function FC(n,t){let e=it("hero-date"),i=it("hero-title"),s=it("hero-subtitle"),r=it("streak-number");e&&(e.textContent=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})),i&&(i.textContent=`Welcome back, ${n?.name||"there"}`),s&&(t.allTime.sessions?st.dataSource==="demo"?s.textContent=`Demo mode: ${st.persona} persona, ${t.range.toUpperCase()} range.`:s.textContent=`Tracking ${t.range.toUpperCase()} window. ${t.period.sessions} sessions in range.`:s.textContent="Start your first focus session to see your momentum."),r&&(r.textContent=t.currentStreak)}function Lf(n,t,e="",i=!1){let s=document.getElementById(n);if(!s)return;let r=OC(t,e,i);s.textContent=r.text,s.classList.remove("delta-pos","delta-neg","delta-neutral"),s.classList.add(r.cls)}function BC(n){let t=it("today-focus-time"),e=it("today-sessions"),i=it("today-score"),s=it("today-distractions");t&&(t.textContent=n.today.focusTime?Uc(n.today.focusTime):"0m"),e&&(e.textContent=n.today.sessions),i&&(i.textContent=n.today.avgScore!==null?`${n.today.avgScore}%`:"--"),s&&(s.textContent=n.today.distractions);let r=it("delta-focus");if(r){let c=Math.round((n.period.focusTime-n.previous.focusTime)/6e4),u=NC(c);r.textContent=u.text,r.classList.remove("delta-pos","delta-neg","delta-neutral"),r.classList.add(u.cls)}Lf("delta-sessions",n.period.sessions-n.previous.sessions);let o=n.period.avgScore!==null&&n.previous.avgScore!==null?n.period.avgScore-n.previous.avgScore:null;Lf("delta-score",o,"%"),Lf("delta-distractions",n.period.distractions-n.previous.distractions,"",!0);let a=it("consistency-value");a&&(a.textContent=`${n.consistency14}/14 days`)}function UC(n){let t=it("alltime-focus-time"),e=it("alltime-sessions"),i=it("alltime-score"),s=it("alltime-streak");t&&(t.textContent=n.allTime.focusTime?bC(n.allTime.focusTime):"0h"),e&&(e.textContent=n.allTime.sessions),i&&(i.textContent=n.allTime.avgScore!==null?`${n.allTime.avgScore}%`:"--"),s&&(s.textContent=n.allTime.longestStreak)}function zC(n){let t=it("distracting-sites-empty"),e=it("distracting-sites-list");if(!t||!e)return;if(!n.length){t.style.display="block",e.style.display="none";return}t.style.display="none",e.style.display="block";let i=n[0].count;e.innerHTML=n.map((s,r)=>{let o=s.delta>0?"trend-up":s.delta<0?"trend-down":"trend-flat",a=s.delta>0?`+${s.delta}`:s.delta<0?`${s.delta}`:"0";return`
        <div class="distraction-row">
          <div class="distraction-rank">${r+1}</div>
          <div class="distraction-info">
            <div class="distraction-domain">${Bf(s.domain)}</div>
            <div class="distraction-bar-bg">
              <div class="distraction-bar-fill" style="width:${Math.round(s.count/i*100)}%;"></div>
            </div>
          </div>
          <div class="distraction-count">${s.count}x</div>
          <div class="trend-chip ${o}">${a}</div>
        </div>
      `}).join("")}function qC(n){let t=n.angel+n.devil,e=t?n.angel/t*100:50,i=t?n.devil/t*100:50,s=it("choices-angel-count"),r=it("choices-devil-count"),o=it("choices-bar-angel"),a=it("choices-bar-devil");s&&(s.textContent=n.angel),r&&(r.textContent=n.devil),o&&(o.style.width=`${e}%`),a&&(a.style.width=`${i}%`);let c=it("choices-summary");c&&(t?c.textContent=`Angel ${Math.round(e)}% vs Devil ${Math.round(i)}% in selected range.`:c.textContent="No intervention choices yet in this range.");let u=n.prevAngel+n.prevDevil,h=u?n.prevAngel/u*100:null,d=it("choices-trend-summary");if(d)if(h===null||!t)d.textContent="Trend appears once previous period has enough choices.";else{let p=Math.round(e-h);d.textContent=p===0?"Choice trend is stable vs previous period.":p>0?`Angel choices improved by ${p} points vs previous period.`:`Devil choices increased by ${Math.abs(p)} points vs previous period.`}}function jC(n,t){let e=it("best-session-summary"),i=it("improve-session-summary");!e||!i||(n?e.textContent=`Best session: ${n.topic||"Untitled"} (${Uc(n.duration||0)}, ${n.focusScore||0}% focus).`:e.textContent="Best session highlight will appear here.",t?i.textContent=`Improve this pattern: ${t.topic||"Untitled"} had ${t.distractions||0} distractions with ${t.focusScore||0}% focus.`:i.textContent="Improvement opportunity will appear here.")}function WC(n){let t=(i,s,r)=>{let o=document.getElementById(`insight-${i}-title`),a=document.getElementById(`insight-${i}-desc`),c=document.getElementById(`insight-${i}-confidence`);if(!(!o||!a||!c)){if(!s){a.textContent=r,c.textContent="Need at least 2 sessions in this pattern.";return}i==="best-time"&&(a.textContent=`You focus best around ${s.label} (avg ${s.score}%). ${s.recommendation}`,c.textContent=`Based on ${n.confidence.bestTime} sessions.`),i==="optimal-length"&&(a.textContent=`Your strongest block is ${s.label} (avg ${s.score}%). ${s.recommendation}`,c.textContent=`Based on ${n.confidence.optimalLength} sessions.`),i==="best-day"&&(a.textContent=`${s.label} performs best (avg ${s.score}%). ${s.recommendation}`,c.textContent=`Based on ${n.confidence.bestDay} sessions.`)}};t("best-time",n.bestTime,"Complete a few sessions to see your patterns."),t("optimal-length",n.optimalLength,"We'll analyze your data once you have more sessions."),t("best-day",n.bestDay,"Keep studying to unlock day-of-week patterns.");let e=document.getElementById("insight-opportunity");e&&(e.textContent=n.opportunity)}function $C(n){return n.length?`
    <table class="history-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Time</th>
          <th>Topic</th>
          <th>Duration</th>
          <th>Focus Score</th>
          <th>Distractions</th>
        </tr>
      </thead>
      <tbody>
        ${n.map(t=>{let e=new Date(t.startTime||t.endTime||Date.now()),i=t.focusScore>=80?"high":t.focusScore>=50?"med":"low";return`
            <tr>
              <td>${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}</td>
              <td>${e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}</td>
              <td class="topic-cell" title="${Bf(t.topic||"")}">${Bf(t.topic||"Untitled")}</td>
              <td>${Uc(t.duration||0)}</td>
              <td><span class="score-badge ${i}">${t.focusScore!=null?`${t.focusScore}%`:"--"}</span></td>
              <td>${t.distractions||0}</td>
            </tr>
          `}).join("")}
      </tbody>
    </table>
  `:'<div class="empty-state"><p>No sessions match your current filters.</p></div>'}function HC(n,t=200){let e=null;return(...i)=>{e&&clearTimeout(e),e=setTimeout(()=>n(...i),t)}}function Jw(n){let t=it("history-table-container");if(!t)return;let e=it("history-empty"),i=it("history-table-content");i||(i=document.createElement("div"),i.id="history-table-content",t.appendChild(i));let s=[...n].sort((a,c)=>(c.startTime||0)-(a.startTime||0)),r=st.searchQuery?s.filter(a=>(a.topic||"").toLowerCase().includes(st.searchQuery.toLowerCase())):s;s.length?(e&&(e.style.display="none"),i.innerHTML=$C(r)):(e&&(e.style.display="block"),i.innerHTML="");let o=document.getElementById("export-csv-btn");o&&(o.onclick=()=>{let a=["Date","Time","Topic","Duration (min)","Focus Score (%)","Distractions","Distraction Time (min)"],c=r.map(p=>{let m=new Date(p.startTime||p.endTime||Date.now());return[m.toLocaleDateString("en-US"),m.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),`"${(p.topic||"Untitled").replace(/"/g,'""')}"`,Math.round((p.duration||0)/6e4),p.focusScore!=null?p.focusScore:"",p.distractions||0,Math.round((p.distractionTime||0)/6e4)].join(",")}),u=new Blob([[a.join(","),...c].join(`
`)],{type:"text/csv"}),h=URL.createObjectURL(u),d=document.createElement("a");d.href=h,d.download=`focus-flow-${st.range}-${new Date().toISOString().slice(0,10)}.csv`,d.click(),URL.revokeObjectURL(h)})}function GC(n){let t=n+1831565813;return()=>(t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296)}function Ff(n){let e=GC(n==="new"?17:n==="active"?29:53),i=["DSA","DBMS","OS","React","System Design","Python","ML"],s=["youtube.com","instagram.com","reddit.com","x.com","facebook.com"],r=n==="new"?8:n==="active"?28:90,o=n==="new"?[0,1]:n==="active"?[0,2]:[1,3],a=[];for(let c=r-1;c>=0;c-=1){let u=new Date;u.setDate(u.getDate()-c);let h=n==="new"?.5:n==="active"?.25:.12,p=e()<h?0:o[0]+Math.floor(e()*(o[1]-o[0]+1));for(let m=0;m<p;m+=1){let _=new Date(u),y=n==="power"?8:10;_.setHours(y+Math.floor(e()*11),Math.floor(e()*60),0,0);let x=(n==="new"?18+Math.floor(e()*42):n==="active"?28+Math.floor(e()*58):35+Math.floor(e()*80))*6e4,O=Math.max(0,(n==="new"?3:n==="active"?2:1)+Math.floor(e()*5)-2),M=u.getDay()===0||u.getDay()===6?-6:0,D=Math.max(32,Math.min(98,(n==="new"?56:n==="active"?72:84)+M+Math.floor(e()*18)-O*3)),I={};for(let A=0;A<O;A+=1){let S=s[Math.floor(e()*s.length)];I[S]=(I[S]||0)+1}let w=Math.floor(e()*3),T=Math.floor(e()*2);a.push({topic:i[Math.floor(e()*i.length)],startTime:_.getTime(),endTime:_.getTime()+x,duration:x,focusScore:D,distractions:O,distractionTime:O*(2+Math.floor(e()*5))*6e4,distractingSites:I,choices:{angel:w,devil:T}})}}return a}var KC={new:Ff("new"),active:Ff("active"),power:Ff("power")};function YC(){return st.dataSource==="demo"?KC[st.persona]||[]:st.liveSessions}function Xw(){let n=`${st.dataSource}:${st.persona}:${st.range}`;return st.analyticsCache.has(n)||st.analyticsCache.set(n,CC(YC(),st.range)),st.analyticsCache.get(n)}function QC(){document.querySelectorAll("#range-group .control-chip").forEach(e=>{e.classList.toggle("active",e.dataset.range===st.range)}),document.querySelectorAll("#data-source-group .control-chip").forEach(e=>{e.classList.toggle("active",e.dataset.source===st.dataSource)}),document.querySelectorAll("#persona-group .control-chip").forEach(e=>{e.classList.toggle("active",e.dataset.persona===st.persona)});let n=document.getElementById("persona-group"),t=document.getElementById("demo-badge");n&&(n.style.display=st.dataSource==="demo"?"flex":"none"),t&&(t.style.display=st.dataSource==="demo"?"inline-flex":"none")}function JC(n){return n==="30d"?"Monthly Trends":n==="all"?"Long-Term Trends":"Weekly Trends"}function XC(n){return n==="30d"?"Current month vs previous month movement":n==="all"?"Current long-term window vs previous window":"Current week vs previous week movement"}function Bc(n,t){QC();let e=Xw();LC(n,t),FC(n,e),BC(e),UC(e),zC(e.topSites),qC(e.choices),jC(e.bestSession,e.worstSession),WC(e.insights),Jw(e.sessionsFiltered);let i=document.getElementById("trends-section-title");i&&(i.textContent=JC(st.range));let s=document.getElementById("chart-time-subtitle"),r=document.getElementById("chart-score-subtitle"),o=document.getElementById("chart-compare-subtitle");s&&(s.textContent=e.chartSubtitles.time),r&&(r.textContent=e.chartSubtitles.score),o&&(o.textContent=XC(st.range)),MC(e.weekly.labels,e.weekly.time),VC(e.weekly.labels,e.weekly.score),kC(e.periodCompare),DC(e.scoreDistribution)}function ZC(n,t){document.querySelectorAll("#range-group .control-chip").forEach(i=>{i.addEventListener("click",()=>{st.range=i.dataset.range,Bc(n,t)})}),document.querySelectorAll("#data-source-group .control-chip").forEach(i=>{i.addEventListener("click",()=>{st.dataSource=i.dataset.source,Bc(n,t)})}),document.querySelectorAll("#persona-group .control-chip").forEach(i=>{i.addEventListener("click",()=>{st.persona=i.dataset.persona,Bc(n,t)})});let e=document.getElementById("history-search");if(e){let i=HC(s=>{st.searchQuery=s,Jw(Xw().sessionsFiltered)},200);e.addEventListener("input",()=>i(e.value.trim()))}}function Yw(n){let t=new Set;return n.filter(e=>{let i=`${e.startTime}_${e.topic}_${e.duration}`;return t.has(i)?!1:(t.add(i),!0)})}function tk(){let n=document.querySelector(".dashboard-container")||document.body;if(document.getElementById("offline-banner"))return;let e=document.createElement("div");e.id="offline-banner",e.style.cssText="background:#FFF4E6;border:1px solid #FFB366;border-radius:8px;padding:12px 16px;margin:12px 24px;font-size:13px;color:#996633;text-align:center;",e.textContent="Showing cached sessions from this device. Connect to internet for full cross-device history.",n.prepend(e)}async function ek(){let{user:n,session:t,sessionHistory:e=[]}=await chrome.storage.local.get(["user","session","sessionHistory"]);await Gw();let i=[];try{let s=await Kw();i=Yw(s.filter(r=>r.endTime))}catch(s){console.warn("Focus Flow Dashboard: Failed to load cloud sessions, using local cache",s),i=Yw((e||[]).filter(r=>r.endTime)),tk()}st.liveSessions=i,st.dataSource="live",st.range=i.length>=10?"30d":"7d",ZC(n,t),Bc(n,t)}ek();
/*! Bundled license information:

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.4
   * https://github.com/kurkle/color#readme
   * (c) 2024 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.dataset.js:
chart.js/dist/chart.js:
  (*!
   * Chart.js v4.5.1
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/logger/dist/esm/index.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/component/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
firebase/app/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/webchannel-wrapper/dist/bloom-blob/esm/bloom_blob_es2018.js:
@firebase/webchannel-wrapper/dist/webchannel-blob/esm/webchannel_blob_es2018.js:
  (** @license
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  *)
  (** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law | agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
